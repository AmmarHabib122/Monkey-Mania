"use strict";(self.webpackChunkmonkey_mania_system=self.webpackChunkmonkey_mania_system||[]).push([[671],{7671:(_i,$,g)=>{g.r($),g.d($,{HttpLoaderFactory:()=>ot,dashboardModule:()=>hi});var d=g(6895),O=g(529),m=g(9299);const _=void 0,at=["ar",[["\u0635","\u0645"],_,_],[["\u0635","\u0645"],_,["\u0635\u0628\u0627\u062d\u064b\u0627","\u0645\u0633\u0627\u0621\u064b"]],[["\u062d","\u0646","\u062b","\u0631","\u062e","\u062c","\u0633"],["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0627\u062b\u0646\u064a\u0646","\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062e\u0645\u064a\u0633","\u0627\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],_,["\u0623\u062d\u062f","\u0625\u062b\u0646\u064a\u0646","\u062b\u0644\u0627\u062b\u0627\u0621","\u0623\u0631\u0628\u0639\u0627\u0621","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639\u0629","\u0633\u0628\u062a"]],_,[["\u064a","\u0641","\u0645","\u0623","\u0648","\u0646","\u0644","\u063a","\u0633","\u0643","\u0628","\u062f"],["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"],_],_,[["\u0642.\u0645","\u0645"],_,["\u0642\u0628\u0644 \u0627\u0644\u0645\u064a\u0644\u0627\u062f","\u0645\u064a\u0644\u0627\u062f\u064a"]],6,[5,6],["d\u200f/M\u200f/y","dd\u200f/MM\u200f/y","d MMMM y","EEEE\u060c d MMMM y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_,"{1} \u0641\u064a {0}",_],[".",",",";","\u200e%\u200e","\u200e+","\u200e-","E","\xd7","\u2030","\u221e","\u0644\u064a\u0633\xa0\u0631\u0642\u0645\u064b\u0627",":"],["#,##0.###","#,##0%","\xa4\xa0#,##0.00","#E0"],"EGP","\u062c.\u0645.\u200f","\u062c\u0646\u064a\u0647 \u0645\u0635\u0631\u064a",{AED:["\u062f.\u0625.\u200f"],ARS:[_,"AR$"],AUD:["AU$"],BBD:[_,"BB$"],BHD:["\u062f.\u0628.\u200f"],BMD:[_,"BM$"],BND:[_,"BN$"],BSD:[_,"BS$"],BYN:[_,"\u0440."],BZD:[_,"BZ$"],CAD:["CA$"],CLP:[_,"CL$"],CNY:["CN\xa5"],COP:[_,"CO$"],CUP:[_,"CU$"],DOP:[_,"DO$"],DZD:["\u062f.\u062c.\u200f"],EGP:["\u062c.\u0645.\u200f","E\xa3"],FJD:[_,"FJ$"],GBP:["UK\xa3"],GYD:[_,"GY$"],HKD:["HK$"],IQD:["\u062f.\u0639.\u200f"],IRR:["\u0631.\u0625."],JMD:[_,"JM$"],JOD:["\u062f.\u0623.\u200f"],JPY:["JP\xa5"],KWD:["\u062f.\u0643.\u200f"],KYD:[_,"KY$"],LBP:["\u0644.\u0644.\u200f","L\xa3"],LRD:[_,"$LR"],LYD:["\u062f.\u0644.\u200f"],MAD:["\u062f.\u0645.\u200f"],MRU:["\u0623.\u0645."],MXN:["MX$"],NZD:["NZ$"],OMR:["\u0631.\u0639.\u200f"],PHP:[_,"\u20b1"],QAR:["\u0631.\u0642.\u200f"],SAR:["\u0631.\u0633.\u200f"],SBD:[_,"SB$"],SDD:["\u062f.\u0633.\u200f"],SDG:["\u062c.\u0633."],SRD:[_,"SR$"],SYP:["\u0644.\u0633.\u200f","\xa3"],THB:["\u0e3f"],TND:["\u062f.\u062a.\u200f"],TTD:[_,"TT$"],TWD:["NT$"],USD:["US$"],UYU:[_,"UY$"],YER:["\u0631.\u064a.\u200f"]},"rtl",function it(i){const a=i;return 0===a?0:1===a?1:2===a?2:a%100===Math.floor(a%100)&&a%100>=3&&a%100<=10?3:a%100===Math.floor(a%100)&&a%100>=11&&a%100<=99?4:5}];var t=g(4650),U=g(3267),z=g(3683),L=g(6338),v=g(7392),C=g(4859),rt=g(4850),b=g(9602),f=g(9549),I=g(3238),D=g(4144),p=g(9151),lt=g(8596),st=g(4123),u=g(5412);let k=(()=>{const a=class{constructor(e){this.http=e}getBranches(){return this.http.get("branch/all/")}getMaterials(e){return this.http.get(`branch_material/all?branch_id=${e}`)}getAllNonActiveChildren(e){const o=(new O.LE).set("search",e);return this.http.get("child/non_active/all/",{params:o})}createBill(e){return this.http.post("bill/create/",e)}ApplyPromoCode(e,o){return this.http.patch(`bill/${e}/apply_discount/`,{discount:o})}getBillDetails(e){return this.http.get(`product_bill/${e}/`)}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.LFG(O.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),i})();var P=g(7185),c=g(4006),H=g(1948);function ct(i,a){if(1&i&&(t.TgZ(0,"mat-radio-button",9)(1,"div",10)(2,"h3",11),t._uU(3),t.qZA(),t.TgZ(4,"p",12),t._uU(5),t.qZA()()()),2&i){const r=a.$implicit;t.Q6J("value",r.id),t.xp6(3),t.hij("\u{1f6dd} ",r.name,""),t.xp6(2),t.Oqu(r.address)}}let dt=(()=>{const a=class{constructor(e,o,n,l,s){this.sharedService=e,this.translate=o,this.toaster=n,this.dialogRef=l,this.data=s,this.branches=[],this.selectedBranchId=null,this.branchInfo=JSON.parse(localStorage.getItem("branch")||"{}"),o.setDefaultLang("ar"),o.use("ar"),document.body.dir="rtl"}ngOnInit(){this.getBranches(),this.selectedBranchId=this.branchInfo.id||null}getBranches(){this.sharedService.getBranches().subscribe(e=>{this.branches=e})}onConfirm(){const e=this.branches.find(o=>o.id===this.selectedBranchId);e&&(localStorage.setItem("branch",JSON.stringify(e)),this.toaster.success(this.translate.instant("SUCCESS_CHOOSE")),this.dialogRef.close(e))}onClose(){this.dialogRef.close()}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(k),t.Y36(p.sK),t.Y36(P._W),t.Y36(u.so),t.Y36(u.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-branches-dialog"]],decls:15,vars:9,consts:[[1,"dialog-wrapper","py-3","px-2"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"dialog-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-content"],[1,"radio-group",3,"ngModel","ngModelChange"],["class","branch-item",3,"value",4,"ngFor","ngForOf"],["align","center",1,"dialog-actions"],["mat-raised-button","",1,"confirm-btn",3,"disabled","click"],[1,"branch-item",3,"value"],[1,"branch-details"],[1,"branch-name"],[1,"branch-address"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-dialog-content",4)(9,"mat-radio-group",5),t.NdJ("ngModelChange",function(s){return n.selectedBranchId=s}),t.YNc(10,ct,6,3,"mat-radio-button",6),t.qZA()(),t.TgZ(11,"mat-dialog-actions",7)(12,"button",8),t.NdJ("click",function(){return n.onConfirm()}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,5,"CHOOSE_BRANCH")),t.xp6(6),t.Q6J("ngModel",n.selectedBranchId),t.xp6(1),t.Q6J("ngForOf",n.branches),t.xp6(2),t.Q6J("disabled",!n.selectedBranchId),t.xp6(1),t.hij(" \u2705 ",t.lcZ(14,7,"CONFIRM")," "))},dependencies:[d.sg,u.xY,u.H8,c.JJ,c.On,v.Hw,C.lW,C.RK,H.VQ,H.U0,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.dialog-wrapper[_ngcontent-%COMP%]{background-color:#111827;padding:24px;max-width:500px;width:100%;box-sizing:border-box;box-shadow:0 6px 16px #00000026;display:flex;flex-direction:column;align-items:center}.dialog-title[_ngcontent-%COMP%]{color:#f3f4f6;font-size:22px;font-weight:700;text-align:center;margin-bottom:16px}.dialog-content[_ngcontent-%COMP%]{width:100%}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.branch-item[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#1f2937;border-radius:12px;padding:16px;color:#f3f4f6;border:2px solid transparent;transition:all .3s ease-in-out;width:100%;box-sizing:border-box;cursor:pointer}.branch-item[_ngcontent-%COMP%]:hover{background-color:#283547;transform:translateY(-2px)}.branch-item.mat-radio-checked[_ngcontent-%COMP%]{border-color:#3f51b5;background-color:#f0f4ff}.branch-name[_ngcontent-%COMP%]{font-size:18px;margin:0 0 4px}.branch-address[_ngcontent-%COMP%]{font-size:14px;margin:0;color:#f3f4f6cc}.confirm-btn[_ngcontent-%COMP%]{background-color:#004953;color:#fff;padding:12px 24px;border-radius:10px;font-size:18px;font-weight:600;width:100%;margin-top:16px;transition:background-color .3s ease}.confirm-btn[_ngcontent-%COMP%]:hover:enabled{background-color:#00252a}.confirm-btn[_ngcontent-%COMP%]:disabled{background-color:#00a3b9;color:#fff9;cursor:not-allowed}@media (max-width: 480px){.dialog-wrapper[_ngcontent-%COMP%]{padding:16px;max-width:95%}.dialog-title[_ngcontent-%COMP%]{font-size:20px}.confirm-btn[_ngcontent-%COMP%]{font-size:16px;padding:10px 18px}}.close-btn[_ngcontent-%COMP%]{color:red}.branch-details[_ngcontent-%COMP%]{color:#f3f4f6}  .mat-mdc-dialog-surface{border-radius:12px!important;background:#111827!important}"]}),i})();var pt=g(8083),gt=g(2289),N=g(7084);function ut(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DASHBOARD")))}function ht(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"SALES")))}function _t(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"HUMAN")))}function ft(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"USER")))}function mt(i,a){if(1&i&&(t.TgZ(0,"a",16)(1,"mat-icon"),t._uU(2,"person"),t.qZA(),t.YNc(3,ft,3,3,"span",1),t.qZA()),2&i){const r=t.oxw();t.xp6(3),t.Q6J("ngIf",!r.collapsed)}}function bt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"STAFF")))}function Ct(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CHILDREN")))}function xt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"SCHOOLS")))}function Ot(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CHILDREN_BILLS")))}function At(i,a){1&i&&(t.TgZ(0,"a",17)(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"ACTIVE_BILLS")," "))}function Zt(i,a){1&i&&(t.TgZ(0,"a",18)(1,"mat-icon"),t._uU(2,"receipt"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"ALL_BILLS")," "))}function Pt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CAFE_BILLS")))}function vt(i,a){1&i&&(t.TgZ(0,"a",19)(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"ACTIVE_BILLS")," "))}function Mt(i,a){1&i&&(t.TgZ(0,"a",20)(1,"mat-icon"),t._uU(2,"receipt"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"ALL_BILLS")," "))}function yt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"CAFE_PREFERENCES")))}function Tt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PRODUCTS")))}function Dt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MATERIALS")))}function wt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"OFFERS")))}function It(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"EXPENSE")))}function kt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"MATERIAL_EXPENSE")))}function Et(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"GENERAL_EXPENSE")))}function qt(i,a){if(1&i&&(t.TgZ(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header",4)(2,"mat-panel-title")(3,"mat-icon"),t._uU(4,"account_balance_wallet"),t.qZA(),t.YNc(5,It,3,3,"span",1),t.qZA()(),t.TgZ(6,"mat-action-list")(7,"a",21)(8,"mat-icon"),t._uU(9,"inventory_2"),t.qZA(),t.YNc(10,kt,3,3,"span",1),t.qZA(),t.TgZ(11,"a",22)(12,"mat-icon"),t._uU(13,"receipt_long"),t.qZA(),t.YNc(14,Et,3,3,"span",1),t.qZA()()()),2&i){const r=t.oxw();t.Q6J("hideToggle",r.collapsed),t.xp6(5),t.Q6J("ngIf",!r.collapsed),t.xp6(5),t.Q6J("ngIf",!r.collapsed),t.xp6(4),t.Q6J("ngIf",!r.collapsed)}}let Ut=(()=>{const a=class{constructor(e){this.translate=e,this.collapsed=!1,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),e.setDefaultLang("ar"),e.use("ar"),document.body.dir="rtl"}ngAfterViewInit(){this.collapsePanelsIfSidebarCollapsed()}ngOnChanges(){this.collapsePanelsIfSidebarCollapsed()}collapsePanelsIfSidebarCollapsed(){this.collapsed&&this.panels&&setTimeout(()=>{this.panels.forEach(e=>e.close())})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(p.sK))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-side-nav"]],viewQuery:function(o,n){if(1&o&&t.Gf(N.ib,5),2&o){let l;t.iGM(l=t.CRH())&&(n.panels=l)}},inputs:{collapsed:"collapsed"},features:[t.TTD],decls:67,vars:22,consts:[["mat-list-item","","routerLink","/dashboard/main","routerLinkActive","active-link",1,"d-flex","justify-content-center"],[4,"ngIf"],["mat-list-item","","routerLink","/dashboard/sales","routerLinkActive","active-link"],[3,"hideToggle"],[1,"px-3"],["mat-list-item","","routerLink","/dashboard/user","routerLinkActive","active-link",4,"ngIf"],["mat-list-item","","routerLink","/dashboard/staff","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/child","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/school","routerLinkActive","active-link"],[1,"nested-panel",3,"hideToggle"],["mat-list-item","","routerLink","/dashboard/bills/children/active","routerLinkActive","active-link",4,"ngIf"],["mat-list-item","","routerLink","/dashboard/bills/children/all","routerLinkActive","active-link",4,"ngIf"],["mat-list-item","","routerLink","/dashboard/bills/cafe/active","routerLinkActive","active-link",4,"ngIf"],["mat-list-item","","routerLink","/dashboard/bills/cafe/all","routerLinkActive","active-link",4,"ngIf"],["mat-list-item","","disabled",""],[3,"hideToggle",4,"ngIf"],["mat-list-item","","routerLink","/dashboard/user","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/bills/children/active","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/bills/children/all","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/bills/cafe/active","routerLinkActive","active-link"],["mat-list-item","","routerLink","/dashboard/bills/cafe/all","routerLinkActive","active-link"],["mat-list-item","","routerLinkActive","active-link","routerLink","/dashboard/material/expense"],["mat-list-item","","routerLinkActive","active-link","routerLink","/dashboard/general/expense"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-nav-list")(1,"a",0)(2,"mat-icon"),t._uU(3,"dashboard"),t.qZA(),t.YNc(4,ut,3,3,"span",1),t.qZA(),t.TgZ(5,"a",2)(6,"mat-icon"),t._uU(7,"point_of_sale"),t.qZA(),t.YNc(8,ht,3,3,"span",1),t.qZA(),t.TgZ(9,"mat-expansion-panel",3)(10,"mat-expansion-panel-header",4)(11,"mat-panel-title")(12,"mat-icon"),t._uU(13,"groups"),t.qZA(),t.YNc(14,_t,3,3,"span",1),t.qZA()(),t.TgZ(15,"mat-action-list"),t.YNc(16,mt,4,1,"a",5),t.TgZ(17,"a",6)(18,"mat-icon"),t._uU(19,"badge"),t.qZA(),t.YNc(20,bt,3,3,"span",1),t.qZA(),t.TgZ(21,"a",7)(22,"mat-icon"),t._uU(23,"child_care"),t.qZA(),t.YNc(24,Ct,3,3,"span",1),t.qZA()()(),t.TgZ(25,"a",8)(26,"mat-icon"),t._uU(27,"school"),t.qZA(),t.YNc(28,xt,3,3,"span",1),t.qZA(),t.TgZ(29,"mat-expansion-panel",9)(30,"mat-expansion-panel-header",4)(31,"mat-panel-title")(32,"mat-icon"),t._uU(33,"child_friendly"),t.qZA(),t.YNc(34,Ot,3,3,"span",1),t.qZA()(),t.TgZ(35,"mat-nav-list"),t.YNc(36,At,6,3,"a",10),t.YNc(37,Zt,6,3,"a",11),t.qZA()(),t.TgZ(38,"mat-expansion-panel",9)(39,"mat-expansion-panel-header",4)(40,"mat-panel-title")(41,"mat-icon"),t._uU(42,"local_cafe"),t.qZA(),t.YNc(43,Pt,3,3,"span",1),t.qZA()(),t.TgZ(44,"mat-nav-list"),t.YNc(45,vt,6,3,"a",12),t.YNc(46,Mt,6,3,"a",13),t.qZA()(),t.TgZ(47,"mat-expansion-panel",3)(48,"mat-expansion-panel-header",4)(49,"mat-panel-title")(50,"mat-icon"),t._uU(51,"local_dining"),t.qZA(),t.YNc(52,yt,3,3,"span",1),t.qZA()(),t.TgZ(53,"mat-action-list")(54,"a",14)(55,"mat-icon"),t._uU(56,"inventory"),t.qZA(),t.YNc(57,Tt,3,3,"span",1),t.qZA(),t.TgZ(58,"a",14)(59,"mat-icon"),t._uU(60,"inventory_2"),t.qZA(),t.YNc(61,Dt,3,3,"span",1),t.qZA(),t.TgZ(62,"a",14)(63,"mat-icon"),t._uU(64,"local_offer"),t.qZA(),t.YNc(65,wt,3,3,"span",1),t.qZA()()(),t.YNc(66,qt,15,4,"mat-expansion-panel",15),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(1),t.Q6J("hideToggle",n.collapsed),t.xp6(5),t.Q6J("ngIf",!n.collapsed),t.xp6(2),t.Q6J("ngIf","admin"==n.userInfo.role||"owner"==n.userInfo.role),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(1),t.Q6J("hideToggle",n.collapsed),t.xp6(5),t.Q6J("ngIf",!n.collapsed),t.xp6(2),t.Q6J("ngIf",!n.collapsed),t.xp6(1),t.Q6J("ngIf",("admin"==n.userInfo.role||"owner"==n.userInfo.role||"manger"==n.userInfo.role||"reception"==n.userInfo.role)&&!n.collapsed),t.xp6(1),t.Q6J("hideToggle",n.collapsed),t.xp6(5),t.Q6J("ngIf",!n.collapsed),t.xp6(2),t.Q6J("ngIf",!n.collapsed),t.xp6(1),t.Q6J("ngIf",("admin"==n.userInfo.role||"owner"==n.userInfo.role||"waiter"==n.userInfo.role||"manger"==n.userInfo.role||"reception"==n.userInfo.role)&&!n.collapsed),t.xp6(1),t.Q6J("hideToggle",n.collapsed),t.xp6(5),t.Q6J("ngIf",!n.collapsed),t.xp6(5),t.Q6J("ngIf",!n.collapsed),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(4),t.Q6J("ngIf",!n.collapsed),t.xp6(1),t.Q6J("ngIf","admin"==n.userInfo.role||"owner"==n.userInfo.role))},dependencies:[d.O5,v.Hw,m.rH,m.Od,L.lT,L.Hk,L.Tg,N.ib,N.yz,N.yK,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}mat-icon[_ngcontent-%COMP%]{color:#f3f4f6}span[_ngcontent-%COMP%]{color:#f3f4f6}mat-expansion-panel[_ngcontent-%COMP%]{background-color:#1f2937}  .mat-expansion-indicator:after{color:#f3f4f6}a[mat-list-item][_ngcontent-%COMP%], mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#f3f4f6!important}a[mat-list-item][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-expansion-panel-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;color:#f3f4f6!important}.active-link[_ngcontent-%COMP%]{background-color:#2fbd6f1a;border-left:4px solid #4caf65;font-weight:700}.active-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .active-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fbbf24!important}  .mat-expansion-panel-body{padding:8px!important}"]}),i})();function Lt(i,a){1&i&&t._UZ(0,"img",19)}function Nt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"LOGOUT")))}function St(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div")(1,"button",20),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.makeOrder())}),t._UZ(2,"i",21),t._uU(3),t.ALo(4,"translate"),t._UZ(5,"i",21),t.qZA()()}2&i&&(t.xp6(3),t.hij(" \u{1f6d2} ",t.lcZ(4,1,"Create_order"),""))}function Bt(i,a){if(1&i&&(t.TgZ(0,"p",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.hij(" \u{1f4c5} ",t.xi3(2,1,r.currentDate,"fullDate")," ")}}function Rt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div")(1,"button",20),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.makeOrder())}),t._UZ(2,"i",21),t._uU(3),t.ALo(4,"translate"),t._UZ(5,"i",21),t.qZA()()}2&i&&(t.xp6(3),t.hij(" \u{1f6d2} ",t.lcZ(4,1,"Create_order"),""))}let Ft=(()=>{const a=class{constructor(e,o,n,l){this.authService=e,this.dialog=o,this.breakpointObserver=n,this.router=l,this.sidebarCollapsed=!0,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.branch=JSON.parse(localStorage.getItem("branch")||"{}"),this.currentDate=new Date,this.clockEmoji="\u{1f552}",this.clockEmojis=["\u{1f550}","\u{1f551}","\u{1f552}","\u{1f553}","\u{1f554}","\u{1f555}","\u{1f556}","\u{1f557}","\u{1f558}","\u{1f559}","\u{1f55a}","\u{1f55b}"],this.isMobile=!1,this.showMobileMenu=!1,this.emojiIndex=0}ngOnInit(){this.intervalId=setInterval(()=>{this.currentDate=new Date},6e4),setInterval(()=>{this.emojiIndex=(this.emojiIndex+1)%this.clockEmojis.length,this.clockEmoji=this.clockEmojis[this.emojiIndex]},1e3)}toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed}toggleMobileMenu(){this.showMobileMenu=!this.showMobileMenu}logOUt(){this.authService.logout()}makeOrder(){this.router.navigate(["/dashboard/order"])}openBranchDialog(){this.dialog.open(dt,{width:"500px",disableClose:!0}).afterClosed().subscribe(()=>{this.branch=JSON.parse(localStorage.getItem("branch")||"{}")})}ngOnDestroy(){clearInterval(this.intervalId),this.breakpointSub&&this.breakpointSub.unsubscribe()}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(pt.j),t.Y36(u.uw),t.Y36(gt.Yg),t.Y36(m.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],decls:39,vars:25,consts:[[1,"sidenav-container","d-flex"],[1,"sidenav",3,"mode","opened"],[1,"toggle-button"],["mat-icon-button","",3,"click"],["color","accent"],["src","../../../../assets/png/logo-01.png","alt","",4,"ngIf"],[1,"sidenav-content-wrapper","mb-5"],[3,"collapsed"],[1,"logout-fixed-wrapper"],["mat-button","",1,"logout-button",3,"click"],["color","warn"],[4,"ngIf"],[1,"top-toolbar"],["src","../../../../assets/png/avatar.png","alt",""],[1,"welcome-text"],[1,"spacer"],[1,"branch-btn","d-flex","align-items-center","mx-2","mb-3",3,"click"],["class","mx-1",4,"ngIf"],[1,"m-5"],["src","../../../../assets/png/logo-01.png","alt",""],[1,"btn","mx-4","mb-3",3,"click"],[1,"animation"],[1,"mx-1"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return n.toggleSidebar()}),t.TgZ(4,"mat-icon",4),t._uU(5,"menu"),t.qZA()()(),t.YNc(6,Lt,1,0,"img",5),t._UZ(7,"hr"),t.TgZ(8,"div",6),t._UZ(9,"app-side-nav",7),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"hr"),t.TgZ(12,"button",9),t.NdJ("click",function(){return n.logOUt()}),t.TgZ(13,"mat-icon",10),t._uU(14,"logout"),t.qZA(),t.YNc(15,Nt,3,3,"span",11),t.qZA()()(),t.TgZ(16,"mat-sidenav-content")(17,"mat-toolbar",12),t._UZ(18,"img",13),t.TgZ(19,"span",14),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"span",15),t.TgZ(23,"p"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"button",16),t.NdJ("click",function(){return n.openBranchDialog()}),t.TgZ(27,"mat-icon"),t._uU(28,"arrow_drop_down"),t.qZA(),t._uU(29),t.qZA(),t._UZ(30,"span",15),t.YNc(31,St,6,3,"div",11),t.YNc(32,Bt,3,4,"p",17),t.YNc(33,Rt,6,3,"div",11),t.TgZ(34,"p"),t._uU(35),t.ALo(36,"date"),t.qZA()(),t.TgZ(37,"div",18),t._UZ(38,"router-outlet"),t.qZA()()()),2&o&&(t.xp6(1),t.ekj("collapsed",n.sidebarCollapsed),t.Q6J("mode","side")("opened",!0),t.xp6(5),t.Q6J("ngIf",!n.sidebarCollapsed),t.xp6(3),t.Q6J("collapsed",n.sidebarCollapsed),t.xp6(6),t.Q6J("ngIf",!n.sidebarCollapsed),t.xp6(1),t.ekj("expanded",n.sidebarCollapsed),t.xp6(4),t.AsE("",t.lcZ(21,18,"WELCOME")," , ",n.userInfo.username," !"),t.xp6(4),t.hij("\u{1f33f}",t.lcZ(25,20,"BRANCH")," :"),t.xp6(5),t.hij(" ",n.branch.name," "),t.xp6(2),t.Q6J("ngIf","reception"==n.userInfo.role),t.xp6(1),t.Q6J("ngIf","waiter"!=n.userInfo.role),t.xp6(1),t.Q6J("ngIf","waiter"==n.userInfo.role),t.xp6(2),t.AsE("",n.clockEmoji," ",t.xi3(36,22,n.currentDate,"shortTime"),""))},dependencies:[d.O5,m.lC,Ut,U.JX,U.TM,U.Rh,z.Ye,v.Hw,C.lW,C.RK,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.sidenav-container[_ngcontent-%COMP%]{font-size:12px;height:100vh;overflow:hidden;background:#111827}mat-sidenav[_ngcontent-%COMP%]{background:#1f2937;color:#f3f4f6;height:100%;overflow:hidden;-ms-overflow-style:none;scrollbar-width:none}.sidenav[_ngcontent-%COMP%]{width:260px;transition:width .3s ease;overflow:hidden;position:relative}.sidenav.collapsed[_ngcontent-%COMP%]{width:75px}img[_ngcontent-%COMP%]{width:200px}.toggle-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:17px}.mat-sidenav-content[_ngcontent-%COMP%]{background:#111827;height:100vh;width:100%;overflow-y:auto;overflow-x:hidden;margin:0!important}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;color:#f3f4f6;border-bottom:1px solid white}.header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{font-size:px;font-weight:500}.header[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover}.content-scrollable[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.content-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.logout-fixed-wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#1f2937;padding:8px 0}.logout-fixed-wrapper[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0;border-color:#fff}.logout-fixed-wrapper[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:10px;color:#f3f4f6;background-color:transparent;padding:20px 16px}.logout-fixed-wrapper[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.logout-fixed-wrapper[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]:hover{background-color:#161d27}mat-sidenav[_ngcontent-%COMP%]     .mat-drawer-inner-container{height:100%;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}mat-sidenav[_ngcontent-%COMP%]     .mat-drawer-inner-container::-webkit-scrollbar{display:none}.top-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;padding:0 16px;height:64px;width:100%;background:#111827;color:#f3f4f6}.top-toolbar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.top-toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.top-toolbar[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{margin:0 20px;font-size:24px;font-weight:500}.top-toolbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}.top-toolbar[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover}.branch-btn[_ngcontent-%COMP%]{background-color:#1f2937;color:#f3f4f6;padding:6px 10px;border:none;border-radius:8px;font-weight:500}.btn[_ngcontent-%COMP%]{outline:0;display:inline-flex;align-items:center;justify-content:space-between;background:#004953;min-width:100px;border:0;border-radius:4px;box-shadow:0 4px 12px #0000001a;box-sizing:border-box;padding:8px 20px;color:#fff;font-size:12px;font-weight:600;letter-spacing:1.2px;text-transform:uppercase;overflow:hidden;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{opacity:.95}.btn[_ngcontent-%COMP%]   .animation[_ngcontent-%COMP%]{border-radius:100%;animation:_ngcontent-%COMP%_ripple .6s linear infinite}@keyframes _ngcontent-%COMP%_ripple{0%{box-shadow:0 0 #ffffff1a,0 0 0 20px #ffffff1a,0 0 0 40px #ffffff1a,0 0 0 60px #ffffff1a}to{box-shadow:0 0 0 20px #ffffff1a,0 0 0 40px #ffffff1a,0 0 0 60px #ffffff1a,0 0 0 80px #fff0}}@media print{mat-sidenav[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%], .top-toolbar[_ngcontent-%COMP%]{display:none!important}.mat-sidenav-content[_ngcontent-%COMP%]{margin:0!important;width:100%!important}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{overflow:visible!important;background:#fff!important}}"]}),i})(),x=(()=>{const a=class{constructor(e){this.http=e}getSchools(e=""){let o={};return e&&(o={params:{search:e}}),this.http.get("school/all/",o)}createSchool(e){return this.http.post("school/create/",e)}updateSchool(e,o){return this.http.put(`school/${e}/update/`,o)}getSchoolById(e){return this.http.get(`school/${e}/`)}uploadBulkSchool(e){return this.http.post("school/bulk_create/",e)}getStatistics(e){let o={};return e?(o=(new O.LE).set("branch_id",e),this.http.get("dashboard/statistics",{params:o})):this.http.get("dashboard/statistics")}getChild(e="",o){let n=(new O.LE).set("page",o);return e&&(n=n.set("search",e)),this.http.get("child/all/",{params:n})}getChildById(e){return this.http.get(`child/${e}/`)}createChild(e){return this.http.post("child/create/",e)}updateChild(e,o){return this.http.put(`child/${e}/update/`,o)}getUsers(e="",o=[],n){let l=new O.LE;return l=l.set("page",n),e&&(l=l.set("search",e)),o&&0!==o.length?o.forEach(s=>{l=l.append("branch_id",s.toString())}):l=l.set("branch_id","all"),this.http.get("user/all/",{params:l})}getUserById(e){return this.http.get(`user/${e}/`)}getExpenses(e,o){let n=new O.LE;return o.page&&(n=n.set("page",o.page)),o.searchQuery&&(n=n.set("search",o.searchQuery)),o.branchIds&&0!==o.branchIds.length?o.branchIds.forEach(l=>{n=n.append("branch_id",l.toString())}):n=n.set("branch_id","all"),o.startDate&&o.endDate&&(n=n.set("start_date",o.startDate),n=n.set("end_date",o.endDate)),this.http.get(`${e}/all/`,{params:n})}getMaterialExpenseById(e){return this.http.get(`material_expense/${e}/`)}getGeneralExpenseById(e){return this.http.get(`general_expense/${e}/`)}createGeneralExpense(e){return this.http.post("general_expense/create/",e)}createMaterialExpense(e){return this.http.post("material_expense/create/",e)}updateGeneralExpense(e,o){return this.http.put(`general_expense/${e}/update/`,o)}updateMaterialExpense(e,o){return this.http.put(`material_expense/${e}/update/`,o)}getChildrenBills(e,o){let n=new O.LE;return o.page&&(n=n.set("page",o.page)),o.searchQuery&&(n=n.set("search",o.searchQuery)),o.branchIds&&0!==o.branchIds.length?o.branchIds.forEach(l=>{n=n.append("branch_id",l.toString())}):n=n.set("branch_id","all"),o.startDate&&o.endDate&&(n=n.set("start_date",o.startDate),n=n.set("end_date",o.endDate)),this.http.get(`bill${e}all/`,{params:n})}getChildBillById(e){return this.http.get(`bill/${e}/`)}closeBill(e,o){return this.http.patch(`bill/${e}/close/`,o)}getActiveBills(e){const o=(new O.LE).set("branch_id",e.toString());return this.http.get("bill/active/all",{params:o})}getLayer1Products(e){const o=(new O.LE).set("branch_id",e.toString());return this.http.get("branch_product/layer1",{params:o})}getLayer2Products(e,o){const n=(new O.LE).set("branch_id",e.toString()).set("layer1",o);return this.http.get("branch_product/layer2",{params:n})}getFinalProducts(e,o,n){const l=(new O.LE).set("branch_id",e.toString()).set("layer1",o).set("layer2",n);return this.http.get("branch_product/all",{params:l})}createProductBill(e){return this.http.post("product_bill/create/",e)}getCafeBill(e,o){let n=new O.LE;return o.page&&(n=n.set("page",o.page)),o.searchQuery&&(n=n.set("search",o.searchQuery)),o.branchIds&&0!==o.branchIds.length?o.branchIds.forEach(l=>{n=n.append("branch_id",l.toString())}):n=n.set("branch_id","all"),o.startDate&&o.endDate&&(n=n.set("start_date",o.startDate),n=n.set("end_date",o.endDate)),this.http.get(`product_bill${e}all/`,{params:n})}getBillDetails(e){return this.http.get(`/product_bill/${e}/`)}updateBill(e,o){return this.http.patch(`/product_bill/${e}/update/`,o)}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.LFG(O.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),i})(),G=(()=>{const a=class{constructor(e,o,n){this.dialogRef=e,this.dashBoardService=o,this.data=n,this.school={name:"",address:"",notes:""},n&&(this.school={...n})}onClose(){this.dialogRef.close()}onCreateSchool(){const e={name:this.school.name.trim(),address:this.school.address.trim(),notes:this.school.notes?.trim()||null};this.dashBoardService.createSchool(e).subscribe({next:o=>{this.dialogRef.close(o)},error:o=>{console.error("Error creating school:",o),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062f\u0631\u0633\u0629")}})}checkIfEdit(){this.data&&"edit"===this.data.event?this.editSchool():this.onCreateSchool()}editSchool(){const e={name:this.school.name.trim(),address:this.school.address.trim(),notes:this.school.notes?.trim()||null};this.dashBoardService.updateSchool(this.data.id,e).subscribe({next:o=>{this.dialogRef.close(o)},error:o=>{console.error("Error updating school:",o),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062f\u0631\u0633\u0629")}})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(u.so),t.Y36(x),t.Y36(u.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-school-dialog"]],decls:31,vars:18,consts:[[1,"dialog-container"],[1,"m-1","d-flex","justify-content-between","align-items-center"],["mat-dialog-title","",1,"dialog-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["rows","3",1,"form-control",3,"ngModel","ngModelChange"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"\u0625\u0636\u0627\u0641\u0629 \u0645\u062f\u0631\u0633\u0629 \u{1f3eb}"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t._UZ(7,"hr"),t.TgZ(8,"mat-dialog-content",4)(9,"div",5)(10,"label",6),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",7),t.NdJ("ngModelChange",function(s){return n.school.name=s}),t.qZA()(),t.TgZ(14,"div",5)(15,"label",6),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"input",7),t.NdJ("ngModelChange",function(s){return n.school.address=s}),t.qZA()(),t.TgZ(19,"div",5)(20,"label",6),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"textarea",8),t.NdJ("ngModelChange",function(s){return n.school.notes=s}),t.qZA()()(),t.TgZ(24,"mat-dialog-actions",9)(25,"button",10),t.NdJ("click",function(){return n.onClose()}),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",11),t.NdJ("click",function(){return n.checkIfEdit()}),t._uU(29),t.ALo(30,"translate"),t.qZA()()()),2&o&&(t.xp6(11),t.Oqu(t.lcZ(12,8,"SCHOOL_NAME")),t.xp6(2),t.Q6J("ngModel",n.school.name),t.xp6(3),t.Oqu(t.lcZ(17,10,"SCHOOL_ADDRESS")),t.xp6(2),t.Q6J("ngModel",n.school.address),t.xp6(3),t.Oqu(t.lcZ(22,12,"NOTES")),t.xp6(2),t.Q6J("ngModel",n.school.notes),t.xp6(3),t.hij(" ",t.lcZ(27,14,"CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(30,16,"SAVE")," "))},dependencies:[u.uh,u.xY,u.H8,c.Fj,c.JJ,c.On,v.Hw,C.lW,C.RK,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:12px!important;background:#111827!important}.dialog-header[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;font-size:1.25rem;font-weight:600;color:#f3f4f6!important}.mat-icon[_ngcontent-%COMP%]{color:#f3f4f6!important}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;color:#f3f4f6!important;flex-direction:column;gap:1.2rem;padding-top:1rem}.dialog-body[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}.dialog-body[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog-body[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dialog-body[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px}.dialog-footer[_ngcontent-%COMP%]{padding-top:1.5rem;display:flex;justify-content:flex-end;gap:1rem}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}"]}),i})();function Jt(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const r=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,r)," ")}}function Qt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"td",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.itemClicked.emit(o))}),t._uU(1),t.qZA()}if(2&i){const r=a.$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[r]," ")}}function Yt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"td")(1,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.editClicked.emit(o))}),t._uU(2,"\u270f\ufe0f"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.delete(o))}),t._uU(4,"\u{1f5d1}\ufe0f"),t.qZA()()}}function jt(i,a){if(1&i&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&i){const r=t.oxw(2).$implicit;t.xp6(1),t.hij(" \u{1f4b8} ",r.DISCOUNT_VALUE," ")}}function $t(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"td")(1,"button",4),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.editClicked.emit(o))}),t._uU(2," \u{1f4b3} "),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.promoClicked.emit(o))}),t._uU(4,"\u{1f381}"),t.qZA(),t.YNc(5,jt,2,1,"span",11),t.qZA()}if(2&i){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=r&&r.isActive)),t.xp6(4),t.Q6J("ngIf",null==r?null:r.DISCOUNT_VALUE)}}function zt(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Qt,2,1,"td",9),t.YNc(2,Yt,5,0,"td",6),t.YNc(3,$t,6,2,"td",6),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.displayedColumns),t.xp6(1),t.Q6J("ngIf",!r.isActiveBills),t.xp6(1),t.Q6J("ngIf",r.isActiveBills)}}function Ht(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.changePage(1))}),t._uU(1,"1"),t.qZA()}}function Gt(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"..."),t.qZA())}function Kt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){const n=t.CHM(r).$implicit,l=t.oxw();return t.KtG(l.changePage(n))}),t._uU(1),t.qZA()}if(2&i){const r=a.$implicit,e=t.oxw();t.ekj("active",e.currentPage===r),t.xp6(1),t.hij(" ",r," ")}}function Xt(i,a){1&i&&(t.TgZ(0,"span",13),t._uU(1,"..."),t.qZA())}function Vt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.changePage(o.totalPages()))}),t._uU(1),t.qZA()}if(2&i){const r=t.oxw();t.xp6(1),t.hij(" ",r.totalPages()," ")}}let y=(()=>{const a=class{constructor(){this.displayedColumns=[],this.data=[],this.editClicked=new t.vpe,this.promoClicked=new t.vpe,this.itemClicked=new t.vpe,this.isActiveBills=!1,this.isActive=!0,this.paginationType="local",this.totalItems=0,this.pageChange=new t.vpe,this.filteredData=[],this.pageSize=10,this.currentPage=1,this.searchQuery="",this.visiblePages=[],this.maxVisible=10,this.startPage=1,this.endPage=10}ngOnInit(){"local"===this.paginationType?this.applyFilter():(this.filteredData=this.data,this.updatePagination())}ngOnChanges(e){"local"===this.paginationType&&(e.data||e.searchQuery)?this.applyFilter():"server"===this.paginationType&&e.data&&(this.filteredData=this.data,this.updatePagination())}applyFilter(){const e=this.searchQuery.toLowerCase();this.filteredData=this.data.filter(o=>Object.values(o).some(n=>String(n).toLowerCase().includes(e))),"local"===this.paginationType&&(this.currentPage=1),this.updatePagination()}get paginatedData(){if("local"===this.paginationType){const e=(this.currentPage-1)*this.pageSize;return this.filteredData.slice(e,e+this.pageSize)}return this.filteredData}totalPages(){return"server"===this.paginationType?Math.ceil(this.totalItems/this.pageSize):Math.ceil(this.filteredData.length/this.pageSize)}changePage(e){e<1||e>this.totalPages()||("server"===this.paginationType?this.pageChange.emit(e):(this.currentPage=e,this.updatePagination()))}updatePagination(){const e=this.totalPages();e<=this.maxVisible?(this.startPage=1,this.endPage=e):this.currentPage<=6?(this.startPage=1,this.endPage=this.maxVisible):this.currentPage+4>=e?(this.startPage=e-this.maxVisible+1,this.endPage=e):(this.startPage=this.currentPage-5,this.endPage=this.currentPage+4),this.visiblePages=Array.from({length:this.endPage-this.startPage+1},(o,n)=>this.startPage+n)}edit(e){this.editClicked.emit(e)}delete(e){this.itemClicked.emit(e)}};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-data-table"]],inputs:{displayedColumns:"displayedColumns",data:"data",isActiveBills:"isActiveBills",isActive:"isActive",paginationType:"paginationType",totalItems:"totalItems",currentPage:"currentPage"},outputs:{editClicked:"editClicked",promoClicked:"promoClicked",itemClicked:"itemClicked",pageChange:"pageChange"},features:[t.TTD],decls:20,vars:12,consts:[[1,"table-wrapper"],[1,"custom-table"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"active","click",4,"ngFor","ngForOf"],["style","color: white",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["class","have_discount",4,"ngIf"],[1,"have_discount"],[2,"color","white"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),t.YNc(4,Jt,3,3,"th",2),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,zt,4,3,"tr",2),t.qZA()(),t.TgZ(10,"div",3)(11,"button",4),t.NdJ("click",function(){return n.changePage(n.currentPage-1)}),t._uU(12," \xab "),t.qZA(),t.YNc(13,Ht,2,0,"button",5),t.YNc(14,Gt,2,0,"span",6),t.YNc(15,Kt,2,3,"button",7),t.YNc(16,Xt,2,0,"span",8),t.YNc(17,Vt,2,1,"button",5),t.TgZ(18,"button",4),t.NdJ("click",function(){return n.changePage(n.currentPage+1)}),t._uU(19," \xbb "),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("ngForOf",n.displayedColumns),t.xp6(2),t.Oqu(t.lcZ(7,10,"ACTIONS")),t.xp6(3),t.Q6J("ngForOf",n.paginatedData),t.xp6(2),t.Q6J("disabled",1===n.currentPage),t.xp6(2),t.Q6J("ngIf",n.startPage>1),t.xp6(1),t.Q6J("ngIf",n.startPage>2),t.xp6(1),t.Q6J("ngForOf",n.visiblePages),t.xp6(1),t.Q6J("ngIf",n.endPage<n.totalPages()),t.xp6(1),t.Q6J("ngIf",n.endPage<n.totalPages()),t.xp6(1),t.Q6J("disabled",n.currentPage===n.totalPages()))},dependencies:[d.sg,d.O5,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.table-wrapper[_ngcontent-%COMP%]{padding:1rem;max-width:100%;overflow-x:auto}.table-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:1.5rem;width:100%;max-width:300px;border-radius:6px}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border-radius:8px!important}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#004953;color:#fff;font-weight:700}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 12px}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#37415180;color:#f3f4f6;font-weight:600;box-shadow:0 2px 4px #a70a0a14;transition:box-shadow .3s ease;cursor:pointer}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#5d697999;box-shadow:0 4px 8px #0000001f;transition:.3s}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{white-space:nowrap}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:8px;box-shadow:0 8px 32px #1f26871a;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.3);color:#000;padding:6px;cursor:pointer;font-size:12px;margin-right:8px;transition:transform .2s}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.3)}.table-wrapper[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:rgba(201,112,112,.3);color:#888;cursor:not-allowed;transform:none;box-shadow:none;border:1px solid rgba(200,200,200,.4)}.table-wrapper[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:center;flex-wrap:wrap;gap:5px}.table-wrapper[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.3rem .7rem;border:none;background:#f9f9f9;cursor:pointer;border-radius:4px;font-weight:700}.table-wrapper[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#144675;color:#fff}.table-wrapper[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-right-radius:8px;border-bottom-right-radius:8px;overflow:hidden}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-left-radius:10px;border-bottom-left-radius:10px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-right-radius:10px;border-bottom-right-radius:10px;overflow:hidden}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-left-radius:10px;border-bottom-left-radius:10px;overflow:hidden}.have_discount[_ngcontent-%COMP%]{font-size:12px;color:#00ff1a}"]}),i})(),K=(()=>{const a=class{};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(o,n){1&o&&t._UZ(0,"span",0)},styles:['body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;position:relative;animation:_ngcontent-%COMP%_rotate 1s linear infinite}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;inset:0;border-radius:50%;border:5px solid #fff;animation:_ngcontent-%COMP%_prixClipFix 2s linear infinite}.loader[_ngcontent-%COMP%]:after{border-color:#004953;animation:_ngcontent-%COMP%_prixClipFix 2s linear infinite,rotate .5s linear infinite reverse;inset:6px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_prixClipFix{0%{clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}25%{clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}50%{clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}75%{clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}to{clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}}']}),i})();function Wt(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(),n=t.MAs(4);return t.KtG(o.removeFile(n))}),t._uU(4,"\u2716"),t.qZA()(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.uploadFile())}),t._uU(6," Upload "),t.qZA()()}if(2&i){const r=t.oxw();t.xp6(2),t.hij(" Selected File: ",r.fileName," "),t.xp6(3),t.Q6J("disabled",!r.selectedFile)}}function te(i,a){if(1&i&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Oqu(r.uploadError)}}let ee=(()=>{const a=class{constructor(e,o){this.http=e,this.dashboardService=o,this.selectedFile=null,this.fileName="",this.uploadError="",this.csvFile=new t.vpe}onFileSelect(e){const o=e.target;o.files&&o.files.length>0&&(this.selectedFile=o.files[0],this.fileName=this.selectedFile.name,this.fileName.endsWith(".csv")?this.uploadError="":(this.uploadError="Please upload a valid CSV file.",this.selectedFile=null))}uploadFile(){if(!this.selectedFile)return;const e=new FormData;e.append("file",this.selectedFile),this.csvFile.emit(e)}removeFile(e){this.selectedFile=null,this.fileName="",this.uploadError="",e.value=""}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(O.eN),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-csv-uploader"]],outputs:{csvFile:"csvFile"},decls:7,vars:2,consts:[[1,"csv-upload-container"],["type","file","accept",".csv",1,"w-75",3,"change"],["fileInput",""],["class","file-info",4,"ngIf"],["class","error",4,"ngIf"],[1,"file-info"],[1,"remove-btn",3,"click"],[1,"upload-btn",3,"disabled","click"],[1,"error"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2,"\u062a\u062d\u0645\u064a\u0644 \u0645\u0644\u0641 CSV"),t.qZA(),t.TgZ(3,"input",1,2),t.NdJ("change",function(s){return n.onFileSelect(s)}),t.qZA(),t.YNc(5,Wt,7,2,"div",3),t.YNc(6,te,2,1,"div",4),t.qZA()),2&o&&(t.xp6(5),t.Q6J("ngIf",n.fileName),t.xp6(1),t.Q6J("ngIf",n.uploadError))},dependencies:[d.O5],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.csv-upload-container[_ngcontent-%COMP%]{margin-top:4px;color:#f3f4f6;display:flex;flex-direction:column;align-items:center;justify-content:center}.file-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#004953;padding:8px;border-radius:4px;margin-top:10px}.file-info[_ngcontent-%COMP%]   .upload-btn[_ngcontent-%COMP%]{background-color:#1f2937;color:#f3f4f6;padding:4px;border-radius:4px;border:none}.file-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:10px}.file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:#d9534f;font-size:18px;cursor:pointer}.file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{color:#b52b27}"]}),i})();function ne(i,a){1&i&&(t.TgZ(0,"div",8),t._UZ(1,"app-loader"),t.qZA())}const oe=function(){return["NAME","ADDRESS","CREATED_BY"]};let ie=(()=>{const a=class{constructor(e,o,n,l,s){this.dashboardService=e,this.translate=o,this.dialog=n,this.router=l,this.toaster=s,this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("ADDRESS"),this.translate.instant("CREATED_BY")],this.searchTerm="",this.myTableData=[],this.isloadign=!1}ngOnInit(){this.getschools()}getschools(e=""){this.isloadign=!0,this.dashboardService.getSchools(e).subscribe({next:o=>{this.isloadign=!1,this.myTableData=o.map(n=>({NAME:n.name,ADDRESS:n.address,CREATED_BY:n.created_by,NOTES:n.notes,ID:n.id}))},error:o=>{console.error("Error fetching schools:",o)}})}searchSchools(e){this.getschools(e)}openSchoolDialog(){this.dialog.open(G,{width:"500px"}).afterClosed().subscribe(o=>{o&&this.getschools()})}editSchool(e){this.dialog.open(G,{width:"500px",data:{name:e.NAME,address:e.ADDRESS,notes:e.NOTES,id:e.ID,event:"edit"}}).afterClosed().subscribe(n=>{n&&this.getschools()})}goToSchoolProfilePage(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/school",e]));window.open(o,"_blank")}schoolBulkUpLoad(e){this.dashboardService.uploadBulkSchool(e).subscribe(o=>{this.toaster.success(o.message)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(u.uw),t.Y36(m.F0),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-schools"]],decls:13,vars:11,consts:[[1,"school-container"],["class","loader-wrapper",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u062f\u0631\u0633\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"dialog-button","my-2",3,"click"],[3,"csvFile"],[3,"displayedColumns","data","editClicked","itemClicked"],[1,"loader-wrapper"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ne,2,0,"div",1),t.TgZ(5,"div",2)(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchTerm=s})("input",function(){return n.searchSchools(n.searchTerm)}),t.qZA(),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){return n.openSchoolDialog()}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"app-csv-uploader",6),t.NdJ("csvFile",function(s){return n.schoolBulkUpLoad(s)}),t.qZA()()(),t.TgZ(12,"app-data-table",7),t.NdJ("editClicked",function(s){return n.editSchool(s)})("itemClicked",function(s){return n.goToSchoolProfilePage(s.ID)}),t.qZA()()),2&o&&(t.xp6(2),t.hij("",t.lcZ(3,6,"SCHOOLS")," ... \u{1f3eb}"),t.xp6(2),t.Q6J("ngIf",n.isloadign),t.xp6(2),t.Q6J("ngModel",n.searchTerm),t.xp6(3),t.hij(" + ",t.lcZ(10,8,"ADD_SCHOOL")," "),t.xp6(3),t.Q6J("displayedColumns",t.DdM(10,oe))("data",n.myTableData))},dependencies:[d.O5,y,K,ee,c.Fj,c.JJ,c.On,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.school-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f3f4f6!important}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})();const ae=function(i){return{background:i}};function re(i,a){if(1&i&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",8),t._uU(7),t.qZA(),t.TgZ(8,"div",9),t._uU(9),t.qZA()(),t.TgZ(10,"div",10),t._uU(11),t.qZA()()()),2&i){const r=a.$implicit;t.Q6J("ngStyle",t.VKq(7,ae,r.gradient)),t.xp6(4),t.Oqu(t.lcZ(5,5,r.title)),t.xp6(3),t.Oqu(r.value),t.xp6(2),t.Oqu(r.subtext),t.xp6(2),t.hij(" ",r.icon," ")}}let le=(()=>{const a=class{constructor(e,o,n){this.dashboardService=e,this.translate=o,this.router=n,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.branch=JSON.parse(localStorage.getItem("branch")||"{}"),this.mainPageData={}}ngOnInit(){this.getStatstics()}getStatstics(){this.dashboardService.getStatistics(this.userInfo.branch?this.userInfo.branch:this.branch.id).subscribe(e=>{this.data=[{title:"TODAYS_SUBSCRIPTIONS_SALES",value:`US$ ${(e.todays_subscriptions_sales??0).toFixed(2)}`,subtext:`${this.translate.instant("TODAYS_SUBSCRIPTIONS_COUNT")} : ${e.todays_subscriptions_count??0}`,icon:"\u{1f3ab}",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{title:"TODAYS_CHILDREN_COUNT",value:e.todays_children_count??0,subtext:`${this.translate.instant("CHILDREN_COUNT_DIFF")} : ${e.children_count_difference_from_yesterday}`,icon:"\u{1f476}",gradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{title:"TODAYS_CAFE_SALES",value:`US$ ${(e.todays_cafe_sales??0).toFixed(2)}`,subtext:`${this.translate.instant("CAFE_SALES_DIFF")} : ${e.cafe_sales_difference_from_yesterday??0}`,icon:"\u2615",gradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{title:"TODAYS_KIDS_SALES",value:`US$ ${(e.todays_kids_sales??0).toFixed(2)}`,subtext:`${this.translate.instant("KIDS_SALES_DIFF")} : ${e.kids_sales_difference_from_yesterday??0}`,icon:"\u{1f9d2}",gradient:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},{title:"TODAYS_MONEY_UNBALANCE",value:`US$ ${e.todays_money_unbalance}`,subtext:"\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0645\u062a\u0648\u0627\u0632\u0646\u0629",icon:"\u{1f4c9}",gradient:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"},{title:"TODAYS_STAFF_WITHDRAWS_TOTAL",value:`US$ ${(e.todays_staff_withdraws_total??0).toFixed(2)}`,subtext:`${this.translate.instant("TODAYS_STAFF_REQUESTED_WITHDRAW_COUNT")} : ${e.todays_staff_requested_withdraw_count??0}`,icon:"\u{1f4bc}",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{title:"TODAYS_CASH",value:`US$ ${(e.todays_cash??0).toFixed(2)}`,subtext:`${this.translate.instant("CASH_PAYMENTS")}`,icon:"\u{1f4b5}",gradient:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"},{title:"TODAYS_VISA",value:`US$ ${(e.todays_visa??0).toFixed(2)}`,subtext:`${this.translate.instant("VISA_PAYMENTS")}`,icon:"\u{1f4b3}",gradient:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"},{title:"TODAYS_INSTAPAY",value:`US$ ${(e.todays_instapay??0).toFixed(2)}`,subtext:`${this.translate.instant("INSTAPAY_PAYMENTS")}`,icon:"\u{1f4f1}",gradient:"linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)"}]})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-main-page"]],decls:6,vars:4,consts:[[1,"main-page"],[1,"mb-5","mt-5"],[1,"widgets-container"],["class","widget-card",3,"ngStyle",4,"ngFor","ngForOf"],[1,"widget-card",3,"ngStyle"],[1,"widget-content","d-flex","align-items-center","justify-content-between","p-3"],[1,"widget-info"],[1,"fw-bold","widget-title"],[1,"fw-bold","widget-value"],[1,"small","widget-subtext"],[1,"icon-circle","mb-2","d-flex","align-items-center","justify-content-center"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,re,12,9,"div",3),t.qZA()()),2&o&&(t.xp6(2),t.hij("",t.lcZ(3,2,"DASHBOARD")," ... \u{1f4ca}"),t.xp6(3),t.Q6J("ngForOf",n.data))},dependencies:[d.sg,d.PC,p.X$],styles:['body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.main-page[_ngcontent-%COMP%]{color:#f3f4f6}.main-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:2rem}.widgets-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;max-width:1200px;margin:0 auto;padding:0 15px}.widget-card[_ngcontent-%COMP%]{border-radius:16px;color:#fff;min-height:130px;box-shadow:0 8px 25px #00000026,0 2px 10px #0000001a;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;border:none}.widget-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 15px 35px #0003,0 5px 15px #00000026}.widget-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.widget-card[_ngcontent-%COMP%]:hover:before{left:100%}.widget-content[_ngcontent-%COMP%]{position:relative;z-index:1;height:100%}.widget-info[_ngcontent-%COMP%]{flex:1}.widget-title[_ngcontent-%COMP%]{font-size:.7rem;margin-bottom:8px;opacity:.95;text-transform:uppercase;letter-spacing:.5px;font-weight:500}.widget-value[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:4px;font-weight:700;text-shadow:0 2px 4px rgba(0,0,0,.2)}.widget-subtext[_ngcontent-%COMP%]{opacity:.9;font-size:.7rem;font-weight:400}.icon-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:28px;background:rgba(255,255,255,.2);box-shadow:0 4px 15px #0000001a,inset 0 1px #ffffff4d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}@media (min-width: 768px){.widgets-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}}@media (min-width: 992px){.widgets-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 1200px){.widgets-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);gap:24px}.widget-card[_ngcontent-%COMP%]{min-height:150px}.widget-value[_ngcontent-%COMP%]{font-size:1.5rem}.icon-circle[_ngcontent-%COMP%]{width:70px;height:70px;font-size:32px}}']}),i})(),se=(()=>{const a=class{};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-staff"]],decls:48,vars:0,consts:[[1,"main_wrapper","w-100"],[1,"main"],[1,"antenna"],[1,"antenna_shadow"],[1,"a1"],[1,"a1d"],[1,"a2"],[1,"a2d"],[1,"a_base"],[1,"tv"],[1,"cruve"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 189.929 189.929",0,"xml","space","preserve",1,"curve_svg"],["d","M70.343,70.343c-30.554,30.553-44.806,72.7-39.102,115.635l-29.738,3.951C-5.442,137.659,11.917,86.34,49.129,49.13\n        C86.34,11.918,137.664-5.445,189.928,1.502l-3.95,29.738C143.041,25.54,100.895,39.789,70.343,70.343z"],[1,"display_div"],[1,"screen_out"],[1,"screen_out1"],[1,"screen"],[1,"notfound_text"],[1,"screenM"],[1,"lines"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"buttons_div"],[1,"b1"],[1,"b2"],[1,"speakers"],[1,"g1"],[1,"g11"],[1,"g12"],[1,"g13"],[1,"g"],[1,"bottom"],[1,"base1"],[1,"base2"],[1,"base3"],[1,"text_404"],[1,"text_4041"],[1,"text_4042"],[1,"text_4043"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.qZA(),t.TgZ(9,"div",9)(10,"div",10),t.O4$(),t.TgZ(11,"svg",11),t._UZ(12,"path",12),t.qZA()(),t.kcU(),t.TgZ(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16)(17,"span",17),t._uU(18," NOT FOUND"),t.qZA()(),t.TgZ(19,"div",18)(20,"span",17),t._uU(21," NOT FOUND"),t.qZA()()()()(),t.TgZ(22,"div",19),t._UZ(23,"div",20)(24,"div",21)(25,"div",22),t.qZA(),t.TgZ(26,"div",23)(27,"div",24),t._UZ(28,"div"),t.qZA(),t._UZ(29,"div",25),t.TgZ(30,"div",26)(31,"div",27),t._UZ(32,"div",28)(33,"div",29)(34,"div",30),t.qZA(),t._UZ(35,"div",31)(36,"div",31),t.qZA()()(),t.TgZ(37,"div",32),t._UZ(38,"div",33)(39,"div",34)(40,"div",35),t.qZA()(),t.TgZ(41,"div",36)(42,"div",37),t._uU(43,"4"),t.qZA(),t.TgZ(44,"div",38),t._uU(45,"0"),t.qZA(),t.TgZ(46,"div",39),t._uU(47,"4"),t.qZA()()())},styles:['.main_wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:45em;height:45em}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:7.5em}.antenna[_ngcontent-%COMP%]{width:7.5em;height:7.5em;border-radius:50%;border:3px solid black;background-color:#f27405;margin-bottom:-9em;margin-left:0;z-index:-1}.antenna_shadow[_ngcontent-%COMP%]{position:absolute;background-color:transparent;width:75px;height:84px;margin-left:2.52em;border-radius:45%;transform:rotate(140deg);border:6px solid transparent;box-shadow:inset 0 24px #a85103,inset 0 24px 1px 1px #a85103;-moz-box-shadow:inset 0px 24px #a85103,inset 0px 24px 1px 1px #a85103}.antenna[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:-14.1em;margin-left:.6em;transform:rotate(-25deg);width:1.5em;height:.75em;border-radius:50%;background-color:#f69e50}.antenna[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:.3em;margin-left:1.875em;transform:rotate(-20deg);width:2.25em;height:1.2em;border-radius:50%;background-color:#f69e50}.a1[_ngcontent-%COMP%]{position:relative;top:-102%;left:-130%;width:18em;height:8.25em;border-radius:75px;background-image:linear-gradient(#171717,#171717,#353535,#353535,#171717);transform:rotate(-29deg);clip-path:polygon(50% 0%,49% 100%,52% 100%)}.a1d[_ngcontent-%COMP%]{position:relative;top:-211%;left:-35%;transform:rotate(45deg);width:.75em;height:.75em;border-radius:50%;border:3px solid black;background-color:#979797;z-index:99}.a2[_ngcontent-%COMP%]{position:relative;top:-210%;left:-10%;width:18em;height:6em;border-radius:75px;background-color:#171717;background-image:linear-gradient(#171717,#171717,#353535,#353535,#171717);margin-right:7.5em;clip-path:polygon(47% 0,47% 0,34% 34%,54% 25%,32% 100%,29% 96%,49% 32%,30% 38%);transform:rotate(-8deg)}.a2d[_ngcontent-%COMP%]{position:relative;top:-294%;left:94%;width:.75em;height:.75em;border-radius:50%;border:3px solid black;background-color:#979797;z-index:99}.notfound_text[_ngcontent-%COMP%]{background-color:#000;padding-left:.45em;padding-right:.45em;font-size:1.125em;color:#fff;letter-spacing:0;border-radius:7.5px;z-index:10}.tv[_ngcontent-%COMP%]{width:25.5em;height:13.5em;margin-top:4.5em;border-radius:22.5px;background-color:#d36604;display:flex;justify-content:center;border:3px solid #1d0e01;box-shadow:inset .3em .3em #e69635}.tv[_ngcontent-%COMP%]:after{content:"";position:absolute;width:25.5em;height:13.5em;border-radius:22.5px;background:repeating-radial-gradient(#d36604 0 .0001%,rgba(0,0,0,.4392156863) 0 .0002%) 50% 0/3750px 3750px,repeating-conic-gradient(#d36604 0 .0001%,rgba(0,0,0,.4392156863) 0 .0002%) 60% 60%/3750px 3750px;background-blend-mode:difference;opacity:.09}.curve_svg[_ngcontent-%COMP%]{position:absolute;margin-top:.375em;margin-left:-.375em;height:18px;width:18px}.display_div[_ngcontent-%COMP%]{display:flex;align-items:center;align-self:center;justify-content:center;border-radius:22.5px;box-shadow:5.25px 5.25px #e69635}.screen_out[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:15px}.screen_out1[_ngcontent-%COMP%]{width:16.5em;height:11.625em;display:flex;align-items:center;justify-content:center;border-radius:15px}.screen[_ngcontent-%COMP%]{width:18.5em;height:10em;font-family:Montserrat;border:3px solid #1d0e01;background:repeating-radial-gradient(#000 0 .0001%,#ffffff 0 .0002%) 50% 0/3750px 3750px,repeating-conic-gradient(#000 0 .0001%,#ffffff 0 .0002%) 60% 60%/3750px 3750px;background-blend-mode:difference;animation:_ngcontent-%COMP%_b .2s infinite alternate;border-radius:15px;z-index:99;display:flex;align-items:center;justify-content:center;font-weight:700;color:#252525;letter-spacing:.225em;text-align:center;font-size:1.2em}.screenM[_ngcontent-%COMP%]{width:19.5em;height:11.775em;position:relative;font-family:Montserrat;background:linear-gradient(to right,#002fc6 0%,#002bb2 14.2857142857%,#3a3a3a 14.2857142857%,#303030 28.5714285714%,#ff0afe 28.5714285714%,#f500f4 42.8571428571%,#6c6c6c 42.8571428571%,#626262 57.1428571429%,#0affd9 57.1428571429%,#00f5ce 71.4285714286%,#3a3a3a 71.4285714286%,#303030 85.7142857143%,white 85.7142857143%,#fafafa 100%);border-radius:15px;border:3px solid black;z-index:99;display:flex;align-items:center;justify-content:center;font-weight:700;color:#252525;letter-spacing:.225em;text-align:center;font-size:1.2em;overflow:hidden}.screenM[_ngcontent-%COMP%]:before, .screenM[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;z-index:1;width:100%}.screenM[_ngcontent-%COMP%]:before{top:0;height:68.4782608696%;background:linear-gradient(to right,white 0%,#fafafa 14.2857142857%,#ffe60a 14.2857142857%,#f5dc00 28.5714285714%,#0affd9 28.5714285714%,#00f5ce 42.8571428571%,#10ea00 42.8571428571%,#0ed600 57.1428571429%,#ff0afe 57.1428571429%,#f500f4 71.4285714286%,#ed0014 71.4285714286%,#d90012 85.7142857143%,#002fc6 85.7142857143%,#002bb2 100%)}.screenM[_ngcontent-%COMP%]:after{bottom:0;height:21.7391304348%;background:linear-gradient(to right,#006c6b 0%,#005857 16.6666666667%,white 16.6666666667%,#fafafa 33.3333333333%,#001b75 33.3333333333%,#001761 50%,#6c6c6c 50%,#626262 66.6666666667%,#929292 66.6666666667%,#888888 83.3333333333%,#3a3a3a 83.3333333333%,#303030 100%)}@keyframes _ngcontent-%COMP%_b{to{background-position:50% 0,60% 50%}}.lines[_ngcontent-%COMP%]{display:flex;column-gap:.15em;align-self:flex-end}.line1[_ngcontent-%COMP%], .line3[_ngcontent-%COMP%]{width:3px;height:.75em;background-color:#000;border-radius:37.5px 37.5px 0 0;margin-top:.75em}.line2[_ngcontent-%COMP%]{flex-grow:1;width:3px;height:1.5em;background-color:#000;border-radius:37.5px 37.5px 0 0}.buttons_div[_ngcontent-%COMP%]{width:6.375em;align-self:center;height:12em;background-color:#e69635;border:3px solid #1d0e01;padding:.9em;border-radius:15px;display:flex;align-items:center;justify-content:center;flex-direction:column;row-gap:1.125em;box-shadow:4.5px 4.5px #e69635}.b1[_ngcontent-%COMP%]{width:2.475em;height:2.475em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 3px 3px 1.5px #b49577,-3px 0 #513721,-3px 0 0 1.5px #000}.b1[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:1.5em;margin-left:.75em;transform:rotate(47deg);border-radius:7.5px;width:.15em;height:.6em;background-color:#000}.b1[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:1.35em;margin-left:1.2em;transform:rotate(47deg);border-radius:7.5px;width:.15em;height:.825em;background-color:#000}.b1[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{content:"";position:absolute;margin-top:-.15em;margin-left:.975em;transform:rotate(45deg);width:.225em;height:2.25em;background-color:#000}.b2[_ngcontent-%COMP%]{width:2.475em;height:2.475em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 3px 3px 1.5px #b49577,-3px 0 #513721,-3px 0 0 1.5px #000}.b2[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:1.575em;margin-left:1.2em;transform:rotate(-45deg);border-radius:7.5px;width:.225em;height:.6em;background-color:#000}.b2[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:-.15em;margin-left:.975em;transform:rotate(-45deg);width:.225em;height:2.25em;background-color:#000}.speakers[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:.75em}.speakers[_ngcontent-%COMP%]   .g1[_ngcontent-%COMP%]{display:flex;column-gap:.375em}.speakers[_ngcontent-%COMP%]   .g1[_ngcontent-%COMP%]   .g11[_ngcontent-%COMP%], .g12[_ngcontent-%COMP%], .g13[_ngcontent-%COMP%]{width:.975em;height:.975em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 1.875px 1.875px 1.5px #b49577}.speakers[_ngcontent-%COMP%]   .g[_ngcontent-%COMP%]{width:auto;height:3px;background-color:#171717}.bottom[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;align-items:center;justify-content:center;column-gap:13.05em}.base1[_ngcontent-%COMP%], .base2[_ngcontent-%COMP%]{height:1.5em;width:3em;border:3px solid #171717;background-color:#4d4d4d;margin-top:-.225em;z-index:-1}.base3[_ngcontent-%COMP%]{position:absolute;height:.225em;width:26.25em;background-color:#171717;margin-top:1.2em}.text_404[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;column-gap:9em;z-index:-5;margin-bottom:3em;align-items:center;justify-content:center;opacity:.5;font-family:Montserrat}.text_4041[_ngcontent-%COMP%], .text_4042[_ngcontent-%COMP%], .text_4043[_ngcontent-%COMP%]{transform:scaleY(36.75) scaleX(13.5)}@media only screen and (max-width: 495px){.text_404[_ngcontent-%COMP%]{column-gap:9em}}@media only screen and (max-width: 395px){.text_404[_ngcontent-%COMP%]{column-gap:6em}.text_4041[_ngcontent-%COMP%], .text_4042[_ngcontent-%COMP%], .text_4043[_ngcontent-%COMP%]{transform:scaleY(37.5) scaleX(12)}}@media (max-width: 275px),(max-height: 520px){.main[_ngcontent-%COMP%]{position:relative}}@media only screen and (max-width: 1024px){.screenM[_ngcontent-%COMP%]{display:flex}.screen[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width: 1025px){.screen[_ngcontent-%COMP%]{display:flex}.screenM[_ngcontent-%COMP%]{display:none}}']}),i})();var S=g(4385);function ce(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.clearSelection())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function de(i,a){if(1&i&&(t.TgZ(0,"mat-option",5),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",r.name," ")}}let T=(()=>{const a=class{constructor(e){this.sharedService=e,this.selectedBranchesChange=new t.vpe,this.options=[],this.selectedValues=[]}ngOnInit(){this.selectedValues=["all"],this.getAllBranches()}onSelectionChange(e){0==this.selectedValues.length?(this.selectedValues=["all"],this.selectedBranchesChange.emit(this.selectedValues)):this.selectedValues=e.value,this.selectedBranchesChange.emit(this.selectedValues)}clearSelection(){this.selectedValues=["all"],this.selectedBranchesChange.emit(this.selectedValues)}getAllBranches(){this.sharedService.getBranches().subscribe(e=>{this.options=e})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(k))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-branch-multi-select"]],outputs:{selectedBranchesChange:"selectedBranchesChange"},decls:6,vars:4,consts:[["appearance","fill",1,"branch-dropdown"],["mat-icon-button","","matSuffix","","aria-label","Clear",3,"click",4,"ngIf"],[3,"multiple","value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","","aria-label","Clear",3,"click"],[3,"value"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-form-field",0),t.YNc(1,ce,3,0,"button",1),t.TgZ(2,"mat-label"),t._uU(3,"\u0627\u062e\u062a\u0631 \u0641\u0631\u0639 ... \u{1f3f0}"),t.qZA(),t.TgZ(4,"mat-select",2),t.NdJ("valueChange",function(s){return n.selectedValues=s})("selectionChange",function(s){return n.onSelectionChange(s)}),t.YNc(5,de,2,2,"mat-option",3),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("ngIf","all"!==n.selectedValues[0]),t.xp6(3),t.Q6J("multiple",!0)("value",n.selectedValues),t.xp6(1),t.Q6J("ngForOf",n.options))},dependencies:[d.sg,d.O5,v.Hw,I.ey,f.KE,f.hX,f.R9,S.gD,C.RK],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.branch-dropdown[_ngcontent-%COMP%]{width:100%;min-width:400px}.branch-dropdown[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{margin-left:4px;color:#888}.branch-dropdown[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{color:#f44336}  .mat-primary .mat-pseudo-checkbox-checked.mat-pseudo-checkbox-full, .mat-primary[_ngcontent-%COMP%]   .mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-full[_ngcontent-%COMP%]{background-color:#004953}"]}),i})();function pe(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",4),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(n.searchTerm,o))}),t.qZA()}}const ge=function(){return["NAME","PHONE_NUMBERS","BRANCH","STATUS","ROLE"]};let ue=(()=>{const a=class{constructor(e,o,n){this.dashboardService=e,this.translate=o,this.router=n,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("PHONE_NUMBERS"),this.translate.instant("BRANCH"),this.translate.instant("STATUS"),this.translate.instant("ROLE")],this.searchTerm="",this.tableData=[],this.isLoading=!1,this.totalUsers=0,this.currentPage=1,this.pageSize=10}ngOnInit(){this.getUsers()}getUsers(e="",o=[],n=1){this.isLoading=!0,this.dashboardService.getUsers(e,o,n).subscribe({next:l=>{this.isLoading=!1,this.tableData=l.results.map(s=>({NAME:s.username,PHONE_NUMBERS:s.phone_number,BRANCH:s.branch,STATUS:s.is_active?"\u2705":"\u274c",ROLE:s.role,ID:s.id})),this.totalUsers=l.count,this.currentPage=n},error:l=>{console.error("Error fetching users:",l),this.isLoading=!1}})}searchUsers(e){this.getUsers(e,this.selectedBranch,1)}onBranchSelectionChange(e,o){this.selectedBranch=o,this.getUsers(e,o,1)}goToProfilePage(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/user",e]));window.open(o,"_blank")}onPageChange(e){this.getUsers(this.searchTerm,this.selectedBranch,e)}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-user"]],decls:8,vars:10,consts:[[1,"d-flex","flex-column","justify-content-between","align-items-start"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0633\u062a\u062e\u062f\u0645... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[3,"selectedBranchesChange",4,"ngIf"],[3,"displayedColumns","data","paginationType","totalItems","itemClicked","pageChange"],[3,"selectedBranchesChange"]],template:function(o,n){1&o&&(t.TgZ(0,"h1"),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",0)(4,"input",1),t.NdJ("ngModelChange",function(s){return n.searchTerm=s})("input",function(){return n.searchUsers(n.searchTerm)}),t.qZA(),t.YNc(5,pe,1,0,"app-branch-multi-select",2),t.qZA(),t.TgZ(6,"div")(7,"app-data-table",3),t.NdJ("itemClicked",function(s){return n.goToProfilePage(s.ID)})("pageChange",function(s){return n.onPageChange(s)}),t.qZA()()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,7,"USER")," ... \u{1f9d1}\u200d\u{1f4bc}"),t.xp6(3),t.Q6J("ngModel",n.searchTerm),t.xp6(1),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(2),t.Q6J("displayedColumns",t.DdM(9,ge))("data",n.tableData)("paginationType","server")("totalItems",n.totalUsers))},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}h1[_ngcontent-%COMP%]{color:#f3f4f6!important}.school-container[_ngcontent-%COMP%]   .loader-wrapper[_ngcontent-%COMP%]{margin:auto}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})(),he=(()=>{const a=class{};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-sales"]],decls:48,vars:0,consts:[[1,"main_wrapper","w-100"],[1,"main"],[1,"antenna"],[1,"antenna_shadow"],[1,"a1"],[1,"a1d"],[1,"a2"],[1,"a2d"],[1,"a_base"],[1,"tv"],[1,"cruve"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 189.929 189.929",0,"xml","space","preserve",1,"curve_svg"],["d","M70.343,70.343c-30.554,30.553-44.806,72.7-39.102,115.635l-29.738,3.951C-5.442,137.659,11.917,86.34,49.129,49.13\n        C86.34,11.918,137.664-5.445,189.928,1.502l-3.95,29.738C143.041,25.54,100.895,39.789,70.343,70.343z"],[1,"display_div"],[1,"screen_out"],[1,"screen_out1"],[1,"screen"],[1,"notfound_text"],[1,"screenM"],[1,"lines"],[1,"line1"],[1,"line2"],[1,"line3"],[1,"buttons_div"],[1,"b1"],[1,"b2"],[1,"speakers"],[1,"g1"],[1,"g11"],[1,"g12"],[1,"g13"],[1,"g"],[1,"bottom"],[1,"base1"],[1,"base2"],[1,"base3"],[1,"text_404"],[1,"text_4041"],[1,"text_4042"],[1,"text_4043"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.qZA(),t.TgZ(9,"div",9)(10,"div",10),t.O4$(),t.TgZ(11,"svg",11),t._UZ(12,"path",12),t.qZA()(),t.kcU(),t.TgZ(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16)(17,"span",17),t._uU(18," NOT FOUND"),t.qZA()(),t.TgZ(19,"div",18)(20,"span",17),t._uU(21," NOT FOUND"),t.qZA()()()()(),t.TgZ(22,"div",19),t._UZ(23,"div",20)(24,"div",21)(25,"div",22),t.qZA(),t.TgZ(26,"div",23)(27,"div",24),t._UZ(28,"div"),t.qZA(),t._UZ(29,"div",25),t.TgZ(30,"div",26)(31,"div",27),t._UZ(32,"div",28)(33,"div",29)(34,"div",30),t.qZA(),t._UZ(35,"div",31)(36,"div",31),t.qZA()()(),t.TgZ(37,"div",32),t._UZ(38,"div",33)(39,"div",34)(40,"div",35),t.qZA()(),t.TgZ(41,"div",36)(42,"div",37),t._uU(43,"4"),t.qZA(),t.TgZ(44,"div",38),t._uU(45,"0"),t.qZA(),t.TgZ(46,"div",39),t._uU(47,"4"),t.qZA()()())},styles:['.main_wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:45em;height:45em}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:7.5em}.antenna[_ngcontent-%COMP%]{width:7.5em;height:7.5em;border-radius:50%;border:3px solid black;background-color:#f27405;margin-bottom:-9em;margin-left:0;z-index:-1}.antenna_shadow[_ngcontent-%COMP%]{position:absolute;background-color:transparent;width:75px;height:84px;margin-left:2.52em;border-radius:45%;transform:rotate(140deg);border:6px solid transparent;box-shadow:inset 0 24px #a85103,inset 0 24px 1px 1px #a85103;-moz-box-shadow:inset 0px 24px #a85103,inset 0px 24px 1px 1px #a85103}.antenna[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:-14.1em;margin-left:.6em;transform:rotate(-25deg);width:1.5em;height:.75em;border-radius:50%;background-color:#f69e50}.antenna[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:.3em;margin-left:1.875em;transform:rotate(-20deg);width:2.25em;height:1.2em;border-radius:50%;background-color:#f69e50}.a1[_ngcontent-%COMP%]{position:relative;top:-102%;left:-130%;width:18em;height:8.25em;border-radius:75px;background-image:linear-gradient(#171717,#171717,#353535,#353535,#171717);transform:rotate(-29deg);clip-path:polygon(50% 0%,49% 100%,52% 100%)}.a1d[_ngcontent-%COMP%]{position:relative;top:-211%;left:-35%;transform:rotate(45deg);width:.75em;height:.75em;border-radius:50%;border:3px solid black;background-color:#979797;z-index:99}.a2[_ngcontent-%COMP%]{position:relative;top:-210%;left:-10%;width:18em;height:6em;border-radius:75px;background-color:#171717;background-image:linear-gradient(#171717,#171717,#353535,#353535,#171717);margin-right:7.5em;clip-path:polygon(47% 0,47% 0,34% 34%,54% 25%,32% 100%,29% 96%,49% 32%,30% 38%);transform:rotate(-8deg)}.a2d[_ngcontent-%COMP%]{position:relative;top:-294%;left:94%;width:.75em;height:.75em;border-radius:50%;border:3px solid black;background-color:#979797;z-index:99}.notfound_text[_ngcontent-%COMP%]{background-color:#000;padding-left:.45em;padding-right:.45em;font-size:1.125em;color:#fff;letter-spacing:0;border-radius:7.5px;z-index:10}.tv[_ngcontent-%COMP%]{width:25.5em;height:13.5em;margin-top:4.5em;border-radius:22.5px;background-color:#d36604;display:flex;justify-content:center;border:3px solid #1d0e01;box-shadow:inset .3em .3em #e69635}.tv[_ngcontent-%COMP%]:after{content:"";position:absolute;width:25.5em;height:13.5em;border-radius:22.5px;background:repeating-radial-gradient(#d36604 0 .0001%,rgba(0,0,0,.4392156863) 0 .0002%) 50% 0/3750px 3750px,repeating-conic-gradient(#d36604 0 .0001%,rgba(0,0,0,.4392156863) 0 .0002%) 60% 60%/3750px 3750px;background-blend-mode:difference;opacity:.09}.curve_svg[_ngcontent-%COMP%]{position:absolute;margin-top:.375em;margin-left:-.375em;height:18px;width:18px}.display_div[_ngcontent-%COMP%]{display:flex;align-items:center;align-self:center;justify-content:center;border-radius:22.5px;box-shadow:5.25px 5.25px #e69635}.screen_out[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:15px}.screen_out1[_ngcontent-%COMP%]{width:16.5em;height:11.625em;display:flex;align-items:center;justify-content:center;border-radius:15px}.screen[_ngcontent-%COMP%]{width:18.5em;height:10em;font-family:Montserrat;border:3px solid #1d0e01;background:repeating-radial-gradient(#000 0 .0001%,#ffffff 0 .0002%) 50% 0/3750px 3750px,repeating-conic-gradient(#000 0 .0001%,#ffffff 0 .0002%) 60% 60%/3750px 3750px;background-blend-mode:difference;animation:_ngcontent-%COMP%_b .2s infinite alternate;border-radius:15px;z-index:99;display:flex;align-items:center;justify-content:center;font-weight:700;color:#252525;letter-spacing:.225em;text-align:center;font-size:1.2em}.screenM[_ngcontent-%COMP%]{width:19.5em;height:11.775em;position:relative;font-family:Montserrat;background:linear-gradient(to right,#002fc6 0%,#002bb2 14.2857142857%,#3a3a3a 14.2857142857%,#303030 28.5714285714%,#ff0afe 28.5714285714%,#f500f4 42.8571428571%,#6c6c6c 42.8571428571%,#626262 57.1428571429%,#0affd9 57.1428571429%,#00f5ce 71.4285714286%,#3a3a3a 71.4285714286%,#303030 85.7142857143%,white 85.7142857143%,#fafafa 100%);border-radius:15px;border:3px solid black;z-index:99;display:flex;align-items:center;justify-content:center;font-weight:700;color:#252525;letter-spacing:.225em;text-align:center;font-size:1.2em;overflow:hidden}.screenM[_ngcontent-%COMP%]:before, .screenM[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;z-index:1;width:100%}.screenM[_ngcontent-%COMP%]:before{top:0;height:68.4782608696%;background:linear-gradient(to right,white 0%,#fafafa 14.2857142857%,#ffe60a 14.2857142857%,#f5dc00 28.5714285714%,#0affd9 28.5714285714%,#00f5ce 42.8571428571%,#10ea00 42.8571428571%,#0ed600 57.1428571429%,#ff0afe 57.1428571429%,#f500f4 71.4285714286%,#ed0014 71.4285714286%,#d90012 85.7142857143%,#002fc6 85.7142857143%,#002bb2 100%)}.screenM[_ngcontent-%COMP%]:after{bottom:0;height:21.7391304348%;background:linear-gradient(to right,#006c6b 0%,#005857 16.6666666667%,white 16.6666666667%,#fafafa 33.3333333333%,#001b75 33.3333333333%,#001761 50%,#6c6c6c 50%,#626262 66.6666666667%,#929292 66.6666666667%,#888888 83.3333333333%,#3a3a3a 83.3333333333%,#303030 100%)}@keyframes _ngcontent-%COMP%_b{to{background-position:50% 0,60% 50%}}.lines[_ngcontent-%COMP%]{display:flex;column-gap:.15em;align-self:flex-end}.line1[_ngcontent-%COMP%], .line3[_ngcontent-%COMP%]{width:3px;height:.75em;background-color:#000;border-radius:37.5px 37.5px 0 0;margin-top:.75em}.line2[_ngcontent-%COMP%]{flex-grow:1;width:3px;height:1.5em;background-color:#000;border-radius:37.5px 37.5px 0 0}.buttons_div[_ngcontent-%COMP%]{width:6.375em;align-self:center;height:12em;background-color:#e69635;border:3px solid #1d0e01;padding:.9em;border-radius:15px;display:flex;align-items:center;justify-content:center;flex-direction:column;row-gap:1.125em;box-shadow:4.5px 4.5px #e69635}.b1[_ngcontent-%COMP%]{width:2.475em;height:2.475em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 3px 3px 1.5px #b49577,-3px 0 #513721,-3px 0 0 1.5px #000}.b1[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:1.5em;margin-left:.75em;transform:rotate(47deg);border-radius:7.5px;width:.15em;height:.6em;background-color:#000}.b1[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:1.35em;margin-left:1.2em;transform:rotate(47deg);border-radius:7.5px;width:.15em;height:.825em;background-color:#000}.b1[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{content:"";position:absolute;margin-top:-.15em;margin-left:.975em;transform:rotate(45deg);width:.225em;height:2.25em;background-color:#000}.b2[_ngcontent-%COMP%]{width:2.475em;height:2.475em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 3px 3px 1.5px #b49577,-3px 0 #513721,-3px 0 0 1.5px #000}.b2[_ngcontent-%COMP%]:before{content:"";position:absolute;margin-top:1.575em;margin-left:1.2em;transform:rotate(-45deg);border-radius:7.5px;width:.225em;height:.6em;background-color:#000}.b2[_ngcontent-%COMP%]:after{content:"";position:absolute;margin-top:-.15em;margin-left:.975em;transform:rotate(-45deg);width:.225em;height:2.25em;background-color:#000}.speakers[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:.75em}.speakers[_ngcontent-%COMP%]   .g1[_ngcontent-%COMP%]{display:flex;column-gap:.375em}.speakers[_ngcontent-%COMP%]   .g1[_ngcontent-%COMP%]   .g11[_ngcontent-%COMP%], .g12[_ngcontent-%COMP%], .g13[_ngcontent-%COMP%]{width:.975em;height:.975em;border-radius:50%;background-color:#7f5934;border:3px solid black;box-shadow:inset 1.875px 1.875px 1.5px #b49577}.speakers[_ngcontent-%COMP%]   .g[_ngcontent-%COMP%]{width:auto;height:3px;background-color:#171717}.bottom[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;align-items:center;justify-content:center;column-gap:13.05em}.base1[_ngcontent-%COMP%], .base2[_ngcontent-%COMP%]{height:1.5em;width:3em;border:3px solid #171717;background-color:#4d4d4d;margin-top:-.225em;z-index:-1}.base3[_ngcontent-%COMP%]{position:absolute;height:.225em;width:26.25em;background-color:#171717;margin-top:1.2em}.text_404[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:row;column-gap:9em;z-index:-5;margin-bottom:3em;align-items:center;justify-content:center;opacity:.5;font-family:Montserrat}.text_4041[_ngcontent-%COMP%], .text_4042[_ngcontent-%COMP%], .text_4043[_ngcontent-%COMP%]{transform:scaleY(36.75) scaleX(13.5)}@media only screen and (max-width: 495px){.text_404[_ngcontent-%COMP%]{column-gap:9em}}@media only screen and (max-width: 395px){.text_404[_ngcontent-%COMP%]{column-gap:6em}.text_4041[_ngcontent-%COMP%], .text_4042[_ngcontent-%COMP%], .text_4043[_ngcontent-%COMP%]{transform:scaleY(37.5) scaleX(12)}}@media (max-width: 275px),(max-height: 520px){.main[_ngcontent-%COMP%]{position:relative}}@media only screen and (max-width: 1024px){.screenM[_ngcontent-%COMP%]{display:flex}.screen[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width: 1025px){.screen[_ngcontent-%COMP%]{display:flex}.screenM[_ngcontent-%COMP%]{display:none}}']}),i})();var B=g(3805);function _e(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function fe(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function me(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function be(i,a){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.Q6J("value",r),t.xp6(1),t.hij(" ",r.name," ")}}function Ce(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function xe(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().index,n=t.oxw();return t.KtG(n.removePhone(o))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function Oe(i,a){if(1&i&&(t.TgZ(0,"div",29)(1,"mat-form-field",30)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",31),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"mat-form-field",32)(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"mat-select",33)(12,"mat-option",34),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"mat-option",35),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",36),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"mat-option",37),t._uU(22),t.ALo(23,"translate"),t.qZA()()(),t.YNc(24,xe,3,0,"button",38),t.qZA()),2&i){const r=a.index,e=t.oxw();t.Q6J("formGroupName",r),t.xp6(3),t.Oqu(t.lcZ(4,9,"PHONE_NUMBER")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,11,"PHONE_NUMBER")),t.xp6(4),t.Oqu(t.lcZ(10,13,"RELATIONSHIP")),t.xp6(4),t.Oqu(t.lcZ(14,15,"FATHER")),t.xp6(3),t.Oqu(t.lcZ(17,17,"MOTHER")),t.xp6(3),t.Oqu(t.lcZ(20,19,"SIBLING")),t.xp6(3),t.Oqu(t.lcZ(23,21,"OTHER")),t.xp6(2),t.Q6J("ngIf",e.phoneNumbers.length>1)}}let X=(()=>{const a=class{constructor(e,o,n,l,s){this.fb=e,this.dialogRef=o,this.dashboardService=n,this.toaster=l,this.data=s,this.filteredSchools=[],this.schools=[],this.isUpdateMode=!1,this.childForm=this.fb.group({name:["",c.kI.required],birth_date:["",c.kI.required],address:["",c.kI.required],notes:[""],school:[null],child_phone_numbers_set:this.fb.array([this.createPhoneGroup()])})}ngOnInit(){this.getSchools(),this.data&&(this.isUpdateMode=!0,this.patchChildData(this.data.childData))}get phoneNumbers(){return this.childForm.get("child_phone_numbers_set")}createPhoneGroup(){return this.fb.group({value:["",c.kI.required],relationship:["father",c.kI.required]})}addPhone(e=null){const o=this.fb.group({value:[e?.phone_number||"",c.kI.required],relationship:[e?.relationship||"father",c.kI.required]});this.phoneNumbers.push(o)}removePhone(e){this.phoneNumbers.length>1&&this.phoneNumbers.removeAt(e)}displaySchool(e){return e&&e.name?e.name:""}patchChildData(e){this.childForm.patchValue({name:e.name,birth_date:new Date(e.birth_date),address:e.address,notes:e.notes,school:e.school&&this.schools.find(o=>o.id===e.school_id)||null}),this.phoneNumbers.clear(),e.child_phone_numbers_set?.length?e.child_phone_numbers_set.forEach(o=>this.addPhone({phone_number:o.phone_number,relationship:o.relationship})):this.addPhone()}onSubmit(){const e=this.childForm.value,o={...e,birth_date:this.formatDate(e.birth_date),school:e.school?e.school.id:null,child_phone_numbers_set:e.child_phone_numbers_set.map(n=>({phone_number:{value:n.value},relationship:n.relationship}))};this.isUpdateMode?(o.id=this.data.childData.id,this.dashboardService.updateChild(this.data.childData.id,o).subscribe({next:n=>{this.toaster.success(n.message),this.dialogRef.close(!0)},error:n=>{console.error("Update Error:",n),this.toaster.error("Failed to update child")}})):this.dashboardService.createChild(o).subscribe({next:n=>{this.toaster.success(n.message),this.dialogRef.close(!0)},error:n=>{console.error("Create Error:",n),this.toaster.error("Failed to create child")}})}formatDate(e){if(!e)return"";const o=new Date(e);return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`}onClose(){this.dialogRef.close()}getSchools(){this.dashboardService.getSchools().subscribe(e=>{this.schools=e,this.filteredSchools=e,this.data.childData&&(this.isUpdateMode=!0,this.patchChildData(this.data.childData))})}filterSchools(e){const o=e.target.value.toLowerCase();this.filteredSchools=this.schools.filter(n=>n.name.toLowerCase().includes(o))}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(u.so),t.Y36(x),t.Y36(P._W),t.Y36(u.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-child-dialog"]],decls:67,vars:53,consts:[[1,"dialog-container","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"dialog-header","m-0"],["mat-icon-button","","color","warn",3,"click"],[1,"dialog-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","birth_date",3,"matDatepicker","placeholder"],["matSuffix","",3,"for"],["picker",""],["appearance","outline",1,"w-100","mt-3"],["matInput","","formControlName","address",3,"placeholder"],["matInput","","formControlName","notes","rows","2"],["matInput","","formControlName","school",3,"placeholder","matAutocomplete","input"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"mb-2"],["formArrayName","child_phone_numbers_set"],["class","d-flex gap-2 align-items-center mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],[1,"d-flex","gap-2","align-items-center","mb-2",3,"formGroupName"],["appearance","outline",1,"flex-grow-1"],["matInput","","formControlName","value",3,"placeholder"],["appearance","outline",1,"w-50"],["formControlName","relationship"],["value","father"],["value","mother"],["value","sibling"],["value","other"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",8),t.ALo(16,"translate"),t.YNc(17,_e,3,3,"mat-error",9),t.qZA()(),t.TgZ(18,"div",6)(19,"mat-form-field",7)(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",10),t.ALo(24,"translate"),t._UZ(25,"mat-datepicker-toggle",11)(26,"mat-datepicker",null,12),t.YNc(28,fe,3,3,"mat-error",9),t.qZA()()(),t.TgZ(29,"mat-form-field",13)(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",14),t.ALo(34,"translate"),t.YNc(35,me,3,3,"mat-error",9),t.qZA(),t.TgZ(36,"mat-form-field",13)(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"textarea",15),t.qZA(),t.TgZ(41,"mat-form-field",13)(42,"mat-label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"input",16),t.NdJ("input",function(s){return n.filterSchools(s)}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"mat-autocomplete",17,18),t.YNc(49,be,2,2,"mat-option",19),t.qZA(),t.YNc(50,Ce,3,3,"mat-error",9),t.qZA(),t.TgZ(51,"div",20)(52,"h6",21),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"div",22),t.YNc(56,Oe,25,23,"div",23),t.qZA(),t.TgZ(57,"button",24),t.NdJ("click",function(){return n.addPhone()}),t._uU(58),t.ALo(59,"translate"),t.qZA()()(),t.TgZ(60,"mat-dialog-actions",25)(61,"button",26),t.NdJ("click",function(){return n.onClose()}),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"button",27),t.NdJ("click",function(){return n.onSubmit()}),t._uU(65),t.ALo(66,"translate"),t.qZA()()()),2&o){const l=t.MAs(27),s=t.MAs(48);let h,A,Z,M;t.xp6(3),t.hij("",t.lcZ(4,25,"ADD_CHILD")," \u{1f9d2}"),t.xp6(5),t.Q6J("formGroup",n.childForm),t.xp6(5),t.Oqu(t.lcZ(14,27,"CHILD_NAME")),t.xp6(2),t.s9C("placeholder",t.lcZ(16,29,"CHILD_NAME")),t.xp6(2),t.Q6J("ngIf",null==(h=n.childForm.get("name"))?null:h.hasError("required")),t.xp6(4),t.Oqu(t.lcZ(22,31,"BIRTH_DATE")),t.xp6(2),t.s9C("placeholder",t.lcZ(24,33,"BIRTH_DATE")),t.Q6J("matDatepicker",l),t.xp6(2),t.Q6J("for",l),t.xp6(3),t.Q6J("ngIf",null==(A=n.childForm.get("birth_date"))?null:A.hasError("required")),t.xp6(3),t.Oqu(t.lcZ(32,35,"ADDRESS")),t.xp6(2),t.s9C("placeholder",t.lcZ(34,37,"ADDRESS")),t.xp6(2),t.Q6J("ngIf",null==(Z=n.childForm.get("address"))?null:Z.hasError("required")),t.xp6(3),t.Oqu(t.lcZ(39,39,"NOTES")),t.xp6(5),t.Oqu(t.lcZ(44,41,"SCHOOLS")),t.xp6(2),t.s9C("placeholder",t.lcZ(46,43,"SEARCH_SCHOOL")),t.Q6J("matAutocomplete",s),t.xp6(2),t.Q6J("displayWith",n.displaySchool),t.xp6(2),t.Q6J("ngForOf",n.filteredSchools),t.xp6(1),t.Q6J("ngIf",null==(M=n.childForm.get("school"))?null:M.hasError("required")),t.xp6(3),t.Oqu(t.lcZ(54,45,"PHONE_NUMBERS")),t.xp6(3),t.Q6J("ngForOf",n.phoneNumbers.controls),t.xp6(2),t.hij(" + ",t.lcZ(59,47,"ADD_PHONE")," "),t.xp6(4),t.hij(" ",t.lcZ(63,49,"CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(66,51,"SUBMIT")," ")}},dependencies:[d.sg,d.O5,u.H8,c.Fj,c.JJ,c.JL,v.Hw,B.XC,I.ey,B.ZL,f.KE,f.hX,f.TO,f.R9,D.Nt,S.gD,b.Mq,b.hl,b.nW,C.lW,C.RK,c.sg,c.u,c.x0,c.CE,p.X$],styles:['@charset "UTF-8";body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:16px!important;padding:0!important;background:#111827!important;direction:rtl;max-height:80vh!important;color:#f3f4f6;display:flex;flex-direction:column;scrollbar-width:none;-ms-overflow-style:none}  .mat-mdc-dialog-surface::-webkit-scrollbar{width:0;height:0}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;flex-direction:column;gap:1rem;flex:1;overflow-y:auto;padding:0 1rem 1rem}.dialog-footer[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#111827;padding:1rem;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:1rem;z-index:10}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}  .mat-mdc-text-field-wrapper,   .mat-mdc-form-field-flex,   .mat-mdc-input-element,   .mat-mdc-select-trigger{background:#fff!important;border-radius:8px!important}  .mat-mdc-form-field-focus-overlay{background:transparent!important}']}),i})();const Ae=function(){return["CHILD_NAME","AGE","PHONE_NUMBER","STATUS"]};let Ze=(()=>{const a=class{constructor(e,o,n,l){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("AGE"),this.translate.instant("PHONE_NUMBER"),this.translate.instant("STATUS")],this.totalChildren=0,this.currentPage=1,this.pageSize=10,this.searchTerm="",this.myTableData=[],this.isloadign=!1}ngOnInit(){this.getChildrenData()}getChildrenData(e="",o=1){this.isloadign=!0,this.dashboardService.getChild(e,o).subscribe({next:n=>{this.isloadign=!1,this.myTableData=n.results.map(l=>({CHILD_NAME:l.name,AGE:`${l.age.years}Y ${l.age.months}M ${l.age.days}D`,PHONE_NUMBER:l.child_phone_numbers_set[0]?.phone_number||"N/A",STATUS:l.is_active?"\u2705":"\u274c",ID:l.id,CHILD:l})),this.totalChildren=n.count,this.currentPage=o},error:n=>{console.error("Error fetching children:",n),this.isloadign=!1}})}goToChildProfilePge(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/child",e]));window.open(o,"_blank")}openCreateChildDialog(){this.dialog.open(X,{width:"600px"}).afterClosed().subscribe(o=>{o&&this.getChildrenData()})}editChild(e){this.dialog.open(X,{width:"600px",data:{childData:e.CHILD}}).afterClosed().subscribe(n=>{n&&this.getChildrenData()})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-children"]],decls:9,vars:13,consts:[[1,"my-4"],[1,"d-flex","justify-content-between","align-items-center"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0637\u0641\u0644... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[1,"create-btn",3,"click"],[3,"displayedColumns","data","paginationType","totalItems","currentPage","itemClicked","editClicked","pageChange"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1)(4,"input",2),t.NdJ("ngModelChange",function(s){return n.searchTerm=s})("input",function(){return n.getChildrenData(n.searchTerm)}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.openCreateChildDialog()}),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"app-data-table",4),t.NdJ("itemClicked",function(s){return n.goToChildProfilePge(s.ID)})("editClicked",function(s){return n.editChild(s)})("pageChange",function(s){return n.getChildrenData(n.searchTerm,s)}),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,8,"CHILDREN")," ... \u{1f9d2}"),t.xp6(3),t.Q6J("ngModel",n.searchTerm),t.xp6(2),t.hij(" + ",t.lcZ(7,10,"CREATE")," "),t.xp6(2),t.Q6J("displayedColumns",t.DdM(12,Ae))("data",n.myTableData)("paginationType","server")("totalItems",n.totalChildren)("currentPage",n.currentPage))},dependencies:[y,c.Fj,c.JJ,c.On,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}h1[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}.create-btn[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}"]}),i})(),R=(()=>{const a=class{printPage(){window.print()}};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-print-btn"]],decls:3,vars:3,consts:[[1,"print-button",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.printPage()}),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PRINT"),"\u{1f5a8}\ufe0f\n"))},dependencies:[p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.print-button[_ngcontent-%COMP%]{background-color:#004953;color:#fff;border:none;padding:.6rem 1.2rem;font-size:16px;border-radius:8px;cursor:pointer;margin-bottom:1rem;transition:background-color .3s ease}.print-button[_ngcontent-%COMP%]:hover{background-color:#001c20}@media print{.print-button[_ngcontent-%COMP%]{display:none}}"]}),i})();function Pe(i,a){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"app-loader"),t.qZA())}function ve(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",3),t._UZ(2,"app-print-btn"),t.qZA(),t.TgZ(3,"div",4)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"span",6),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",7),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"span",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"span",7),t._uU(17),t.qZA()(),t.TgZ(18,"div",5)(19,"span",6),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span",7),t._uU(23),t.qZA()(),t.TgZ(24,"div",5)(25,"span",6),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"span",7),t._uU(29),t.ALo(30,"date"),t.qZA()(),t.TgZ(31,"div",5)(32,"span",6),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"span",7),t._uU(36),t.ALo(37,"date"),t.qZA()()()()),2&i){const r=t.oxw();t.xp6(5),t.hij("",r.schoolDate.name," \u{1f3eb}"),t.xp6(3),t.hij("",t.lcZ(9,11,"ADDRESS")," :\u{1f4cd}"),t.xp6(3),t.Oqu(r.schoolDate.address),t.xp6(3),t.hij("",t.lcZ(15,13,"CREATED_BY")," : \u{1f464}"),t.xp6(3),t.Oqu(r.schoolDate.created_by),t.xp6(3),t.hij("",t.lcZ(21,15,"NOTES")," : \u{1f4dd}"),t.xp6(3),t.Oqu(r.schoolDate.notes),t.xp6(3),t.hij("",t.lcZ(27,17,"CREATED_DATE")," : \u{1f4c5}"),t.xp6(3),t.Oqu(t.xi3(30,19,r.schoolDate.created,"medium")),t.xp6(4),t.hij("",t.lcZ(34,22,"LAST_UPDATED")," : \u{1f504}"),t.xp6(3),t.Oqu(t.xi3(37,24,r.schoolDate.updated,"medium"))}}let Me=(()=>{const a=class{constructor(e,o){this.dashboardService=e,this.route=o,this.profileId="",this.isloading=!1}ngOnInit(){this.profileId=this.route.snapshot.paramMap.get("id"),this.getProfileData()}getProfileData(){this.isloading=!0,this.dashboardService.getSchoolById(this.profileId).subscribe({next:e=>{this.isloading=!1,this.schoolDate=e},error:e=>{console.error("Error fetching profile:",e)}})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(m.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-school-profile-page"]],decls:2,vars:2,consts:[["class","loader-wrapper",4,"ngIf"],[4,"ngIf"],[1,"loader-wrapper"],[1,"d-flex","justify-content-center","mt-4"],[1,"school-profile-card"],[1,"field"],[1,"label"],[1,"value"]],template:function(o,n){1&o&&(t.YNc(0,Pe,2,0,"div",0),t.YNc(1,ve,38,27,"div",1)),2&o&&(t.Q6J("ngIf",n.isloading),t.xp6(1),t.Q6J("ngIf",!n.isloading))},dependencies:[d.O5,R,K,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.school-profile-card[_ngcontent-%COMP%]{background:#1f2937;padding:2rem;border-radius:12px;box-shadow:0 2px 10px #0000000f;max-width:600px;margin:100px auto}.school-profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center;color:#f3f4f6}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.8rem 0;border-bottom:1px solid #eee}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#f3f4f6}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#f3f4f6;font-size:14px}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:last-child{border-bottom:none}"]}),i})();function ye(i,a){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.xp6(1),t.AsE(" ",r.phone_number," (",r.relationship,") ")}}function Te(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"span",3),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ul",8),t.YNc(5,ye,2,2,"li",9),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,2,"PHONE_NUMBERS")," : \u{1f4de}"),t.xp6(3),t.Q6J("ngForOf",null==r.childData?null:r.childData.child_phone_numbers_set)}}const De=function(i,a){return{active:i,inactive:a}};let we=(()=>{const a=class{constructor(e,o){this.dashboardService=e,this.route=o,this.profileId="",this.isloading=!1}ngOnInit(){this.profileId=this.route.snapshot.paramMap.get("id"),this.getProfileData()}getProfileData(){this.isloading=!0,this.dashboardService.getChildById(this.profileId).subscribe({next:e=>{this.isloading=!1,this.childData=e},error:e=>{console.error("Error fetching profile:",e)}})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(m.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-child-profile"]],decls:64,vars:52,consts:[[1,"d-flex","justify-content-center","mt-4"],[1,"school-profile-card"],[1,"field"],[1,"label"],[1,"value"],["class","field d-flex justify-content-between",4,"ngIf"],[1,"value",3,"ngClass"],[1,"field","d-flex","justify-content-between"],[1,"value","p-0","d-flex","flex-column","align-items-end"],[4,"ngFor","ngForOf"]],template:function(o,n){1&o&&(t.TgZ(0,"div")(1,"div",0),t._UZ(2,"app-print-btn"),t.qZA(),t.TgZ(3,"div",1)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"div",2)(7,"span",3),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",4),t._uU(11),t.ALo(12,"date"),t.qZA()(),t.TgZ(13,"div",2)(14,"span",3),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",4),t._uU(18),t.qZA()(),t.TgZ(19,"div",2)(20,"span",3),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"span",4),t._uU(24),t.qZA()(),t.YNc(25,Te,6,4,"div",5),t.TgZ(26,"div",2)(27,"span",3),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"span",4),t._uU(31),t.qZA()(),t.TgZ(32,"div",2)(33,"span",3),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"span",6),t._uU(37),t.qZA()(),t.TgZ(38,"div",2)(39,"span",3),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"span",4),t._uU(43),t.qZA()(),t.TgZ(44,"div",2)(45,"span",3),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"span",4),t._uU(49),t.qZA()(),t.TgZ(50,"div",2)(51,"span",3),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"span",4),t._uU(55),t.ALo(56,"date"),t.qZA()(),t.TgZ(57,"div",2)(58,"span",3),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"span",4),t._uU(62),t.ALo(63,"date"),t.qZA()()()()),2&o&&(t.xp6(5),t.hij("",null==n.childData?null:n.childData.name," \u{1f476}"),t.xp6(3),t.hij("",t.lcZ(9,23,"BIRTH_DATE")," : \u{1f382}"),t.xp6(3),t.Oqu(t.lcZ(12,25,null==n.childData?null:n.childData.birth_date)),t.xp6(4),t.hij("",t.lcZ(16,27,"AGE")," : \u{1f4cf}"),t.xp6(3),t.lnq(" ",null==n.childData?null:n.childData.age.years,"y ",null==n.childData?null:n.childData.age.months,"m ",null==n.childData?null:n.childData.age.days,"d "),t.xp6(3),t.hij("",t.lcZ(22,29,"ADDRESS")," : \u{1f4cd}"),t.xp6(3),t.Oqu(null==n.childData?null:n.childData.address),t.xp6(1),t.Q6J("ngIf",null==n.childData?null:n.childData.child_phone_numbers_set.length),t.xp6(3),t.hij("",t.lcZ(29,31,"SCHOOL_NAME")," : \u{1f3eb}"),t.xp6(3),t.Oqu(null==n.childData?null:n.childData.school),t.xp6(3),t.hij("",t.lcZ(35,33,"STATUS")," : \u{1f4cc}"),t.xp6(2),t.Q6J("ngClass",t.WLB(49,De,null==n.childData?null:n.childData.is_active,!(null!=n.childData&&n.childData.is_active))),t.xp6(1),t.hij(" ",null!=n.childData&&n.childData.is_active?"Active":"Inactive"," "),t.xp6(3),t.hij("",t.lcZ(41,35,"SPECIAL_NEEDS")," : \u267f"),t.xp6(3),t.Oqu(null!=n.childData&&n.childData.special_needs?"Yes":"No"),t.xp6(3),t.hij("",t.lcZ(47,37,"NOTES")," : \u{1f4dd}"),t.xp6(3),t.Oqu((null==n.childData?null:n.childData.notes)||"No notes"),t.xp6(3),t.hij("",t.lcZ(53,39,"CREATED_DATE")," : \u{1f4c5}"),t.xp6(3),t.Oqu(t.xi3(56,41,null==n.childData?null:n.childData.created,"medium")),t.xp6(4),t.hij("",t.lcZ(60,44,"LAST_UPDATED")," : \u{1f504}"),t.xp6(3),t.Oqu(t.xi3(63,46,null==n.childData?null:n.childData.updated,"medium")))},dependencies:[d.mk,d.sg,d.O5,R,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.school-profile-card[_ngcontent-%COMP%]{background:#1f2937;padding:2rem;border-radius:12px;box-shadow:0 2px 10px #0000000f;max-width:600px;margin:100px auto}.school-profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center;color:#f3f4f6}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.8rem 0;border-bottom:1px solid #eee}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:#f3f4f6}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#f3f4f6}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value.active[_ngcontent-%COMP%]{color:green;font-weight:700}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value.inactive[_ngcontent-%COMP%]{color:red;font-weight:700}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:4px 0}.school-profile-card[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:last-child{border-bottom:none}"]}),i})();function Ie(i,a){if(1&i&&(t.TgZ(0,"div",4)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,2,"LAST_LOGIN")," \u{1f552}:"),t.xp6(3),t.Oqu(t.xi3(6,4,r.userData.last_login,"short"))}}function ke(i,a){if(1&i&&(t.TgZ(0,"div",4)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"date"),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,2,"LAST_LOGOUT")," \u{1f6aa}:"),t.xp6(3),t.Oqu(t.xi3(6,4,r.userData.last_logout,"short"))}}let Ee=(()=>{const a=class{constructor(e,o){this.route=e,this.dashboardService=o}ngOnInit(){this.route.paramMap.subscribe(e=>{const o=e.get("id");o&&(this.userId=+o,this.getUserById(this.userId))})}getUserById(e){this.dashboardService.getUserById(e).subscribe({next:o=>{this.userData=o},error:o=>{console.error("Failed to fetch user:",o)}})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(m.gz),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-user-profile"]],decls:54,vars:52,consts:[[1,"card","shadow-lg","p-4","mt-5","rounded"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"badge"],[1,"row"],[1,"col-md-6","mb-3","d-flex"],[1,"mx-1"],["class","col-md-6 mb-3 d-flex",4,"ngIf"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",2),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",3)(10,"div",4)(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",5),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",4)(18,"strong"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",5),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",4)(25,"strong"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",5),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"div",4)(32,"strong"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",4)(39,"strong"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div"),t._uU(43),t.ALo(44,"date"),t.qZA()(),t.TgZ(45,"div",4)(46,"strong"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div"),t._uU(50),t.ALo(51,"date"),t.qZA()(),t.YNc(52,Ie,7,7,"div",6),t.YNc(53,ke,7,7,"div",6),t.qZA()()),2&o&&(t.xp6(3),t.hij("",n.userData.username||t.lcZ(4,20,"NO_DATA")," \u{1f464}"),t.xp6(2),t.ekj("bg-success",n.userData.is_active)("bg-danger",!n.userData.is_active),t.xp6(1),t.hij(" ",n.userData.is_active?t.lcZ(7,22,"ACTIVE")+" \u2705":t.lcZ(8,24,"INACTIVE")+" \u274c"," "),t.xp6(6),t.hij(" ",t.lcZ(13,26,"PHONE_NUMBER")," \u{1f4de}:"),t.xp6(3),t.hij(" ",n.userData.phone_number||t.lcZ(16,28,"NO_DATA")," "),t.xp6(4),t.hij("",t.lcZ(20,30,"EMAIL")," \u2709\ufe0f:"),t.xp6(3),t.Oqu(n.userData.email||t.lcZ(23,32,"NO_DATA")),t.xp6(4),t.hij("",t.lcZ(27,34,"ROLE")," \u{1f9d1}\u200d\u{1f4bc}:"),t.xp6(3),t.Oqu(n.userData.role||t.lcZ(30,36,"NO_DATA")),t.xp6(4),t.hij("",t.lcZ(34,38,"BRANCH")," \u{1f3f0}:"),t.xp6(3),t.Oqu(n.userData.branch||t.lcZ(37,40,"NO_DATA")),t.xp6(4),t.hij("",t.lcZ(41,42,"CREATED_DATE")," \u{1f4c5}:"),t.xp6(3),t.Oqu(t.xi3(44,44,n.userData.created,"fullDate")),t.xp6(4),t.hij("",t.lcZ(48,47,"LAST_UPDATED")," \u{1f504}:"),t.xp6(3),t.Oqu(t.xi3(51,49,n.userData.updated,"fullDate")),t.xp6(2),t.Q6J("ngIf",n.userData.last_login),t.xp6(1),t.Q6J("ngIf",n.userData.last_logout))},dependencies:[d.O5,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.card[_ngcontent-%COMP%]{background-color:#1f2937;color:#f3f4f6}.card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:16px}"]}),i})();function qe(i,a){1&i&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function Ue(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",7)(1,"label",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"input",17,18),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.expense.name=o)}),t.qZA(),t.YNc(6,qe,3,3,"div",11),t.qZA()}if(2&i){const r=t.MAs(5),e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"NAME")),t.xp6(2),t.Q6J("ngModel",e.expense.name),t.xp6(2),t.Q6J("ngIf",r.invalid&&r.touched)}}function Le(i,a){if(1&i&&(t.TgZ(0,"mat-option",26)(1,"div",27)(2,"strong"),t._uU(3),t.qZA(),t.TgZ(4,"small",28),t._uU(5),t.qZA()()()),2&i){const r=a.$implicit;t.Q6J("value",r.name),t.xp6(3),t.Oqu(r.name),t.xp6(2),t.AsE(" ",r.measure_unit," | ",r.available_units," units ")}}function Ne(i,a){1&i&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function Se(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",7)(1,"label",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",20)(5,"input",21,22),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.expense.material=o)})("input",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.filterMaterials(o))}),t.qZA(),t.TgZ(7,"mat-autocomplete",23,24),t.NdJ("optionSelected",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.selectMaterial(o))}),t.YNc(9,Le,6,4,"mat-option",25),t.qZA()(),t.YNc(10,Ne,3,3,"div",11),t.qZA()}if(2&i){const r=t.MAs(6),e=t.MAs(8),o=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"MATERIAL")),t.xp6(3),t.Q6J("ngModel",o.expense.material)("matAutocomplete",e),t.xp6(4),t.Q6J("ngForOf",o.filteredMaterials),t.xp6(1),t.Q6J("ngIf",r.invalid&&r.touched)}}function Be(i,a){if(1&i&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",r.name," ")}}function Re(i,a){1&i&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function Fe(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",7)(1,"label",8),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"select",29,30),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.expense.branch=o)}),t.TgZ(6,"option",31),t._uU(7,"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0631\u0639"),t.qZA(),t.YNc(8,Be,2,2,"option",25),t.qZA(),t.YNc(9,Re,3,3,"div",11),t.qZA()}if(2&i){const r=t.MAs(5),e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"BRANCH")),t.xp6(2),t.Q6J("ngModel",e.expense.branch),t.xp6(4),t.Q6J("ngForOf",e.branches),t.xp6(1),t.Q6J("ngIf",r.invalid&&r.touched)}}function Je(i,a){1&i&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function Qe(i,a){1&i&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}let F=(()=>{const a=class{constructor(e,o,n,l,s){this.dialogRef=e,this.sharedService=o,this.dashboardService=n,this.data=l,this.toaster=s,this.branches=[],this.branch=JSON.parse(localStorage.getItem("branch")||"{}"),this.materials=[],this.filteredMaterials=[],this.selectedMaterialName="",this.expense={id:null,name:"",material:null,branch:null,total_price:null,quantity:null},this.type=l.type}ngOnInit(){"general"===this.type?this.loadBranches():"material"===this.type&&this.getMaterials(),this.data.isEdit&&this.data.expense&&(this.expense={...this.data.expense},"general"===this.type&&(this.expense.branch=this.data.branchId),"material"===this.type&&(this.getMaterials(),this.selectedMaterialName=this.expense.material,this.selectedMaterialId=this.data.materialId))}loadBranches(){this.sharedService.getBranches().subscribe({next:e=>this.branches=e})}onSave(){this.data.isEdit?"general"===this.type?this.dashboardService.updateGeneralExpense(this.data.id,this.expense).subscribe(e=>{this.toaster.success(e.message),this.dialogRef.close(!0)}):this.dashboardService.updateMaterialExpense(this.data.id,{material:this.selectedMaterialId,total_price:this.expense.total_price,quantity:this.expense.quantity}).subscribe(o=>{this.toaster.success(o.message),this.dialogRef.close(!0)}):"general"===this.type?this.dashboardService.createGeneralExpense(this.expense).subscribe(e=>{this.toaster.success(e.message),this.dialogRef.close(!0)}):this.dashboardService.createMaterialExpense({material:this.selectedMaterialId,total_price:this.expense.total_price,quantity:this.expense.quantity}).subscribe(o=>{this.toaster.success(o.message),this.dialogRef.close(!0)})}getMaterials(){this.sharedService.getMaterials(this.branch.id).subscribe(e=>{this.materials=e,this.filteredMaterials=e})}filterMaterials(e){const o=e.target.value.toLowerCase();this.filteredMaterials=this.materials.filter(n=>n.name.toLowerCase().includes(o))}selectMaterial(e){const o=e.option.value;this.selectedMaterialName=o;const n=this.materials.find(l=>l.name===o);n&&(this.selectedMaterialId=n.id)}onClose(){this.dialogRef.close(!1)}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(u.so),t.Y36(k),t.Y36(x),t.Y36(u.WI),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-expense-dialog"]],decls:37,vars:25,consts:[[1,"dialog-container"],[1,"dialog-header-wrapper","d-flex","justify-content-between","align-items-center"],["mat-dialog-title","",1,"dialog-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-body"],["expenseForm","ngForm"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","number","name","total_price","min","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["totalPrice","ngModel"],["class","my-1 text-danger",4,"ngIf"],["type","number","name","quantity","min","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["quantity","ngModel"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-stroked-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"my-1","text-danger"],["appearance","outline",1,"w-100"],["matInput","","type","text","name","material","required","",1,"material-input",3,"ngModel","matAutocomplete","ngModelChange","input"],["material","ngModel"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"material-option"],[1,"d-block"],["name","branch","required","",1,"form-select",3,"ngModel","ngModelChange"],["branch","ngModel"],["value","","disabled",""]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()(),t._UZ(9,"hr"),t.TgZ(10,"mat-dialog-content",4)(11,"form",null,5),t.YNc(13,Ue,7,5,"div",6),t.YNc(14,Se,11,7,"div",6),t.YNc(15,Fe,10,6,"div",6),t.TgZ(16,"div",7)(17,"label",8),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"input",9,10),t.NdJ("ngModelChange",function(s){return n.expense.total_price=s}),t.qZA(),t.YNc(22,Je,3,3,"div",11),t.qZA(),t.TgZ(23,"div",7)(24,"label",8),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"input",12,13),t.NdJ("ngModelChange",function(s){return n.expense.quantity=s}),t.qZA(),t.YNc(29,Qe,3,3,"div",11),t.qZA()()(),t.TgZ(30,"mat-dialog-actions",14)(31,"button",15),t.NdJ("click",function(){return n.onClose()}),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"button",16),t.NdJ("click",function(){return n.onSave()}),t._uU(35),t.ALo(36,"translate"),t.qZA()()()),2&o){const l=t.MAs(12),s=t.MAs(21),h=t.MAs(28);t.xp6(3),t.hij(" ","general"===n.type?t.lcZ(4,13,"GENERAL_EXPENSE"):t.lcZ(5,15,"MATERIAL_EXPENSE")," \u{1f4b0} "),t.xp6(10),t.Q6J("ngIf","general"===n.type),t.xp6(1),t.Q6J("ngIf","material"===n.type),t.xp6(1),t.Q6J("ngIf","general"===n.type),t.xp6(3),t.Oqu(t.lcZ(19,17,"TOTAL_PRICE")),t.xp6(2),t.Q6J("ngModel",n.expense.total_price),t.xp6(2),t.Q6J("ngIf",s.invalid&&s.touched),t.xp6(3),t.Oqu(t.lcZ(26,19,"QUANTITY")),t.xp6(2),t.Q6J("ngModel",n.expense.quantity),t.xp6(2),t.Q6J("ngIf",h.invalid&&h.touched),t.xp6(3),t.hij(" ",t.lcZ(33,21,"CANCEL")," "),t.xp6(2),t.Q6J("disabled",l.invalid),t.xp6(1),t.hij(" ",t.lcZ(36,23,"SAVE")," ")}},dependencies:[d.sg,d.O5,u.uh,u.xY,u.H8,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.Q7,c.qQ,c.On,c.F,v.Hw,B.XC,I.ey,B.ZL,f.KE,D.Nt,C.lW,C.RK,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:12px!important;background:#111827!important}.dialog-header[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;font-size:1.25rem;font-weight:600;color:#f3f4f6!important}.mat-icon[_ngcontent-%COMP%]{color:#f3f4f6!important}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;color:#f3f4f6!important;flex-direction:column;gap:1.2rem;padding-top:1rem}.dialog-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;color:#f3f4f6}.dialog-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .dialog-body[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px;padding:8px;border:1px solid #ccc}.dialog-footer[_ngcontent-%COMP%]{padding-top:1.5rem;display:flex;justify-content:flex-end;gap:1rem}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}.material-input[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important;padding:5px 20px;border-radius:8px}.material-input[_ngcontent-%COMP%]::placeholder{color:#555!important}.mat-form-field[_ngcontent-%COMP%]{background-color:#fff}.mat-form-field-outline[_ngcontent-%COMP%]{border-color:#ccc}"]}),i})();function Ye(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",14),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()}}const je=function(){return["Name","TOTAL_PRICE","QUANTITY","BRANCH"]};let $e=(()=>{const a=class{constructor(e,o,n,l){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.selectedDateRange={start:null,end:null},this.type="general_expense",this.selectedBranchIds=[],this.searchQuery="",this.params={searchQuery:"",branchIds:[],startDate:null,endDate:null,page:1,pageSize:10},this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("TOTAL_PRICE"),this.translate.instant("QUANTITY"),this.translate.instant("BRANCH")],this.expenseRes=[],this.totalItems=0,this.currentPage=1}ngOnInit(){this.getGeneralExpense(this.type,this.params)}getGeneralExpense(e="general_expense",o){this.dashboardService.getExpenses(e,o).subscribe({next:n=>{this.expenseRes=n.results.map(l=>({Name:l.name,TOTAL_PRICE:l.total_price,QUANTITY:l.quantity,BRANCH:l.branch,ID:l.id,BRANCH_ID:l.branch_id})),this.totalItems=n.count,this.currentPage=o.page}})}pageChanged(e){this.params.page=e,this.getGeneralExpense(this.type,this.params)}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params.startDate=this.formatDateForAPI(e),this.params.endDate=this.formatDateForAPI(o),this.params.page=1,this.getGeneralExpense(this.type,this.params))}searchExpense(e){this.params.searchQuery=e,this.params.page=1,this.getGeneralExpense(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params.branchIds=e,this.params.page=1,this.getGeneralExpense(this.type,this.params)}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToExpenseProfile(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/expense",e.ID],{queryParams:{type:"general"}}));window.open(o,"_blank")}openExpenseDialog(e){this.dialog.open(F,{width:"500px",data:{type:e}}).afterClosed().subscribe(n=>{n&&this.getGeneralExpense(this.type,this.params)})}editExpense(e){this.dialog.open(F,{width:"500px",data:{type:"general",branchId:e.BRANCH_ID,isEdit:!0,expense:{name:e.Name,branch:e.BRANCH,total_price:e.TOTAL_PRICE,quantity:e.QUANTITY},id:e.ID}}).afterClosed().subscribe(l=>{l&&this.getGeneralExpense(this.type,this.params)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-general-expense"]],decls:26,vars:25,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0646\u0641\u0642\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[1,"d-flex","justify-content-start","align-items-center","mt-4"],[3,"selectedBranchesChange",4,"ngIf"],["appearance","fill",1,"mx-3"],[3,"rangePicker"],["matStartDate","",3,"placeholder","dateChange"],["matEndDate","",3,"placeholder","dateChange"],["matSuffix","",3,"for"],["picker",""],[1,"dialog-button",3,"click"],[3,"displayedColumns","data","paginationType","totalItems","currentPage","pageChange","editClicked","itemClicked"],[3,"selectedBranchesChange"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Ye,1,0,"app-branch-multi-select",5),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-date-range-input",7)(14,"input",8),t.NdJ("dateChange",function(s){return n.onStartDateChange(s.value)}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",9),t.NdJ("dateChange",function(s){return n.onEndDateChange(s.value)}),t.ALo(17,"translate"),t.qZA()(),t._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",null,11),t.qZA()()(),t.TgZ(21,"div")(22,"button",12),t.NdJ("click",function(){return n.openExpenseDialog("general")}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()(),t.TgZ(25,"app-data-table",13),t.NdJ("pageChange",function(s){return n.pageChanged(s)})("editClicked",function(s){return n.editExpense(s)})("itemClicked",function(s){return n.goToExpenseProfile(s)}),t.qZA()),2&o){const l=t.MAs(20);t.xp6(4),t.hij("",t.lcZ(5,14,"GENERAL_EXPENSE")," ... \u{1f4b8}"),t.xp6(2),t.Q6J("ngModel",n.searchQuery),t.xp6(2),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(3),t.Oqu(t.lcZ(12,16,"SELECT_DATE_RANGE")),t.xp6(2),t.Q6J("rangePicker",l),t.xp6(1),t.Q6J("placeholder",t.lcZ(15,18,"START_DATE")),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,20,"END_DATE")),t.xp6(2),t.Q6J("for",l),t.xp6(5),t.hij(" + ",t.lcZ(24,22,"CREATE")," "),t.xp6(2),t.Q6J("displayedColumns",t.DdM(24,je))("data",n.expenseRes)("paginationType","server")("totalItems",n.totalItems)("currentPage",n.currentPage)}},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,b.nW,b.wx,b.zY,b.By,b._g,f.KE,f.hX,f.R9,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}  .mat-calendar-body-selected{background-color:#004953}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})();function ze(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",14),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()}}const He=function(){return["MATERIAL","TOTAL_PRICE","QUANTITY","BRANCH","MEASURE_UNIT"]};let Ge=(()=>{const a=class{constructor(e,o,n,l){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.selectedDateRange={start:null,end:null},this.type="material_expense",this.selectedBranchIds=[],this.searchQuery="",this.params={searchQuery:"",branchIds:[],startDate:null,endDate:null,page:1},this.displayedColumns=[this.translate.instant("MATERIAL"),this.translate.instant("TOTAL_PRICE"),this.translate.instant("QUANTITY"),this.translate.instant("BRANCH"),this.translate.instant("MEASURE_UNIT")],this.expenseRes=[],this.totalItems=0,this.currentPage=1}ngOnInit(){this.getMaterialExpense(this.type,this.params)}getMaterialExpense(e="material_expense",o){this.dashboardService.getExpenses(e,o).subscribe({next:n=>{this.expenseRes=n.results.map(l=>({MATERIAL:l.material,TOTAL_PRICE:l.total_price,QUANTITY:l.quantity,BRANCH:l.branch,MEASURE_UNIT:l.measure_unit,ID:l.id,BRANCH_ID:l.branch_id,MATERIAL_ID:l.material_id})),this.totalItems=n.count,this.currentPage=o.page}})}pageChanged(e){this.params.page=e,this.getMaterialExpense(this.type,this.params)}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params.startDate=this.formatDateForAPI(e),this.params.endDate=this.formatDateForAPI(o),this.params.page=1,this.getMaterialExpense(this.type,this.params))}searchExpense(e){this.params.searchQuery=e,this.params.page=1,this.getMaterialExpense(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params.branchIds=e,this.params.page=1,this.getMaterialExpense(this.type,this.params)}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToExpenseProfile(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/expense",e.ID],{queryParams:{type:"material"}}));window.open(o,"_blank")}openExpenseDialog(e){this.dialog.open(F,{width:"500px",data:{type:e}}).afterClosed().subscribe(n=>{n&&this.getMaterialExpense(this.type,this.params)})}editExpense(e){this.dialog.open(F,{width:"500px",data:{type:"material",isEdit:!0,expense:{material:e.MATERIAL,total_price:e.TOTAL_PRICE,quantity:e.QUANTITY},id:e.ID,materialId:e.MATERIAL_ID}}).afterClosed().subscribe(l=>{l&&this.getMaterialExpense(this.type,this.params)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-material-expense"]],decls:26,vars:25,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0646\u0641\u0642\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[1,"d-flex","justify-content-start","align-items-center","mt-4"],[3,"selectedBranchesChange",4,"ngIf"],["appearance","fill",1,"mx-3"],[3,"rangePicker"],["matStartDate","",3,"placeholder","dateChange"],["matEndDate","",3,"placeholder","dateChange"],["matSuffix","",3,"for"],["picker",""],[1,"dialog-button",3,"click"],[3,"displayedColumns","data","paginationType","totalItems","currentPage","editClicked","itemClicked","pageChange"],[3,"selectedBranchesChange"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,ze,1,0,"app-branch-multi-select",5),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-date-range-input",7)(14,"input",8),t.NdJ("dateChange",function(s){return n.onStartDateChange(s.value)}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",9),t.NdJ("dateChange",function(s){return n.onEndDateChange(s.value)}),t.ALo(17,"translate"),t.qZA()(),t._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",null,11),t.qZA()()(),t.TgZ(21,"div")(22,"button",12),t.NdJ("click",function(){return n.openExpenseDialog("material")}),t._uU(23),t.ALo(24,"translate"),t.qZA()()()(),t.TgZ(25,"app-data-table",13),t.NdJ("editClicked",function(s){return n.editExpense(s)})("itemClicked",function(s){return n.goToExpenseProfile(s)})("pageChange",function(s){return n.pageChanged(s)}),t.qZA()),2&o){const l=t.MAs(20);t.xp6(4),t.hij("",t.lcZ(5,14,"MATERIAL_EXPENSE")," ... \u{1f6d2}"),t.xp6(2),t.Q6J("ngModel",n.searchQuery),t.xp6(2),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(3),t.Oqu(t.lcZ(12,16,"SELECT_DATE_RANGE")),t.xp6(2),t.Q6J("rangePicker",l),t.xp6(1),t.Q6J("placeholder",t.lcZ(15,18,"START_DATE")),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,20,"END_DATE")),t.xp6(2),t.Q6J("for",l),t.xp6(5),t.hij(" + ",t.lcZ(24,22,"CREATE")," "),t.xp6(2),t.Q6J("displayedColumns",t.DdM(24,He))("data",n.expenseRes)("paginationType","server")("totalItems",n.totalItems)("currentPage",n.currentPage)}},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,b.nW,b.wx,b.zY,b.By,b._g,f.KE,f.hX,f.R9,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})();function Ke(i,a){if(1&i&&(t.TgZ(0,"div",6)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const r=t.oxw(2);t.xp6(2),t.hij("\u{1f3f7}\ufe0f ",t.lcZ(3,2,"NAME"),":"),t.xp6(2),t.hij(" ",r.expense.name," ")}}function Xe(i,a){if(1&i&&(t.TgZ(0,"div",6)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const r=t.oxw(2);t.xp6(2),t.hij("\u{1f6e0}\ufe0f ",t.lcZ(3,2,"MATERIAL"),":"),t.xp6(2),t.hij(" ",r.expense.material," ")}}function Ve(i,a){if(1&i&&(t.TgZ(0,"div",6)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const r=t.oxw(2);t.xp6(2),t.hij("\u2696\ufe0f ",t.lcZ(3,2,"MEASURE_UNIT"),":"),t.xp6(2),t.hij(" ",r.expense.measure_unit," ")}}function We(i,a){if(1&i&&(t.TgZ(0,"div",3)(1,"h1",4),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"titlecase"),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"span"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10),t.qZA(),t.YNc(11,Ke,5,4,"div",7),t.YNc(12,Xe,5,4,"div",7),t.TgZ(13,"div",6)(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"div",6)(19,"span"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._uU(22),t.qZA(),t.TgZ(23,"div",6)(24,"span"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._uU(27),t.qZA(),t.YNc(28,Ve,5,4,"div",7),t.TgZ(29,"div",6)(30,"span"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._uU(33),t.qZA(),t.TgZ(34,"div",6)(35,"span"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._uU(38),t.ALo(39,"date"),t.qZA(),t.TgZ(40,"div",6)(41,"span"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._uU(44),t.ALo(45,"date"),t.qZA()()()),2&i){const r=t.oxw();t.xp6(2),t.AsE(" \u{1f4c4} ",t.lcZ(3,19,"EXPENSE_DETAILS")," (",t.lcZ(4,21,r.type),") "),t.xp6(6),t.hij("\u{1f194} ",t.lcZ(9,23,"ID"),":"),t.xp6(2),t.hij(" ",r.expense.id," "),t.xp6(1),t.Q6J("ngIf","general"===r.type),t.xp6(1),t.Q6J("ngIf","material"===r.type),t.xp6(3),t.hij("\u{1f4b0} ",t.lcZ(16,25,"UNIT_PRICE"),":"),t.xp6(2),t.hij(" ",r.expense.unit_price," EGP "),t.xp6(3),t.hij("\u{1f4e6} ",t.lcZ(21,27,"TOTAL_PRICE"),":"),t.xp6(2),t.hij(" ",r.expense.total_price," EGP "),t.xp6(3),t.hij("\u{1f522} ",t.lcZ(26,29,"QUANTITY"),":"),t.xp6(2),t.hij(" ",r.expense.quantity," "),t.xp6(1),t.Q6J("ngIf","material"===r.type),t.xp6(3),t.hij("\u{1f3e2} ",t.lcZ(32,31,"BRANCH"),":"),t.xp6(2),t.hij(" ",r.expense.branch," "),t.xp6(3),t.hij("\u{1f4c5} ",t.lcZ(37,33,"CREATED"),":"),t.xp6(2),t.hij(" ",t.xi3(39,35,r.expense.created,"short")," "),t.xp6(4),t.hij("\u270f\ufe0f ",t.lcZ(43,38,"UPDATED"),":"),t.xp6(2),t.hij(" ",t.xi3(45,40,r.expense.updated,"short")," ")}}function tn(i,a){1&i&&(t.TgZ(0,"p",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("\u23f3 ",t.lcZ(2,1,"LOADING"),""))}let en=(()=>{const a=class{constructor(e,o){this.route=e,this.dashboardService=o,this.expense=null}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.type=this.route.snapshot.queryParamMap.get("type")||"material","material"===this.type?this.dashboardService.getMaterialExpenseById(e).subscribe({next:o=>this.expense=o,error:o=>console.error("Error fetching material expense:",o)}):this.dashboardService.getGeneralExpenseById(e).subscribe({next:o=>this.expense=o,error:o=>console.error("Error fetching general expense:",o)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(m.gz),t.Y36(x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-expense"]],decls:5,vars:2,consts:[[1,"d-flex","justify-content-center","my-4"],["class","expense-container",4,"ngIf","ngIfElse"],["loading",""],[1,"expense-container"],[1,"expense-title"],[1,"expense-card"],[1,"expense-row"],["class","expense-row",4,"ngIf"],[1,"loading"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-print-btn"),t.qZA(),t.YNc(2,We,46,43,"div",1),t.YNc(3,tn,3,3,"ng-template",null,2,t.W1O)),2&o){const l=t.MAs(4);t.xp6(2),t.Q6J("ngIf",n.expense)("ngIfElse",l)}},dependencies:[d.O5,R,d.rS,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;background-color:#1f2937;border-radius:10px;color:#f3f4f6}.expense-title[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin-bottom:15px;color:#f3f4f6}.expense-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.expense-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 12px;border-radius:6px;font-size:14px}.expense-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f3f4f6}.loading[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#f3f4f6;margin-top:20px}"]}),i})();function nn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.toggleProductBills())}),t._uU(1),t.qZA()}if(2&i){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.isProductBillsExpanded?"\u{1f53c}":"\u{1f53d}"," ")}}function on(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&i){const r=a.$implicit,e=a.index,o=t.oxw(2);t.Udp("animation-delay",.1*e+"s"),t.ekj("hidden-row",!o.isProductBillsExpanded&&e>=3),t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.hij("",r.unit_price," EGP"),t.xp6(2),t.hij("",r.total_price," EGP")}}function an(i,a){if(1&i&&(t.TgZ(0,"div",19)(1,"div",20)(2,"h6",21),t._uU(3,"\u{1f6cd}\ufe0f"),t.qZA(),t.YNc(4,nn,2,1,"button",22),t.qZA(),t.TgZ(5,"div",23)(6,"table",24)(7,"thead")(8,"tr")(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA()()(),t.TgZ(21,"tbody",25),t.YNc(22,on,9,8,"tr",26),t.qZA()()()()),2&i){const r=t.oxw();t.xp6(4),t.Q6J("ngIf",r.data.product_bills_set.length>3),t.xp6(1),t.ekj("expanded",r.isProductBillsExpanded),t.xp6(5),t.Oqu(t.lcZ(11,8,"PRODUCTS")),t.xp6(3),t.Oqu(t.lcZ(14,10,"QUANTITY")),t.xp6(3),t.Oqu(t.lcZ(17,12,"PRICE")),t.xp6(3),t.Oqu(t.lcZ(20,14,"TOTAL")),t.xp6(3),t.Q6J("ngForOf",r.data.product_bills_set)}}const rn=function(i){return{color:i}};let V=(()=>{const a=class{constructor(e,o,n,l){this.fb=e,this.dialogRef=o,this.renderer=n,this.data=l,this.rest=0,this.isProductBillsExpanded=!1,this.isTransitioning=!1,this.totalPrice=l.total_price,this.form=this.fb.group({visa:[0],cash:[0],instapay:[0]}),this.updateRest()}toggleProductBills(){if(this.isTransitioning)return;this.isTransitioning=!0,this.isProductBillsExpanded=!this.isProductBillsExpanded;const e=document.querySelector(".expand-emoji-btn");e&&(this.renderer.addClass(e,"expanding"),setTimeout(()=>{this.renderer.removeClass(e,"expanding")},300)),setTimeout(()=>{this.isTransitioning=!1},500)}getDisplayedProductBills(){return this.data.product_bills_set&&0!==this.data.product_bills_set.length?this.data.product_bills_set.length<=3||this.isProductBillsExpanded?this.data.product_bills_set:this.data.product_bills_set.slice(0,3):[]}updateRest(){const{visa:e,cash:o,instapay:n}=this.form.value,l=Number(e)+Number(o)+Number(n);this.rest=this.totalPrice-l}submit(){this.dialogRef.close(this.form.value)}onClose(){this.dialogRef.close()}getSpentTimeFormatted(e){const o=Math.floor(e/60),n=e%60,l=o>0?`${o} \u0633\u0627\u0639\u0629`:"",s=n>0?`${n} \u062f\u0642\u064a\u0642\u0629`:"";return l&&s?`${l} \u0648${s}`:l||s||"0 \u062f\u0642\u064a\u0642\u0629"}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(u.so),t.Y36(t.Qsj),t.Y36(u.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-close-bill-dialog"]],decls:45,vars:27,consts:[[1,"dialog-container","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"dialog-header","m-0"],["mat-icon-button","","color","warn",3,"click"],["class","product-bills-section mb-3",4,"ngIf"],[1,"text-center","my-3"],[1,"text-center","mb-3"],[1,"dialog-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-4"],["appearance","outline",1,"w-100"],["type","number","matInput","","formControlName","instapay",3,"input"],["type","number","matInput","","formControlName","cash",3,"input"],["type","number","matInput","","formControlName","visa",3,"input"],[1,"text-center","mt-3"],[3,"ngStyle"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"product-bills-section","mb-3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"m-0"],["class","expand-emoji-btn",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-sm","table-striped"],[1,"table-body-transition"],[3,"hidden-row","animation-delay",4,"ngFor","ngForOf"],[1,"expand-emoji-btn",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.YNc(8,an,23,16,"div",4),t.TgZ(9,"div",5)(10,"h5"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"div",6)(14,"h5"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",9)(20,"mat-form-field",10)(21,"mat-label"),t._uU(22,"Instapay\u{1f4f2}"),t.qZA(),t.TgZ(23,"input",11),t.NdJ("input",function(){return n.updateRest()}),t.qZA()()(),t.TgZ(24,"div",9)(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Cash\u{1f4b5}"),t.qZA(),t.TgZ(28,"input",12),t.NdJ("input",function(){return n.updateRest()}),t.qZA()()(),t.TgZ(29,"div",9)(30,"mat-form-field",10)(31,"mat-label"),t._uU(32,"Visa\u{1f4b3}"),t.qZA(),t.TgZ(33,"input",13),t.NdJ("input",function(){return n.updateRest()}),t.qZA()()()(),t.TgZ(34,"div",14)(35,"h5",15),t._uU(36),t.ALo(37,"translate"),t.qZA()()(),t.TgZ(38,"mat-dialog-actions",16)(39,"button",17),t.NdJ("click",function(){return n.onClose()}),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"button",18),t.NdJ("click",function(){return n.submit()}),t._uU(43),t.ALo(44,"translate"),t.qZA()()()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,13,"CLOSE_BILL")," \u{1f4b3}"),t.xp6(5),t.Q6J("ngIf",n.data.product_bills_set&&n.data.product_bills_set.length>0),t.xp6(3),t.AsE("",t.lcZ(12,15,"TOTAL_PRICE"),": ",n.data.total_price," EGP"),t.xp6(4),t.AsE(" ",t.lcZ(16,17,"SPENT_TIME"),": ",n.getSpentTimeFormatted(n.data.spent_time)," "),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(18),t.Q6J("ngStyle",t.VKq(25,rn,n.rest>=0?"green":"red")),t.xp6(1),t.AsE(" ",t.lcZ(37,19,"REMAINING"),": ",n.rest," EGP "),t.xp6(4),t.hij(" ",t.lcZ(41,21,"CANCEL")," "),t.xp6(2),t.Q6J("disabled",0!=n.rest),t.xp6(1),t.hij(" ",t.lcZ(44,23,"SUBMIT")," "))},dependencies:[d.sg,d.O5,d.PC,u.H8,c.Fj,c.wV,c.JJ,c.JL,v.Hw,f.KE,f.hX,D.Nt,C.lW,C.RK,c.sg,c.u,p.X$],styles:['body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:16px!important;padding:0!important;background:#111827!important;direction:rtl;max-height:80vh!important;color:#f3f4f6;display:flex;flex-direction:column;scrollbar-width:none;-ms-overflow-style:none}  .mat-mdc-dialog-surface::-webkit-scrollbar{width:0;height:0}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;flex-direction:column;gap:1rem;flex:1;overflow-y:auto;padding:0 1rem 1rem}.dialog-footer[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#111827;padding:1rem;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:1rem;z-index:10}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}  .mat-mdc-text-field-wrapper,   .mat-mdc-form-field-flex,   .mat-mdc-input-element,   .mat-mdc-select-trigger{background:#fff!important;border-radius:8px!important}  .mat-mdc-form-field-focus-overlay{background:transparent!important}.product-bills-section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:0}.product-bills-section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#5091f3;border-bottom:1px solid #ddd;font-weight:600}.product-bills-section[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.product-bills-section[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{max-height:300px;overflow:hidden;border:1px solid #ddd;border-radius:8px;transition:all .4s cubic-bezier(.4,0,.2,1)}.product-bills-section[_ngcontent-%COMP%]   .table-responsive.expanded[_ngcontent-%COMP%]{overflow-y:auto}.product-bills-section[_ngcontent-%COMP%]   .table-body-transition[_ngcontent-%COMP%]{transition:all .3s ease}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:all .4s cubic-bezier(.4,0,.2,1);max-height:60px;overflow:hidden}.product-bills-section[_ngcontent-%COMP%]   tr.hidden-row[_ngcontent-%COMP%]{opacity:0;transform:translateY(-20px);max-height:0;padding:0;margin:0;border:none}.product-bills-section[_ngcontent-%COMP%]   tr.hidden-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;border:none;height:0;line-height:0}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(4){transition-delay:.05s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(5){transition-delay:.1s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(6){transition-delay:.15s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(7){transition-delay:.2s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(8){transition-delay:.25s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(9){transition-delay:.3s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(10){transition-delay:.35s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(11){transition-delay:.4s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(12){transition-delay:.45s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(13){transition-delay:.5s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(14){transition-delay:.55s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(15){transition-delay:.6s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(16){transition-delay:.65s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(17){transition-delay:.7s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(18){transition-delay:.75s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(19){transition-delay:.8s}.product-bills-section[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(20){transition-delay:.85s}.product-bills-section[_ngcontent-%COMP%]   .expand-emoji-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:50%;width:40px;height:40px;font-size:18px;cursor:pointer;box-shadow:0 4px 15px #0003;transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_flasher 2s infinite;position:relative;overflow:hidden}.product-bills-section[_ngcontent-%COMP%]   .expand-emoji-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;transition:transform .3s cubic-bezier(.4,0,.2,1)}.product-bills-section[_ngcontent-%COMP%]   .expand-emoji-btn[_ngcontent-%COMP%]:hover{animation-play-state:paused;box-shadow:0 6px 20px #0000004d}@keyframes _ngcontent-%COMP%_flasher{0%{box-shadow:0 4px 15px #0003;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}25%{box-shadow:0 4px 15px #007bff66;background:linear-gradient(135deg,#007bff 0%,#0056b3 100%)}50%{box-shadow:0 4px 15px #28a74566;background:linear-gradient(135deg,#28a745 0%,#1e7e34 100%)}}.product-bills-section[_ngcontent-%COMP%]{transition:all .3s ease;overflow:hidden}']}),i})();var ln=g(445),W=g(7331);function sn(i,a){1&i&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CHOOSE_CHILDREN_PLACEHOLDER")," "))}function cn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"mat-chip",26),t.NdJ("removed",function(){const n=t.CHM(r).$implicit,l=t.oxw(2);return t.KtG(l.removeChild(n))}),t._uU(1),t.TgZ(2,"mat-icon",27),t._uU(3,"cancel"),t.qZA()()}if(2&i){const r=a.$implicit,e=t.oxw(2);t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e.getChildNameById(r)," ")}}function dn(i,a){if(1&i&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const r=t.oxw(2);t.xp6(1),t.AsE(" +",r.selectedChildIds.length-2," ",t.lcZ(2,2,"MORE_SELECTED")," ")}}function pn(i,a){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,cn,4,2,"mat-chip",24),t.YNc(2,dn,3,4,"span",25),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.selectedChildIds.slice(0,2)),t.xp6(1),t.Q6J("ngIf",r.selectedChildIds.length>2)}}function gn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(o){return t.CHM(r),t.oxw().clearFilter(),t.KtG(o.stopPropagation())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function un(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",r.name," ")}}function hn(i,a){1&i&&(t.TgZ(0,"div",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" \u{1f614} ",t.lcZ(2,1,"NO_RESULTS")," "))}function _n(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CHILD_NAME_REQUIRED")," "))}function fn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NAME_TOO_SHORT")," "))}function mn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BIRTH_DATE_REQUIRED")," "))}function bn(i,a){if(1&i&&(t.TgZ(0,"span",49),t._uU(1),t.qZA()),2&i){const r=t.oxw().index,e=t.oxw(2);let o;t.xp6(1),t.hij(" \u{1f4c5} \u0627\u0644\u0639\u0645\u0631: ",e.calculateAge(null==(o=e.newChildren.at(r).get("birth_date"))?null:o.value)," ")}}function Cn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PHONE_NUMBER_REQUIRED")," "))}function xn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"INVALID_PHONE_FORMAT")," "))}function On(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.Q6J("value",r.value),t.xp6(1),t.hij(" ",r.label," ")}}function An(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"RELATIONSHIP_REQUIRED")," "))}function Zn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",50)(1,"div",51)(2,"h6",52),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",53),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw().index,s=t.oxw(2);return t.KtG(s.removePhoneNumber(l,n))}),t.ALo(6,"translate"),t.TgZ(7,"mat-icon"),t._uU(8,"remove"),t.qZA()()(),t.TgZ(9,"div",54)(10,"mat-form-field",39)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",55),t.ALo(15,"translate"),t.YNc(16,Cn,3,3,"mat-error",41),t.YNc(17,xn,3,3,"mat-error",41),t.qZA()(),t.TgZ(18,"mat-form-field",39)(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"mat-select",56),t.YNc(23,On,2,2,"mat-option",11),t.qZA(),t.YNc(24,An,3,3,"mat-error",41),t.qZA()()}if(2&i){const r=a.$implicit,e=a.index,o=t.oxw().index,n=t.oxw(2);let l,s,h;t.Q6J("formGroupName",e),t.xp6(3),t.AsE(" \u260e\ufe0f ",t.lcZ(4,12,"PHONE_NUMBER")," ",e+1," "),t.xp6(2),t.Q6J("disabled",1===n.getPhoneControls(o).length),t.uIk("aria-label",t.lcZ(6,14,"REMOVE_PHONE_NUMBER")+" "+(e+1)),t.xp6(7),t.hij("\u260e\ufe0f ",t.lcZ(13,16,"PHONE_NUMBER")," *"),t.xp6(2),t.Q6J("placeholder",t.lcZ(15,18,"PHONE_EXAMPLE")),t.xp6(2),t.Q6J("ngIf",null==(l=r.get("phone_number.value"))?null:l.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(s=r.get("phone_number.value"))?null:s.hasError("pattern")),t.xp6(3),t.hij("\u{1f465} ",t.lcZ(21,20,"RELATIONSHIP")," *"),t.xp6(3),t.Q6J("ngForOf",n.relationshipOptions),t.xp6(1),t.Q6J("ngIf",null==(h=r.get("relationship"))?null:h.hasError("required"))}}function Pn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",35)(1,"div",1)(2,"h4",36),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",37),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.removeNewChild(n))}),t.ALo(6,"translate"),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()(),t.TgZ(9,"div",38)(10,"mat-form-field",39)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",40),t.YNc(15,_n,3,3,"mat-error",41),t.YNc(16,fn,3,3,"mat-error",41),t.qZA(),t.TgZ(17,"mat-form-field",39)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",42),t.YNc(22,mn,3,3,"mat-error",41),t.qZA(),t.YNc(23,bn,2,1,"span",43),t.TgZ(24,"div",44)(25,"div",45)(26,"h5",46),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"button",47),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.addPhoneNumber(n))}),t.ALo(30,"translate"),t.ALo(31,"translate"),t.TgZ(32,"mat-icon"),t._uU(33,"add"),t.qZA()()(),t.YNc(34,Zn,25,22,"div",48),t.qZA()()()}if(2&i){const r=a.index,e=t.oxw(2);let o,n,l,s;t.Q6J("formGroupName",r),t.xp6(3),t.AsE("\u{1f476} ",t.lcZ(4,13,"NEW_CHILD")," #",r+1,""),t.xp6(2),t.uIk("aria-label",t.lcZ(6,15,"REMOVE_CHILD")+" "+(r+1)),t.xp6(7),t.hij("\u{1f4dd} ",t.lcZ(13,17,"CHILD_NAME")," *"),t.xp6(3),t.Q6J("ngIf",null==(o=e.newChildren.at(r).get("name"))?null:o.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=e.newChildren.at(r).get("name"))?null:n.hasError("minlength")),t.xp6(3),t.hij("\u{1f382} ",t.lcZ(20,19,"BIRTH_DATE")," *"),t.xp6(3),t.Q6J("ngIf",null==(l=e.newChildren.at(r).get("birth_date"))?null:l.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(s=e.newChildren.at(r).get("birth_date"))?null:s.value),t.xp6(4),t.hij(" \u{1f4f1} ",t.lcZ(28,21,"PHONE_NUMBERS_SECTION")," "),t.xp6(2),t.uIk("aria-label",t.lcZ(30,23,"ADD_PHONE_NUMBER")+" "+t.lcZ(31,25,"CHILD_NAME")+" "+(r+1)),t.xp6(5),t.Q6J("ngForOf",e.getPhoneControls(r))}}function vn(i,a){if(1&i&&(t.TgZ(0,"form",32)(1,"div",33),t.YNc(2,Pn,35,27,"div",34),t.qZA()()),2&i){const r=t.oxw();t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("ngForOf",r.newChildren.controls)}}let tt=(()=>{const a=class{constructor(e,o,n,l){this.sharedService=e,this.fb=o,this.dialogRef=n,this.toaster=l,this.childrenControl=new c.NI([]),this.discount=new c.NI(""),this.itemList=[],this.filteredChildren=[],this.selectedChildIds=[],this.selectedChildren=[],this.persistentSelectedChildren=[],this.searchValue="",this.label="\u0627\u0644\u0623\u0637\u0641\u0627\u0644",this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.branch=JSON.parse(localStorage.getItem("branch")||"{}"),this.relationshipOptions=[{value:"father",label:"\u0623\u0628"},{value:"mother",label:"\u0623\u0645"},{value:"sibling",label:"\u0623\u062e / \u0623\u062e\u062a"},{value:"other",label:"\u0623\u062e\u0631\u0649"}]}ngOnInit(){this.initializeForm(),this.setupChildrenControlSubscription(),this.loadChildren()}ngOnDestroy(){this.searchTimeout&&clearTimeout(this.searchTimeout)}initializeForm(){this.form=this.fb.group({new_children:this.fb.array([])})}setupChildrenControlSubscription(){this.childrenControl.valueChanges.subscribe(e=>{this.selectedChildIds=e||[],this.updateSelectedChildren()})}get newChildren(){return this.form.get("new_children")}loadChildren(e){const o=e?.trim()||"\u0634\u0628\u0627";this.sharedService.getAllNonActiveChildren(o).subscribe({next:n=>{this.itemList=this.mergeWithPersistentSelected(n),this.filteredChildren=[...this.itemList]},error:n=>{console.error("Failed to load children:",n),this.toaster.error("\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0637\u0641\u0627\u0644")}})}mergeWithPersistentSelected(e){const o=[...e];return this.persistentSelectedChildren.forEach(n=>{o.find(l=>l.id===n.id)||o.push(n)}),o}updateSelectedChildren(){const e=[...this.itemList,...this.persistentSelectedChildren];this.selectedChildren=this.selectedChildIds.map(o=>e.find(n=>n.id===o)).filter(o=>void 0!==o),this.selectedChildren.forEach(o=>{this.persistentSelectedChildren.find(n=>n.id===o.id)||this.persistentSelectedChildren.push(o)}),this.persistentSelectedChildren=this.persistentSelectedChildren.filter(o=>this.selectedChildIds.includes(o.id))}combineWithSelectedChildren(e){const o=[...e];return this.selectedChildren.forEach(n=>{o.find(l=>l.id===n.id)||o.push(n)}),o}addNewChild(){const e=this.createChildFormGroup();this.newChildren.push(e)}removeNewChild(e){e>=0&&e<this.newChildren.length&&this.newChildren.removeAt(e)}createChildFormGroup(){return this.fb.group({name:["",[c.kI.required,c.kI.minLength(2)]],birth_date:["",c.kI.required],child_phone_numbers_set:this.fb.array([this.createPhoneNumberGroup()])})}addPhoneNumber(e){const o=this.getPhoneNumbersArray(e);o&&o.push(this.createPhoneNumberGroup())}removePhoneNumber(e,o){const n=this.getPhoneNumbersArray(e);n&&n.length>1&&n.removeAt(o)}createPhoneNumberGroup(){return this.fb.group({phone_number:this.fb.group({value:["",[c.kI.required,c.kI.pattern(/^[0-9+\-\s()]+$/)]]}),relationship:["",c.kI.required]})}getPhoneNumbersArray(e){return this.newChildren.at(e)?.get("child_phone_numbers_set")}getPhoneControls(e){return this.getPhoneNumbersArray(e)?.controls||[]}getChildNameById(e){return[...this.itemList,...this.persistentSelectedChildren].find(l=>l.id===e)?.name||""}onFilterChange(e){this.searchValue=e,this.performSearch()}onSearchInput(e){if(this.searchValue=e.target.value,this.searchTimeout&&clearTimeout(this.searchTimeout),!this.searchValue.trim())return this.itemList=[...this.persistentSelectedChildren],void(this.filteredChildren=[...this.persistentSelectedChildren]);this.searchTimeout=setTimeout(()=>{this.performSearch()},500)}performSearch(){this.loadChildren(this.searchValue)}clearFilter(){this.searchValue="",this.searchTimeout&&clearTimeout(this.searchTimeout),this.itemList=[...this.persistentSelectedChildren],this.filteredChildren=[...this.persistentSelectedChildren]}isAllSelected(){return this.filteredChildren.length>0&&this.filteredChildren.every(e=>this.selectedChildIds.includes(e.id))}toggleSelectAll(){if(this.isAllSelected()){const e=this.selectedChildIds.filter(o=>!this.filteredChildren.some(n=>n.id===o));this.childrenControl.setValue(e)}else{const e=[...new Set([...this.selectedChildIds,...this.filteredChildren.map(o=>o.id)])];this.childrenControl.setValue(e)}}childClicked(e){const o=this.selectedChildIds,n=this.itemList.find(l=>l.id===e);o.includes(e)?this.childrenControl.setValue(o.filter(l=>l!==e)):(n&&!this.persistentSelectedChildren.find(l=>l.id===e)&&this.persistentSelectedChildren.push(n),this.childrenControl.setValue([...o,e]))}removeChild(e){const o=this.selectedChildIds.filter(n=>n!==e);this.childrenControl.setValue(o),this.persistentSelectedChildren=this.persistentSelectedChildren.filter(n=>n.id!==e)}validateForm(){return this.form.invalid?(this.form.markAllAsTouched(),this.toaster.error("\u064a\u0631\u062c\u0649 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0623\u062e\u0637\u0627\u0621 \u0641\u064a \u0627\u0644\u0646\u0645\u0648\u0630\u062c"),!1):0!==this.selectedChildIds.length||0!==this.newChildren.length||(this.toaster.error("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0637\u0641\u0644 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0623\u0648 \u0625\u0646\u0634\u0627\u0621 \u0637\u0641\u0644 \u062c\u062f\u064a\u062f"),!1)}getPayload(){const e=this.selectedChildIds.length>0?this.selectedChildIds:void 0,o=this.discount.value,n=this.buildNewChildrenPayload(),l=this.getBranchId();return console.log("this.discount.value",this.discount.value),{...e&&{children:e},...n.length>0&&{new_children:n},...o?{discount:o}:{},branch:l}}buildNewChildrenPayload(){return this.newChildren.controls.map(e=>{const{name:o,birth_date:n}=e.value;return{name:o,birth_date:n,child_phone_numbers_set:e.get("child_phone_numbers_set").controls.map(s=>({phone_number:{value:s.get("phone_number.value")?.value},relationship:s.get("relationship")?.value}))}})}getBranchId(){return this.userInfo.branch_id??this.branch.id}onClose(){this.dialogRef.close()}onSubmit(){if(!this.validateForm())return;const e=this.getPayload();this.sharedService.createBill(e).subscribe({next:o=>{this.toaster.success(o.message||"\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d"),this.dialogRef.close(!0)},error:o=>{console.error("Failed to create bill:",o),this.toaster.error("\u0641\u0634\u0644 \u0641\u064a \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}})}getErrorMessage(e,o){let n;return n=void 0!==o?this.newChildren.at(o).get(e):this.form.get(e),n?.hasError("required")?"\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628":n?.hasError("minlength")?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0646\u0635 \u0623\u0637\u0648\u0644 \u0645\u0646 \u062d\u0631\u0641\u064a\u0646":n?.hasError("pattern")?"\u062a\u0646\u0633\u064a\u0642 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d":""}onSearchKeydown(e){(" "===e.key||"Space"===e.code)&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),e.stopPropagation()),"Escape"===e.key&&this.searchValue&&(e.stopPropagation(),this.clearFilter())}calculateAge(e){if(!e)return"";const o=new Date(e),n=new Date;let l=n.getFullYear()-o.getFullYear(),s=n.getMonth()-o.getMonth();return s<0&&(l--,s+=12),n.getDate()<o.getDate()&&(s--,s<0&&(l--,s+=12)),0===l?1===s?`${s} \u0634\u0647\u0631`:`${s} \u0623\u0634\u0647\u0631`:0===s?1===l?`${l} \u0633\u0646\u0629`:`${l} \u0633\u0646\u0648\u0627\u062a`:`${l} ${1===l?"\u0633\u0646\u0629":"\u0633\u0646\u0648\u0627\u062a"} \u0648 ${s} ${1===s?"\u0634\u0647\u0631":"\u0623\u0634\u0647\u0631"}`}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(k),t.Y36(c.qu),t.Y36(u.so),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-bill-dialog"]],decls:48,vars:35,consts:[[1,"dialog-container","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"dialog-header","m-0"],["mat-icon-button","","color","warn",3,"click"],[1,"dialog-body"],["appearance","outline",2,"width","100%"],["multiple","",3,"formControl"],["class","placeholder-text",4,"ngIf","ngIfElse"],["selectedContent",""],["matInput","",3,"ngModel","placeholder","ngModelChange","input","keydown","click"],["style","position: absolute; left: -10px; top: 5px","mat-icon-button","",3,"click",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["style","padding: 16px; text-align: center; color: #666",4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","",3,"placeholder","formControl"],["matSuffix",""],[1,"mb-3"],["mat-raised-button","","color","primary",3,"click"],[3,"formGroup",4,"ngIf"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"placeholder-text"],[1,"selected-children-display"],["class","selected-chip",3,"removable","removed",4,"ngFor","ngForOf"],["class","additional-count",4,"ngIf"],[1,"selected-chip",3,"removable","removed"],["matChipRemove",""],[1,"additional-count"],["mat-icon-button","",2,"position","absolute","left","-10px","top","5px",3,"click"],[3,"value"],[2,"padding","16px","text-align","center","color","#666"],[3,"formGroup"],["formArrayName","new_children",1,"children-grid-container"],["class","child-card-horizontal p-3 border rounded mb-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"child-card-horizontal","p-3","border","rounded","mb-3",3,"formGroupName"],[1,"mb-0"],["mat-icon-button","","color","warn","type","button",3,"click"],[1,"child-content-horizontal"],["appearance","outline",1,"form-field-compact"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","birth_date","type","date"],["class","text-muted small d-block mt-1 mb-2","style","\n                font-size: 0.875rem;\n                color: white !important;\n                font-family: 'Noto Kufi Arabic', sans-serif;\n              ",4,"ngIf"],["formArrayName","child_phone_numbers_set",1,"phone-section-compact"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0","phone-section-title"],["mat-mini-fab","","color","primary","type","button",3,"click"],["class","phone-group-compact mb-2 p-2 border rounded",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-muted","small","d-block","mt-1","mb-2",2,"font-size","0.875rem","color","white !important","font-family","'Noto Kufi Arabic', sans-serif"],[1,"phone-group-compact","mb-2","p-2","border","rounded",3,"formGroupName"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"mb-0","phone-number-title"],["mat-icon-button","","color","warn","type","button",3,"disabled","click"],["formGroupName","phone_number"],["matInput","","formControlName","value","dir","ltr",3,"placeholder"],["formControlName","relationship"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11),t.qZA(),t.TgZ(12,"mat-select",6)(13,"mat-select-trigger"),t.YNc(14,sn,3,3,"div",7),t.YNc(15,pn,3,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(17,"mat-form-field",5)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"input",9),t.NdJ("ngModelChange",function(s){return n.searchValue=s})("input",function(s){return n.onSearchInput(s)})("keydown",function(s){return n.onSearchKeydown(s)})("click",function(s){return s.stopPropagation()}),t.ALo(22,"translate"),t.qZA(),t.YNc(23,gn,3,0,"button",10),t.qZA(),t.YNc(24,un,2,2,"mat-option",11),t.YNc(25,hn,3,3,"div",12),t.qZA()(),t.TgZ(26,"mat-form-field",13)(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",14),t.ALo(31,"translate"),t.TgZ(32,"mat-icon",15),t._uU(33,"local_offer"),t.qZA()(),t.TgZ(34,"div",16)(35,"button",17),t.NdJ("click",function(){return n.addNewChild()}),t.TgZ(36,"mat-icon"),t._uU(37,"add"),t.qZA(),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t.YNc(40,vn,3,2,"form",18),t.qZA(),t.TgZ(41,"mat-dialog-actions",19)(42,"button",20),t.NdJ("click",function(){return n.onClose()}),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"button",21),t.NdJ("click",function(){return n.onSubmit()}),t._uU(46),t.ALo(47,"translate"),t.qZA()()()),2&o){const l=t.MAs(16);t.xp6(3),t.hij("\u{1f9d2} ",t.lcZ(4,19,"CREATE_BILL"),""),t.xp6(8),t.Oqu(n.label),t.xp6(1),t.Q6J("formControl",n.childrenControl),t.xp6(2),t.Q6J("ngIf",0===n.selectedChildIds.length)("ngIfElse",l),t.xp6(5),t.hij("\u{1f50d} ",t.lcZ(20,21,"SEARCH_CHILD"),""),t.xp6(2),t.Q6J("ngModel",n.searchValue)("placeholder",t.lcZ(22,23,"SEARCH_CHILD")),t.xp6(2),t.Q6J("ngIf",n.searchValue),t.xp6(1),t.Q6J("ngForOf",n.filteredChildren),t.xp6(1),t.Q6J("ngIf",0===n.filteredChildren.length),t.xp6(3),t.Oqu(t.lcZ(29,25,"PROMO_CODE")),t.xp6(2),t.s9C("placeholder",t.lcZ(31,27,"ENTER_PROMO_CODE")),t.Q6J("formControl",n.discount),t.xp6(8),t.hij(" \u{1f476} ",t.lcZ(39,29,"CREATE_NEW_CHILD")," "),t.xp6(2),t.Q6J("ngIf",n.newChildren.length>0),t.xp6(3),t.hij(" ",t.lcZ(44,31,"CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.form.invalid&&n.newChildren.length>0),t.xp6(1),t.hij(" ",t.lcZ(47,33,"SAVE")," ")}},dependencies:[d.sg,d.O5,u.H8,ln.Lv,c._Y,c.Fj,c.JJ,c.JL,c.On,v.Hw,I.ey,W.HS,W.qH,f.KE,f.hX,f.TO,f.R9,D.Nt,S.gD,S.$L,C.lW,C.RK,C.nh,c.oH,c.sg,c.u,c.x0,c.CE,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:16px!important;padding:0!important;background:#111827!important;direction:rtl;max-height:90vh!important;color:#f3f4f6;display:flex;flex-direction:column;scrollbar-width:none;-ms-overflow-style:none}  .mat-mdc-dialog-surface::-webkit-scrollbar{width:0;height:0}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#111827;height:100%;min-height:500px}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;flex-direction:column;gap:1rem;flex:1;overflow-y:auto;padding:0 1rem 1rem}.dialog-footer[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#111827;padding:1rem;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:1rem;z-index:10}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}.children-grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1rem}@media (min-width: 1200px){.children-grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.child-card-horizontal[_ngcontent-%COMP%]{background-color:#111827;border:1px solid #e9ecef;transition:box-shadow .2s ease;min-height:400px;display:flex;flex-direction:column}.child-card-horizontal[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.child-content-horizontal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;flex:1}.form-field-compact[_ngcontent-%COMP%]{width:100%!important}.form-field-compact[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding-bottom:.5rem}.phone-section-compact[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.phone-section-compact[_ngcontent-%COMP%]   .phone-section-title[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}.phone-group-compact[_ngcontent-%COMP%]{background-color:#111827;border:1px solid #dee2e6;border-radius:6px}.phone-group-compact[_ngcontent-%COMP%]   .phone-number-title[_ngcontent-%COMP%]{font-size:.8rem;color:#f3f4f6;font-family:Noto Kufi Arabic,sans-serif}  .mat-mdc-text-field-wrapper,   .mat-mdc-form-field-flex,   .mat-mdc-input-element,   .mat-mdc-select-trigger{background:#fff!important;border-radius:8px!important}  .mat-mdc-form-field-focus-overlay{background:transparent!important}  .mat-ripple .mat-mdc-button-ripple{display:none!important}.dialog-header[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif;font-weight:600;color:#f3f4f6}.child-card[_ngcontent-%COMP%]{background-color:#111827;border:1px solid #e9ecef;transition:box-shadow .2s ease}.child-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.phone-group[_ngcontent-%COMP%]{background-color:#111827;border:1px solid #dee2e6;border-radius:8px}.phone-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f3f4f6;font-family:Noto Kufi Arabic,sans-serif}.selected-children-display[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:4px;max-width:100%;overflow:hidden}.selected-chip[_ngcontent-%COMP%]{font-size:12px;height:24px;line-height:24px;border-radius:12px}.selected-chip[_ngcontent-%COMP%]     .mat-mdc-chip-remove{width:16px;height:16px;font-size:14px}.additional-count[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:500;margin-left:4px}.placeholder-text[_ngcontent-%COMP%]{color:#999;font-style:italic}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.85em}  .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-text-field-wrapper{border:1px solid #f44336!important}  .mat-mdc-chip{font-family:Noto Kufi Arabic,sans-serif;border-radius:16px}  .mat-mdc-chip .mat-mdc-chip-remove{margin-left:4px}.mat-mdc-raised-button[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif;border-radius:8px;box-shadow:0 2px 4px #0000001a}.mat-mdc-raised-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000026}  .mat-mdc-select-panel{border-radius:8px;max-height:300px}  .mat-mdc-option{font-family:Noto Kufi Arabic,sans-serif;display:flex;align-items:center;justify-content:space-between}  .mat-mdc-option:hover{background-color:#0000000a}  .mat-mdc-option.mat-mdc-option-active{background-color:#1976d21f}.dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.dialog-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){  .mat-mdc-dialog-surface{max-height:95vh!important;margin:8px}.children-grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog-body[_ngcontent-%COMP%]{padding:0 .5rem .5rem;gap:.75rem}.child-card-horizontal[_ngcontent-%COMP%]{padding:.75rem;min-height:auto}.phone-group-compact[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 480px){.children-grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.child-card-horizontal[_ngcontent-%COMP%]{min-height:auto}}"]}),i})();var E=g(1572);function Mn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"FIELD_REQUIRED")," "))}function yn(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PROMO_CODE_TOO_SHORT")," "))}function Tn(i,a){if(1&i&&(t.TgZ(0,"div",15)(1,"mat-icon"),t._uU(2,"check_circle"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw();t.xp6(3),t.hij(" ",r.successMessage," ")}}function Dn(i,a){if(1&i&&(t.TgZ(0,"div",16)(1,"mat-icon"),t._uU(2,"error"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw();t.xp6(3),t.hij(" ",r.errorMessage," ")}}function wn(i,a){1&i&&(t.TgZ(0,"div",17),t._UZ(1,"mat-spinner",18),t.TgZ(2,"p",19),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"APPLYING_PROMO_CODE")))}function In(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"local_offer"),t.qZA())}let J=(()=>{const a=class{constructor(e,o,n,l,s,h){this.fb=e,this.http=o,this.dialogRef=n,this.data=l,this.sharedService=s,this.toaster=h,this.isLoading=!1,this.successMessage="",this.errorMessage=""}ngOnInit(){this.initializeForm()}initializeForm(){this.promoForm=this.fb.group({discount:["",[c.kI.required,c.kI.minLength(3)]]})}onSubmit(){this.promoForm.valid&&!this.isLoading&&this.applyPromoCode()}applyPromoCode(){this.isLoading=!0,this.errorMessage="",this.successMessage="";const e=this.promoForm.get("discount")?.value;this.sharedService.ApplyPromoCode(this.data.billId,e).subscribe({next:n=>{this.isLoading=!1,this.successMessage="Promo code applied successfully!",this.toaster.success(n.message),this.dialogRef.close({success:!0,response:n})},error:n=>{}})}onClose(){this.dialogRef.close({success:!1})}onPromoCodeChange(){this.errorMessage="",this.successMessage=""}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(O.eN),t.Y36(u.so),t.Y36(u.WI),t.Y36(k),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-promo-code-dialog"]],decls:30,vars:25,consts:[[1,"dialog-container","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"dialog-header","m-0"],["mat-icon-button","","color","warn",3,"click"],[1,"dialog-body",3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","discount",3,"placeholder"],["matSuffix",""],[4,"ngIf"],["class","alert alert-success mt-2",4,"ngIf"],["class","alert alert-danger mt-2",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"alert","alert-success","mt-2"],[1,"alert","alert-danger","mt-2"],[1,"text-center","mt-3"],["diameter","30"],[1,"mt-2"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",6),t.ALo(14,"translate"),t.TgZ(15,"mat-icon",7),t._uU(16,"local_offer"),t.qZA(),t.YNc(17,Mn,3,3,"mat-error",8),t.YNc(18,yn,3,3,"mat-error",8),t.qZA(),t.YNc(19,Tn,4,1,"div",9),t.YNc(20,Dn,4,1,"div",10),t.YNc(21,wn,5,3,"div",11),t.qZA(),t.TgZ(22,"mat-dialog-actions",12)(23,"button",13),t.NdJ("click",function(){return n.onClose()}),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"button",14),t.NdJ("click",function(){return n.onSubmit()}),t.YNc(27,In,2,0,"mat-icon",8),t._uU(28),t.ALo(29,"translate"),t.qZA()()()),2&o){let l,s,h;t.xp6(3),t.hij("",t.lcZ(4,15,"APPLY_PROMO_CODE")," \u{1f4b8}"),t.xp6(5),t.Q6J("formGroup",n.promoForm),t.xp6(3),t.Oqu(t.lcZ(12,17,"PROMO_CODE")),t.xp6(2),t.ekj("mat-form-field-invalid",(null==(l=n.promoForm.get("discount"))?null:l.invalid)&&(null==(l=n.promoForm.get("discount"))?null:l.touched)),t.s9C("placeholder",t.lcZ(14,19,"ENTER_PROMO_CODE")),t.xp6(4),t.Q6J("ngIf",null==(s=n.promoForm.get("discount"))?null:s.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(h=n.promoForm.get("discount"))?null:h.hasError("minlength")),t.xp6(1),t.Q6J("ngIf",n.successMessage),t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(3),t.hij(" ",t.lcZ(25,21,"CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.promoForm.invalid||n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.hij(" ",t.lcZ(29,23,"APPLY_PROMO")," ")}},dependencies:[d.O5,u.H8,c.Fj,c.JJ,c.JL,v.Hw,E.Ou,f.KE,f.hX,f.TO,f.R9,D.Nt,C.lW,C.RK,c.sg,c.u,p.X$],styles:['@charset "UTF-8";body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:16px!important;padding:0!important;background:#111827!important;direction:rtl;max-height:80vh!important;color:#f3f4f6;display:flex;flex-direction:column;scrollbar-width:none;-ms-overflow-style:none}  .mat-mdc-dialog-surface::-webkit-scrollbar{width:0;height:0}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;flex-direction:column;gap:1rem;flex:1;overflow-y:auto;padding:0 1rem 1rem}.dialog-footer[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#111827;padding:1rem;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:1rem;z-index:10}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}  .mat-mdc-text-field-wrapper,   .mat-mdc-form-field-flex,   .mat-mdc-input-element,   .mat-mdc-select-trigger{background:#fff!important;border-radius:8px!important}  .mat-mdc-form-field-focus-overlay{background:transparent!important}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;display:flex;align-items:center;gap:8px;font-size:14px}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.alert.alert-success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#28a745}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.alert.alert-danger[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#dc3545}.text-center[_ngcontent-%COMP%]{text-align:center}.text-center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#f3f4f6}  .mat-mdc-form-field .mat-mdc-form-field-icon-suffix{color:#6c757d}  .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-text-field-wrapper{border:2px solid #dc3545!important}.dialog-header[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;font-weight:600;color:#f3f4f6}']}),i})();function kn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",18),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()}if(2&i){const r=t.oxw();t.ekj("disabled-filter",r.isLoading)}}function En(i,a){if(1&i&&(t.TgZ(0,"div",19)(1,"span",20),t._uU(2),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.hij(" \u23f0 ",r.getDateRangeInArabic()," ")}}function qn(i,a){1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"mat-spinner",23),t.qZA()())}const Un=function(){return["NAME","PHONE_NUMBER","SPENT_TIME","CHILDREN_COUNT","BRANCH"]};let Ln=(()=>{const a=class{constructor(e,o,n,l,s){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.toaster=s,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.isLoading=!1,this.selectedDateRange={start:null,end:null},this.type="/",this.totalItems=0,this.currentPage=1,this.selectedBranchIds=[],this.searchQuery="",this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("PHONE_NUMBER"),this.translate.instant("SPENT_TIME"),this.translate.instant("CHILDREN_COUNT"),this.translate.instant("BRANCH")],this.billsRes=[]}ngOnInit(){const e=new Date,o=new Date;o.setDate(e.getDate()-1),this.selectedDateRange.start=o,this.selectedDateRange.end=e,this.params.startDate=this.formatDateForAPI(o),this.params.endDate=this.formatDateForAPI(e),this.getAllBills(this.type,this.params)}getAllBills(e="/",o){this.isLoading=!0,this.dashboardService.getChildrenBills(e,o).subscribe({next:n=>{this.billsRes=n.results.map(l=>({NAME:l?.first_child,PHONE_NUMBER:l?.first_phone,SPENT_TIME:this.getSpentTimeFormatted(l.spent_time),BRANCH:l.branch,BILLS_ID:l.id,isActive:l.is_active,DISCOUNT_VALUE:Number(l.discount_value),CHILDREN_COUNT:l.children_count})),this.totalItems=n.count,this.currentPage=o.page,this.isLoading=!1},error:n=>{console.error("Error fetching bills:",n),this.isLoading=!1}})}getSpentTimeFormatted(e){const o=Math.floor(e/60),n=e%60,l=o>0?`${o} \u0633\u0627\u0639\u0629`:"",s=n>0?`${n} \u062f\u0642\u064a\u0642\u0629`:"";return l&&s?`${l} \u0648${s}`:l||s||"0 \u062f\u0642\u064a\u0642\u0629"}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.formatDateForAPI(e),endDate:this.formatDateForAPI(o),page:1},this.getAllBills(this.type,this.params))}searchExpense(e){this.params={searchQuery:e,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}getDateRangeInArabic(){if(!this.selectedDateRange.start||!this.selectedDateRange.end)return"";const e=["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0627\u062b\u0646\u064a\u0646","\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062e\u0645\u064a\u0633","\u0627\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],o=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];return`\u0645\u0646 ${e[this.selectedDateRange.start.getDay()]} ${this.selectedDateRange.start.getDate()} ${o[this.selectedDateRange.start.getMonth()]} ${this.selectedDateRange.start.getFullYear()} \u0625\u0644\u0649 ${e[this.selectedDateRange.end.getDay()]} ${this.selectedDateRange.end.getDate()} ${o[this.selectedDateRange.end.getMonth()]} ${this.selectedDateRange.end.getFullYear()}`}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToBillProfile(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/bills/child",e.BILLS_ID]));window.open(o,"_blank")}openCloseBillDialog(e){this.dashboardService.getChildBillById(e.BILLS_ID).subscribe(o=>{this.dialog.open(V,{data:o}).afterClosed().subscribe(l=>{l&&this.dashboardService.closeBill(e.BILLS_ID,l).subscribe(s=>{this.toaster.success(s.message);const h=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/bills/child",e.BILLS_ID]));window.open(h,"_blank")})})})}pageChanged(e){this.params.page=e,this.getAllBills(this.type,this.params)}openCreateBillDialog(){this.dialog.open(tt,{width:"90vw",maxWidth:"1200px",height:"auto",maxHeight:"90vh",disableClose:!0,data:{}}).afterClosed().subscribe(o=>{o&&this.getAllBills(this.type,this.params)})}openPromoDialog(e){this.dialog.open(J,{width:"500px",disableClose:!1,data:{billId:e.BILLS_ID}}).afterClosed().subscribe(n=>{n?.success&&this.getAllBills(this.type,this.params)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-children-bills"]],decls:29,vars:41,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0641\u0627\u062a\u0648\u0631\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","disabled","ngModelChange","input"],[1,"d-flex","justify-content-start","align-items-center","mt-4","position-relative"],[3,"disabled-filter","selectedBranchesChange",4,"ngIf"],["appearance","fill",1,"mx-3"],[3,"rangePicker","disabled"],["matStartDate","",3,"placeholder","disabled","value","dateChange"],["matEndDate","",3,"placeholder","disabled","value","dateChange"],["matSuffix","",3,"for","disabled"],[3,"disabled"],["picker",""],["class","mt-2 date-wrapper",4,"ngIf"],[1,"dialog-button",3,"disabled","click"],[1,"table-container","position-relative"],["class","table-loader-overlay",4,"ngIf"],[3,"displayedColumns","data","isActiveBills","paginationType","totalItems","currentPage","itemClicked","editClicked","promoClicked","pageChange"],[3,"selectedBranchesChange"],[1,"mt-2","date-wrapper"],[1,"date-range-arabic"],[1,"table-loader-overlay"],[1,"spinner-container","d-flex","justify-content-center","mb-4"],["diameter","40"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,kn,1,2,"app-branch-multi-select",5),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-date-range-input",7)(14,"input",8),t.NdJ("dateChange",function(s){return n.onStartDateChange(s.value)}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",9),t.NdJ("dateChange",function(s){return n.onEndDateChange(s.value)}),t.ALo(17,"translate"),t.qZA()(),t._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",11,12),t.qZA()(),t.YNc(21,En,3,1,"div",13),t.qZA(),t.TgZ(22,"div")(23,"button",14),t.NdJ("click",function(){return n.openCreateBillDialog()}),t._uU(24),t.ALo(25,"translate"),t.qZA()()()(),t.TgZ(26,"div",15),t.YNc(27,qn,3,0,"div",16),t.TgZ(28,"app-data-table",17),t.NdJ("itemClicked",function(s){return n.goToBillProfile(s)})("editClicked",function(s){return n.openCloseBillDialog(s)})("promoClicked",function(s){return n.openPromoDialog(s)})("pageChange",function(s){return n.pageChanged(s)}),t.qZA()()),2&o){const l=t.MAs(20);t.xp6(4),t.hij("",t.lcZ(5,30,"ALL_CHILD_BILLS")," ... \u{1f9fe}"),t.xp6(2),t.Q6J("ngModel",n.searchQuery)("disabled",n.isLoading),t.xp6(2),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(1),t.ekj("disabled-filter",n.isLoading),t.xp6(2),t.Oqu(t.lcZ(12,32,"SELECT_DATE_RANGE")),t.xp6(2),t.Q6J("rangePicker",l)("disabled",n.isLoading),t.xp6(1),t.Q6J("placeholder",t.lcZ(15,34,"START_DATE"))("disabled",n.isLoading)("value",n.selectedDateRange.start),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,36,"END_DATE"))("disabled",n.isLoading)("value",n.selectedDateRange.end),t.xp6(2),t.Q6J("for",l)("disabled",n.isLoading),t.xp6(1),t.Q6J("disabled",n.isLoading),t.xp6(2),t.Q6J("ngIf",n.selectedDateRange.start&&n.selectedDateRange.end),t.xp6(2),t.Q6J("disabled",n.isLoading),t.xp6(1),t.hij(" + ",t.lcZ(25,38,"CREATE")," "),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.ekj("loading-state",n.isLoading),t.Q6J("displayedColumns",t.DdM(40,Un))("data",n.billsRes)("isActiveBills",!0)("paginationType","server")("totalItems",n.totalItems)("currentPage",n.currentPage)}},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,E.Ou,b.nW,b.wx,b.zY,b.By,b._g,f.KE,f.hX,f.R9,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;cursor:not-allowed}[_ngcontent-%COMP%]:focus{outline:none}  .mat-calendar-body-selected{background-color:#004953}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700;transition:all .3s ease}.dialog-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#001c20}.dialog-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed;opacity:.6}.table-container[_ngcontent-%COMP%]{margin-top:2rem}.disabled-filter[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.disabled-filter[_ngcontent-%COMP%]     .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#f5f5f5}.loading-state[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}  .mat-spinner circle{stroke:#004953}.date-wrapper[_ngcontent-%COMP%]{background-color:#4caf50;border-radius:10px;padding:10px;width:-moz-fit-content;width:fit-content}.date-range-arabic[_ngcontent-%COMP%]{left:0;right:0;color:#fff;font-size:14px!important;font-size:.85rem;font-weight:500;text-align:center;direction:rtl;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 768px){.loading-text[_ngcontent-%COMP%]{font-size:.9rem}}"]}),i})();function Nn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",7)(1,"app-branch-multi-select",8),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()()}}const Sn=function(){return["NAME","PHONE_NUMBER","SPENT_TIME","CHILDREN_COUNT","BRANCH"]};let Bn=(()=>{const a=class{constructor(e,o,n,l,s){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.toaster=s,this.selectedDateRange={start:null,end:null},this.type="/active/",this.selectedBranchIds=[],this.page=1,this.searchQuery="",this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null},this.displayedColumns=[this.translate.instant("NAME"),this.translate.instant("PHONE_NUMBER"),this.translate.instant("SPENT_TIME"),this.translate.instant("CHILDREN_COUNT"),this.translate.instant("BRANCH")],this.billsRes=[]}ngOnInit(){this.getAllBills(this.type,this.params)}getAllBills(e="/active/",o){this.dashboardService.getChildrenBills(e,o).subscribe({next:n=>{this.billsRes=n.map(l=>({NAME:l?.first_child,PHONE_NUMBER:l?.first_phone,SPENT_TIME:this.getSpentTimeFormatted(l.spent_time),BRANCH:l.branch,BILLS_ID:l.id,isActive:l.is_active,DISCOUNT_VALUE:Number(l.discount_value),CHILDREN_COUNT:l.children_count}))}})}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}getSpentTimeFormatted(e){const o=Math.floor(e/60),n=e%60,l=o>0?`${o} \u0633\u0627\u0639\u0629`:"",s=n>0?`${n} \u062f\u0642\u064a\u0642\u0629`:"";return l&&s?`${l} \u0648${s}`:l||s||"0 \u062f\u0642\u064a\u0642\u0629"}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.formatDateForAPI(e),endDate:this.formatDateForAPI(o)},this.getAllBills(this.type,this.params))}searchExpense(e){this.params={searchQuery:e,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null},this.getAllBills(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null},this.getAllBills(this.type,this.params)}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToBillProfile(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/bills/child",e.BILLS_ID]));window.open(o,"_blank")}openCloseBillDialog(e){this.dashboardService.getChildBillById(e.BILLS_ID).subscribe(o=>{this.dialog.open(V,{data:o}).afterClosed().subscribe(l=>{l&&this.dashboardService.closeBill(e.BILLS_ID,l).subscribe(s=>{this.toaster.success(s.message);const h=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/bills/child",e.BILLS_ID]));window.open(h,"_blank")})})})}openCreateBillDialog(){this.dialog.open(tt,{width:"90vw",maxWidth:"1200px",height:"auto",maxHeight:"90vh",disableClose:!0,data:{}}).afterClosed().subscribe(o=>{o&&this.getAllBills(this.type,this.params)})}openPromoDialog(e){this.dialog.open(J,{width:"500px",disableClose:!1,data:{billId:e.BILLS_ID}}).afterClosed().subscribe(n=>{n?.success&&this.getAllBills(this.type,this.params)})}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-children-active-bills"]],decls:13,vars:12,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0641\u0627\u062a\u0648\u0631\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],["class","d-flex justify-content-start align-items-center mt-4",4,"ngIf"],[1,"dialog-button",3,"click"],[3,"displayedColumns","isActiveBills","data","itemClicked","editClicked","promoClicked"],[1,"d-flex","justify-content-start","align-items-center","mt-4"],[3,"selectedBranchesChange"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",1)(5,"div",2)(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.YNc(7,Nn,2,0,"div",4),t.qZA(),t.TgZ(8,"div")(9,"button",5),t.NdJ("click",function(){return n.openCreateBillDialog()}),t._uU(10),t.ALo(11,"translate"),t.qZA()()()(),t.TgZ(12,"app-data-table",6),t.NdJ("itemClicked",function(s){return n.goToBillProfile(s)})("editClicked",function(s){return n.openCloseBillDialog(s)})("promoClicked",function(s){return n.openPromoDialog(s)}),t.qZA()),2&o&&(t.xp6(2),t.hij("",t.lcZ(3,7,"ALL_ACTIVE_CHILD_BILLS")," ... \u{1f7e2}"),t.xp6(4),t.Q6J("ngModel",n.searchQuery),t.xp6(1),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(3),t.hij(" + ",t.lcZ(11,9,"CREATE")," "),t.xp6(2),t.Q6J("displayedColumns",t.DdM(11,Sn))("isActiveBills",!0)("data",n.billsRes))},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}  .mat-calendar-body-selected{background-color:#004953}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})();function Rn(i,a){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"mat-spinner",8),t.TgZ(2,"p",9),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.hij("\u23f3 ",t.lcZ(4,1,"LOADING"),"..."))}function Fn(i,a){if(1&i&&(t.TgZ(0,"p",34)(1,"mat-icon",35),t._uU(2,"note"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw().$implicit;t.xp6(3),t.hij(" \u{1f4dd} ",r.notes," ")}}function Jn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",22)(1,"div",23),t._UZ(2,"img",24),t.qZA(),t.TgZ(3,"div",25)(4,"h6",26),t._uU(5),t.qZA(),t.TgZ(6,"p",27),t._uU(7),t.ALo(8,"currency"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"p",28),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"strong"),t._uU(14),t.qZA()(),t.YNc(15,Fn,4,1,"p",29),t.qZA(),t.TgZ(16,"div",30)(17,"button",31),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.decreaseCounter(n))}),t._uU(18," \u2796 "),t.qZA(),t.TgZ(19,"input",32),t.NdJ("input",function(o){const l=t.CHM(r).index,s=t.oxw(2);return t.KtG(s.onCounterChange(l,o))}),t.qZA(),t.TgZ(20,"button",31),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.increaseCounter(n))}),t._uU(21," \u2795 "),t.qZA()(),t.TgZ(22,"div",33)(23,"div",17),t._uU(24),t.ALo(25,"currency"),t.qZA(),t.TgZ(26,"div",15),t._uU(27),t.ALo(28,"translate"),t.qZA()()()}if(2&i){const r=a.$implicit,e=a.index,o=t.oxw(2);t.xp6(5),t.hij("\u{1f37d}\ufe0f ",r.name,""),t.xp6(2),t.AsE(" \u{1f4b2} ",t.gM2(8,12,r.unit_price,"EGP","symbol","1.2-2")," ",t.lcZ(9,17,"PER_UNIT")," "),t.xp6(4),t.hij(" \u{1f4e6} ",t.lcZ(12,19,"ORDERED_QUANTITY"),": "),t.xp6(3),t.Oqu(r.ordered_quantity),t.xp6(1),t.Q6J("ngIf",r.notes),t.xp6(2),t.Q6J("disabled",o.isDecreaseDisabled(e)),t.xp6(2),t.Q6J("value",r.counter)("max",r.ordered_quantity),t.xp6(1),t.Q6J("disabled",o.isIncreaseDisabled(e)),t.xp6(4),t.hij(" \u{1f4b0} ",t.gM2(25,21,r.total_price,"EGP","symbol","1.2-2")," "),t.xp6(3),t.Oqu(t.lcZ(28,26,"TOTAL"))}}function Qn(i,a){1&i&&(t.TgZ(0,"div",7)(1,"mat-icon",36),t._uU(2,"shopping_cart_off"),t.qZA(),t.TgZ(3,"p",37),t._uU(4),t.ALo(5,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij("\u{1f6d2}\u274c ",t.lcZ(5,1,"NO_PRODUCTS_FOUND"),""))}function Yn(i,a){if(1&i&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"label",15),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",16),t._uU(9),t.qZA()()(),t.TgZ(10,"div",13)(11,"div",14)(12,"label",15),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",16),t._uU(16),t.qZA()()(),t.TgZ(17,"div",13)(18,"div",14)(19,"label",15),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",16),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA()()(),t.TgZ(26,"div",13)(27,"div",14)(28,"label",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",17),t._uU(32),t.ALo(33,"currency"),t.qZA()()()()(),t.TgZ(34,"div",18)(35,"h5",19),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",20),t.YNc(39,Jn,29,28,"div",21),t.qZA()(),t.YNc(40,Qn,6,3,"div",4),t.qZA()),2&i){const r=t.oxw();t.xp6(6),t.hij("\u{1f522} ",t.lcZ(7,11,"BILL_NUMBER"),""),t.xp6(3),t.hij("#",r.billData.bill_number,""),t.xp6(4),t.hij("\u{1fa91} ",t.lcZ(14,13,"TABLE_NUMBER"),""),t.xp6(3),t.Oqu(r.billData.table_number),t.xp6(4),t.hij("\u{1f4e6} ",t.lcZ(21,15,"TAKE_AWAY"),""),t.xp6(3),t.hij(" ",r.billData.take_away?"\u2705 "+t.lcZ(24,17,"YES"):"\u274c "+t.lcZ(25,19,"NO")," "),t.xp6(6),t.hij("\u{1f4b0} ",t.lcZ(30,21,"TOTAL_PRICE"),""),t.xp6(3),t.hij(" \u{1f4b5} ",t.gM2(33,23,r.getTotalBillPrice(),"EGP","symbol","1.2-2")," "),t.xp6(4),t.hij("\u{1f6cd}\ufe0f ",t.lcZ(37,28,"PRODUCTS"),""),t.xp6(3),t.Q6J("ngForOf",r.products),t.xp6(1),t.Q6J("ngIf",0===r.products.length)}}function jn(i,a){1&i&&t._UZ(0,"mat-spinner",42)}function $n(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"mat-dialog-actions",38)(1,"button",39),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onClose())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",40),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onSubmit())}),t.YNc(5,jn,1,0,"mat-spinner",41),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()}if(2&i){const r=t.oxw();t.xp6(2),t.hij(" \u274c ",t.lcZ(3,4,"CANCEL")," "),t.xp6(2),t.Q6J("disabled",r.isUpdating||0===r.products.length||!r.hasChanges()),t.xp6(1),t.Q6J("ngIf",r.isUpdating),t.xp6(1),t.hij(" ",r.isUpdating?"\u{1f504} "+t.lcZ(7,6,"UPDATING"):"\u2705 "+t.lcZ(8,8,"UPDATE_BILL")," ")}}let et=(()=>{const a=class{constructor(e,o,n,l){this.dialogRef=e,this.dashboardService=o,this.toaster=n,this.data=l,this.billData=null,this.products=[],this.isLoading=!0,this.isUpdating=!1}ngOnInit(){this.loadBillData()}loadBillData(){this.isLoading=!0,this.dashboardService.getBillDetails(this.data.billId).subscribe({next:e=>{this.billData=e,this.products=e.products.map((o,n)=>({...o,product_id:o.id,ordered_quantity:o.quantity,counter:0,quantity:o.quantity})),this.isLoading=!1},error:e=>{console.error("Failed to load bill data:",e),this.toaster.error("Failed to load bill data"),this.isLoading=!1,this.onClose()}})}increaseCounter(e){const o=this.products[e];o.counter<o.ordered_quantity&&(o.counter++,this.updateProductTotal(e))}decreaseCounter(e){const o=this.products[e];o.counter>0&&(o.counter--,this.updateProductTotal(e))}onCounterChange(e,o){const n=o.target,l=parseInt(n.value)||0,s=this.products[e];l>=0&&l<=s.ordered_quantity?(s.counter=l,this.updateProductTotal(e)):l>s.ordered_quantity?(s.counter=s.ordered_quantity,n.value=s.ordered_quantity.toString(),this.updateProductTotal(e)):(s.counter=0,n.value="0",this.updateProductTotal(e))}hasChanges(){return this.products.some(e=>e.counter>0)}updateProductTotal(e){const o=this.products[e],n=parseFloat(o.unit_price);o.total_price=n*o.counter}getTotalBillPrice(){return this.products.reduce((e,o)=>e+o.total_price,0)}isDecreaseDisabled(e){return this.products[e].counter<=0}isIncreaseDisabled(e){const o=this.products[e];return o.counter>=o.ordered_quantity}onSubmit(){if(!this.billData)return;this.isUpdating=!0;const o={returned_products:this.products.filter(n=>n.counter>0).map(n=>({product_type:"product",product_id:n.product_id,quantity:n.counter,notes:n.notes})),bill:this.data.billId,table_number:this.billData.table_number,take_away:this.billData.take_away};console.log("Payload:",o),this.dashboardService.updateBill(this.data.billId,o).subscribe({next:n=>{this.toaster.success("Bill updated successfully"),this.dialogRef.close(!0)},error:n=>{console.error("Update Error:",n),this.toaster.error("Failed to update bill"),this.isUpdating=!1}})}onClose(){this.dialogRef.close()}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(u.so),t.Y36(x),t.Y36(P._W),t.Y36(u.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-bill-dialog"]],decls:11,vars:6,consts:[[1,"dialog-container","p-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"dialog-header","m-0"],["mat-icon-button","","color","warn",3,"click"],["class","text-center py-4",4,"ngIf"],["class","dialog-body",4,"ngIf"],["align","end","class","d-flex justify-content-between align-items-center m-3 dialog-footer",4,"ngIf"],[1,"text-center","py-4"],["diameter","40"],[1,"mt-2"],[1,"dialog-body"],[1,"bill-info-card","mb-4","p-3","rounded"],[1,"row","g-3"],[1,"col-md-3"],[1,"info-item"],[1,"small"],[1,"fw-bold"],[1,"fw-bold","text-success"],[1,"products-section"],[1,"mb-3"],[1,"products-list"],["class","product-card mb-3 p-3 rounded d-flex align-items-center",4,"ngFor","ngForOf"],[1,"product-card","mb-3","p-3","rounded","d-flex","align-items-center"],[1,"product-image","me-3"],["src","https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=100&h=100&fit=crop","alt","Product"],[1,"product-info","flex-grow-1","me-3"],[1,"product-name","mb-1"],[1,"product-price","mb-1"],[1,"mb-1","small"],["class","product-notes mb-0 small",4,"ngIf"],[1,"quantity-controls","d-flex","align-items-center"],[1,"quantity-btn",3,"disabled","click"],["type","number","min","0",1,"quantity-display",2,"width","60px","text-align","center","border","1px solid #ddd","border-radius","4px","padding","4px",3,"value","max","input"],[1,"product-total","ms-3","text-end"],[1,"product-notes","mb-0","small"],[1,"small-icon","me-1"],[1,"large-icon","mb-2"],[1,""],["align","end",1,"d-flex","justify-content-between","align-items-center","m-3","dialog-footer"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","16","class","me-2",4,"ngIf"],["diameter","16",1,"me-2"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.YNc(8,Rn,5,3,"div",4),t.YNc(9,Yn,41,30,"div",5),t.YNc(10,$n,9,10,"mat-dialog-actions",6),t.qZA()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,4,"BILL_DETAILS")," \u{1f9fe}\u2728"),t.xp6(5),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.billData),t.xp6(1),t.Q6J("ngIf",!n.isLoading))},dependencies:[d.sg,d.O5,u.H8,v.Hw,E.Ou,C.lW,C.RK,d.H9,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}  .mat-mdc-dialog-surface{border-radius:16px!important;padding:0!important;background:#111827!important;direction:rtl;max-height:80vh!important;color:#f3f4f6;display:flex;flex-direction:column;scrollbar-width:none;-ms-overflow-style:none}  .mat-mdc-dialog-surface::-webkit-scrollbar{width:0;height:0}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.dialog-body[_ngcontent-%COMP%]{font-family:Noto Kufi Arabic,sans-serif!important;display:flex;flex-direction:column;gap:1rem;flex:1;overflow-y:auto;padding:0 1rem 1rem}.dialog-footer[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#111827;padding:1rem;border-top:1px solid #ddd;display:flex;justify-content:flex-end;gap:1rem;z-index:10}.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions.dialog-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;min-width:90px;font-weight:500}  .mat-mdc-text-field-wrapper,   .mat-mdc-form-field-flex,   .mat-mdc-input-element,   .mat-mdc-select-trigger{background:#fff!important;border-radius:8px!important}  .mat-mdc-form-field-focus-overlay{background:transparent!important}.bill-info-card[_ngcontent-%COMP%]{background:#1f2937;color:#f3f4f6}.bill-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;margin-bottom:.25rem}.bill-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:1.1rem}.products-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f3f4f6;font-weight:600;border-bottom:2px solid #e9ecef;padding-bottom:.5rem}.product-card[_ngcontent-%COMP%]{background:#1f2937;box-shadow:0 2px 4px #0000001a;transition:all .3s ease}.product-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000026;transform:translateY(-1px)}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:#f3f4f6;font-weight:600;margin-bottom:.5rem}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-weight:500;color:#f3f4f6}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-notes[_ngcontent-%COMP%]{color:#6c757d;font-style:italic}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-notes[_ngcontent-%COMP%]   .small-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.quantity-controls[_ngcontent-%COMP%]{background:#f8f9fa;padding:.5rem;border-radius:8px;border:1px solid #e9ecef}.quantity-controls[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:6px}.quantity-controls[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5}.quantity-controls[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]{width:70px;margin:0 .5rem}.quantity-controls[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding:0}.quantity-controls[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper .mat-mdc-text-field-wrapper{height:40px}.quantity-controls[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper .mat-mdc-text-field-wrapper .mat-mdc-input-element{text-align:center;font-weight:600;font-size:1.1rem}.quantity-controls[_ngcontent-%COMP%]   .quantity-input[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.product-total[_ngcontent-%COMP%]{min-width:100px}.product-total[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.25rem}.product-total[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:.875rem}.text-center[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}@media (max-width: 768px){.product-card[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch!important}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{margin-bottom:1rem;margin-right:0!important}.product-card[_ngcontent-%COMP%]   .quantity-controls[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   .product-total[_ngcontent-%COMP%]{justify-content:center;text-align:center;margin:.5rem 0}.bill-info-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%]{margin-bottom:1rem}}.text-success[_ngcontent-%COMP%]{color:#28a745!important}button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.product-image[_ngcontent-%COMP%]{width:60px;height:60px;flex-shrink:0}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:8px;object-fit:cover;border:2px solid #ddd}.quantity-controls[_ngcontent-%COMP%]{background:#fff;padding:.3rem .6rem;border-radius:8px;display:flex;align-items:center;min-width:100px;justify-content:space-between;gap:.5rem;margin:0 20px}.quantity-controls[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;width:32px;height:32px;line-height:28px;padding:0;border:none;color:#fff;border-radius:6px;cursor:pointer}.quantity-controls[_ngcontent-%COMP%]   .quantity-btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.quantity-controls[_ngcontent-%COMP%]   .quantity-display[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#000;text-align:center;min-width:30px}"]}),i})();function zn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",8),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()}}let Hn=(()=>{const a=class{constructor(e,o,n,l,s){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.toaster=s,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.selectedDateRange={start:null,end:null},this.type="/active/",this.totalItems=0,this.currentPage=1,this.selectedBranchIds=[],this.searchQuery="",this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.displayedColumns=["TABLE_NUMBER","TOTAL_PRICE","TAKE_AWAY","FIRST_CHILD","IS_EDITED"],this.billsRes=[]}ngOnInit(){this.getAllBills(this.type,this.params)}openBillDialog(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/cofe-bill",e]));window.open(o,"_blank")}getAllBills(e="/active/",o){this.dashboardService.getCafeBill(e,o).subscribe({next:n=>{this.billsRes=n.map(l=>({BILL_NUMBER:l.bill_number,TABLE_NUMBER:l.table_number,TOTAL_PRICE:`${l.total_price} ${this.translate.instant("EGP")}`,TAKE_AWAY:l.take_away?"\u062a\u064a\u0643 \u0623\u0648\u0627\u064a \u{1f961}":"\u0641\u064a \u0627\u0644\u0645\u0637\u0639\u0645 \u{1f37d}\ufe0f",FIRST_CHILD:l.first_child,CREATED_DATE:this.formatDisplayDate(l.created),IS_EDITED:l?.returned_products?.length>0?"\u2705":"\u274c",BILLS_ID:l.id,rawData:l}))},error:n=>{console.error("Error fetching cafe bills:",n),this.toaster.error(this.translate.instant("ERROR_FETCHING_BILLS"))}})}formatDisplayDate(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.formatDateForAPI(e),endDate:this.formatDateForAPI(o),page:1},this.getAllBills(this.type,this.params))}searchExpense(e){this.params={searchQuery:e,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToBillProfile(e){this.router.navigate(["/dashboard/bills/cafe",e.BILLS_ID])}openUpdateBillDialog(e){this.dialog.open(et,{data:{billId:e},width:"90vw",maxWidth:"900px",height:"auto",maxHeight:"50vh",disableClose:!1,panelClass:"custom-dialog-panel"}).afterClosed().subscribe(n=>{n&&(console.log("Bill updated successfully"),this.getAllBills(this.type,this.params))})}pageChanged(e){this.params.page=e,this.getAllBills(this.type,this.params)}openPromoDialog(e){this.dialog.open(J,{width:"500px",disableClose:!1,data:{billId:e.BILLS_ID,billType:"cafe"}}).afterClosed().subscribe(n=>{n?.success&&(this.getAllBills(this.type,this.params),this.toaster.success(this.translate.instant("PROMO_CODE_APPLIED_SUCCESS")))})}makeOrder(){this.router.navigate(["/dashboard/order"])}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cafe-active-bills"]],decls:14,vars:10,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0641\u0627\u062a\u0648\u0631\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","ngModelChange","input"],[1,"d-flex","justify-content-start","align-items-center","mt-4"],[3,"selectedBranchesChange",4,"ngIf"],[1,"dialog-button",3,"click"],[3,"displayedColumns","data","itemClicked","editClicked"],[3,"selectedBranchesChange"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,zn,1,0,"app-branch-multi-select",5),t.qZA()(),t.TgZ(9,"div")(10,"button",6),t.NdJ("click",function(){return n.makeOrder()}),t._uU(11),t.ALo(12,"translate"),t.qZA()()()(),t.TgZ(13,"app-data-table",7),t.NdJ("itemClicked",function(s){return n.openBillDialog(s.BILLS_ID)})("editClicked",function(s){return n.openUpdateBillDialog(s.BILLS_ID)}),t.qZA()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,6,"ALL_ACTIVE_CAFE_BILLS")," ... \u2615\u{1f7e2}"),t.xp6(2),t.Q6J("ngModel",n.searchQuery),t.xp6(2),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(3),t.hij(" + ",t.lcZ(12,8,"Create_order")," "),t.xp6(2),t.Q6J("displayedColumns",n.displayedColumns)("data",n.billsRes))},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}@media print{.expense-container[_ngcontent-%COMP%]{display:none}}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}[_ngcontent-%COMP%]:focus{outline:none}  .mat-calendar-body-selected{background-color:#004953}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700}.dialog-button[_ngcontent-%COMP%]:hover{background-color:#001c20}"]}),i})();function Gn(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"app-branch-multi-select",18),t.NdJ("selectedBranchesChange",function(o){t.CHM(r);const n=t.oxw();return t.KtG(n.onBranchSelectionChange(o))}),t.qZA()}if(2&i){const r=t.oxw();t.ekj("disabled-filter",r.isLoading)}}function Kn(i,a){if(1&i&&(t.TgZ(0,"div",19)(1,"span",20),t._uU(2),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.hij(" \u23f0 ",r.getDateRangeInArabic()," ")}}function Xn(i,a){1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._UZ(2,"mat-spinner",23),t.qZA()())}let Vn=(()=>{const a=class{constructor(e,o,n,l,s){this.dashboardService=e,this.translate=o,this.router=n,this.dialog=l,this.toaster=s,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}"),this.isLoading=!1,this.selectedDateRange={start:null,end:null},this.type="/",this.totalItems=0,this.currentPage=1,this.selectedBranchIds=[],this.searchQuery="",this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.displayedColumns=["TABLE_NUMBER","TOTAL_PRICE","TAKE_AWAY","FIRST_CHILD","IS_EDITED"],this.billsRes=[]}ngOnInit(){const e=new Date,o=new Date;o.setDate(e.getDate()-1),this.selectedDateRange.start=o,this.selectedDateRange.end=e,this.params.startDate=this.formatDateForAPI(o),this.params.endDate=this.formatDateForAPI(e),this.getAllBills(this.type,this.params)}getAllBills(e="/",o){this.isLoading=!0,this.dashboardService.getCafeBill(e,o).subscribe({next:n=>{this.billsRes=n.results.map(l=>({BILL_NUMBER:l.bill_number,TABLE_NUMBER:l.table_number,TOTAL_PRICE:`${l.total_price} ${this.translate.instant("EGP")}`,TAKE_AWAY:l.take_away?"\u062a\u064a\u0643 \u0623\u0648\u0627\u064a \u{1f961}":"\u0641\u064a \u0627\u0644\u0645\u0637\u0639\u0645 \u{1f37d}\ufe0f",FIRST_CHILD:l.first_child,CREATED_DATE:this.formatDisplayDate(l.created),IS_EDITED:l?.returned_products?.length>0?"\u2705":"\u274c",BILLS_ID:l.id,rawData:l})),this.totalItems=n.count||n.length||0,this.currentPage=o.page,this.isLoading=!1},error:n=>{console.error("Error fetching cafe bills:",n),this.toaster.error(this.translate.instant("ERROR_FETCHING_BILLS")),this.isLoading=!1}})}openBillDialog(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/cofe-bill",e]));window.open(o,"_blank")}formatDisplayDate(e){return new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}onStartDateChange(e){this.selectedDateRange.start=e,this.checkAndTrigger()}onEndDateChange(e){this.selectedDateRange.end=e,this.checkAndTrigger()}openUpdateBillDialog(e){this.dialog.open(et,{data:{billId:e},width:"90vw",maxWidth:"900px",height:"auto",maxHeight:"50vh",disableClose:!1,panelClass:"custom-dialog-panel"}).afterClosed().subscribe(n=>{n&&(console.log("Bill updated successfully"),this.getAllBills(this.type,this.params))})}checkAndTrigger(){const{start:e,end:o}=this.selectedDateRange;e&&o&&(this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.formatDateForAPI(e),endDate:this.formatDateForAPI(o),page:1},this.getAllBills(this.type,this.params))}searchExpense(e){this.params={searchQuery:e,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}onBranchSelectionChange(e){this.selectedBranchIds=e,this.params={searchQuery:this.searchQuery,branchIds:this.selectedBranchIds,startDate:this.selectedDateRange.start?this.formatDateForAPI(this.selectedDateRange.start):null,endDate:this.selectedDateRange.end?this.formatDateForAPI(this.selectedDateRange.end):null,page:1},this.getAllBills(this.type,this.params)}getDateRangeInArabic(){if(!this.selectedDateRange.start||!this.selectedDateRange.end)return"";const e=["\u0627\u0644\u0623\u062d\u062f","\u0627\u0644\u0627\u062b\u0646\u064a\u0646","\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062e\u0645\u064a\u0633","\u0627\u0644\u062c\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062a"],o=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];return`\u0645\u0646 ${e[this.selectedDateRange.start.getDay()]} ${this.selectedDateRange.start.getDate()} ${o[this.selectedDateRange.start.getMonth()]} ${this.selectedDateRange.start.getFullYear()} \u0625\u0644\u0649 ${e[this.selectedDateRange.end.getDay()]} ${this.selectedDateRange.end.getDate()} ${o[this.selectedDateRange.end.getMonth()]} ${this.selectedDateRange.end.getFullYear()}`}formatDateForAPI(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}goToBillProfile(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/dashboard/bills/cafe",e.BILLS_ID]));window.open(o,"_blank"),console.log("shhsjdfudjsfgj")}pageChanged(e){this.params.page=e,this.getAllBills(this.type,this.params)}openPromoDialog(e){this.dialog.open(J,{width:"500px",disableClose:!1,data:{billId:e.BILLS_ID,billType:"cafe"}}).afterClosed().subscribe(n=>{n?.success&&(this.getAllBills(this.type,this.params),this.toaster.success(this.translate.instant("PROMO_CODE_APPLIED_SUCCESS")))})}makeOrder(){this.router.navigate(["/dashboard/order"])}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(p.sK),t.Y36(m.F0),t.Y36(u.uw),t.Y36(P._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cafe-bills"]],decls:29,vars:39,consts:[[1,"expense-container","mt-4"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0639\u0646 \u0641\u0627\u062a\u0648\u0631\u0629... \u{1f50d}",1,"search-input","mt-4",3,"ngModel","disabled","ngModelChange","input"],[1,"d-flex","justify-content-start","align-items-center","mt-4","position-relative"],[3,"disabled-filter","selectedBranchesChange",4,"ngIf"],["appearance","fill",1,"mx-3"],[3,"rangePicker","disabled"],["matStartDate","",3,"placeholder","disabled","value","dateChange"],["matEndDate","",3,"placeholder","disabled","value","dateChange"],["matSuffix","",3,"for","disabled"],[3,"disabled"],["picker",""],["class","mt-2 date-wrapper",4,"ngIf"],[1,"dialog-button",3,"disabled","click"],[1,"table-container","position-relative"],["class","table-loader-overlay",4,"ngIf"],[3,"displayedColumns","data","paginationType","totalItems","currentPage","itemClicked","editClicked","pageChange"],[3,"selectedBranchesChange"],[1,"mt-2","date-wrapper"],[1,"date-range-arabic"],[1,"table-loader-overlay"],[1,"spinner-container","d-flex","justify-content-center","mb-5"],["diameter","40"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(s){return n.searchQuery=s})("input",function(){return n.searchExpense(n.searchQuery)}),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,Gn,1,2,"app-branch-multi-select",5),t.TgZ(9,"mat-form-field",6)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"mat-date-range-input",7)(14,"input",8),t.NdJ("dateChange",function(s){return n.onStartDateChange(s.value)}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",9),t.NdJ("dateChange",function(s){return n.onEndDateChange(s.value)}),t.ALo(17,"translate"),t.qZA()(),t._UZ(18,"mat-datepicker-toggle",10)(19,"mat-date-range-picker",11,12),t.qZA()(),t.YNc(21,Kn,3,1,"div",13),t.qZA(),t.TgZ(22,"div")(23,"button",14),t.NdJ("click",function(){return n.makeOrder()}),t._uU(24),t.ALo(25,"translate"),t.qZA()()()(),t.TgZ(26,"div",15),t.YNc(27,Xn,3,0,"div",16),t.TgZ(28,"app-data-table",17),t.NdJ("itemClicked",function(s){return n.openBillDialog(s.BILLS_ID)})("editClicked",function(s){return n.openUpdateBillDialog(s.BILLS_ID)})("pageChange",function(s){return n.pageChanged(s)}),t.qZA()()),2&o){const l=t.MAs(20);t.xp6(4),t.hij("",t.lcZ(5,29,"ALL_CAFE_BILLS")," ... \u2615\u{1f9fe}"),t.xp6(2),t.Q6J("ngModel",n.searchQuery)("disabled",n.isLoading),t.xp6(2),t.Q6J("ngIf","admin"===(null==n.userInfo?null:n.userInfo.role)||"owner"===(null==n.userInfo?null:n.userInfo.role)),t.xp6(1),t.ekj("disabled-filter",n.isLoading),t.xp6(2),t.Oqu(t.lcZ(12,31,"SELECT_DATE_RANGE")),t.xp6(2),t.Q6J("rangePicker",l)("disabled",n.isLoading),t.xp6(1),t.Q6J("placeholder",t.lcZ(15,33,"START_DATE"))("disabled",n.isLoading)("value",n.selectedDateRange.start),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,35,"END_DATE"))("disabled",n.isLoading)("value",n.selectedDateRange.end),t.xp6(2),t.Q6J("for",l)("disabled",n.isLoading),t.xp6(1),t.Q6J("disabled",n.isLoading),t.xp6(2),t.Q6J("ngIf",n.selectedDateRange.start&&n.selectedDateRange.end),t.xp6(2),t.Q6J("disabled",n.isLoading),t.xp6(1),t.hij(" + ",t.lcZ(25,37,"Create_order")," "),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.ekj("loading-state",n.isLoading),t.Q6J("displayedColumns",n.displayedColumns)("data",n.billsRes)("paginationType","server")("totalItems",n.totalItems)("currentPage",n.currentPage)}},dependencies:[d.O5,y,T,c.Fj,c.JJ,c.On,E.Ou,b.nW,b.wx,b.zY,b.By,b._g,f.KE,f.hX,f.R9,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.expense-container[_ngcontent-%COMP%]{color:#f3f4f6}input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.5rem;margin-bottom:1.5rem;border:1px solid #e6d9d9;border-radius:6px}input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#999;cursor:not-allowed}[_ngcontent-%COMP%]:focus{outline:none}  .mat-calendar-body-selected{background-color:#004953}.dialog-button[_ngcontent-%COMP%]{background-color:#004953;color:#f3f4f6;padding:.5rem 1rem;border-radius:6px;border:none;cursor:pointer;font-weight:700;transition:all .3s ease}.dialog-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#001c20}.dialog-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed;opacity:.6}.table-container[_ngcontent-%COMP%]{margin-top:2rem}.disabled-filter[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.disabled-filter[_ngcontent-%COMP%]     .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#f5f5f5}.loading-state[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}  .mat-spinner circle{stroke:#004953}.date-wrapper[_ngcontent-%COMP%]{background-color:#4caf50;border-radius:10px;padding:10px;width:-moz-fit-content;width:fit-content}.date-range-arabic[_ngcontent-%COMP%]{left:0;right:0;color:#fff;font-size:14px!important;font-size:.85rem;font-weight:500;text-align:center;direction:rtl;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 768px){.loading-text[_ngcontent-%COMP%]{font-size:.9rem}}"]}),i})();function Wn(i,a){1&i&&(t.TgZ(0,"h6",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"COMPANION_REQUIRED")," "))}function to(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const r=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"CHILDREN_COUNT"),":"),t.xp6(2),t.hij(" ",r.bill.children.length," ")}}function eo(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.xp6(1),t.AsE(" ",r.phone_number," (",r.relationship,") ")}}function no(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,eo,2,2,"div",15),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Q6J("ngForOf",r.phone_numbers)}}function oo(i,a){if(1&i&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,no,5,2,"tr",15),t.qZA()()),2&i){const r=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,3,"CHILD_NAME")),t.xp6(3),t.Oqu(t.lcZ(8,5,"PHONE_NUMBER")),t.xp6(3),t.Q6J("ngForOf",r.bill.children)}}function io(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Visa:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.bill.visa," EGP ")}}function ao(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Cash:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.bill.cash," EGP ")}}function ro(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Instapay:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.bill.instapay," EGP ")}}function lo(i,a){1&i&&(t.TgZ(0,"div",16),t._UZ(1,"br"),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"WARN")))}function so(i,a){if(1&i&&(t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.qZA(),t.YNc(3,Wn,3,3,"h6",7),t.TgZ(4,"div",8),t.YNc(5,to,5,4,"div",9),t.YNc(6,oo,11,7,"table",10),t.YNc(7,io,4,1,"div",9),t.YNc(8,ao,4,1,"div",9),t.YNc(9,ro,4,1,"div",9),t.TgZ(10,"div",11)(11,"span"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"div",11)(16,"span"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"div",11)(21,"span"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._uU(24),t.ALo(25,"date"),t.qZA(),t.TgZ(26,"div",11)(27,"span"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._uU(30),t.qZA()(),t.YNc(31,lo,5,3,"div",12),t.qZA()),2&i){const r=t.oxw();t.xp6(3),t.Q6J("ngIf",!r.bill.is_allowed_age),t.xp6(2),t.Q6J("ngIf",null==r.bill.children?null:r.bill.children.length),t.xp6(1),t.Q6J("ngIf",null==r.bill.children?null:r.bill.children.length),t.xp6(1),t.Q6J("ngIf",r.bill.visa>0),t.xp6(1),t.Q6J("ngIf",r.bill.cash>0),t.xp6(1),t.Q6J("ngIf",r.bill.instapay>0),t.xp6(3),t.hij("",t.lcZ(13,15,"HOUR_PRICE"),":"),t.xp6(2),t.hij(" ",r.bill.hour_price," "),t.xp6(3),t.hij("",t.lcZ(18,17,"HALF_HOUR_PRICE"),":"),t.xp6(2),t.hij(" ",r.bill.half_hour_price," "),t.xp6(3),t.hij("",t.lcZ(23,19,"ENTER_AT"),":"),t.xp6(2),t.hij(" ",t.xi3(25,21,r.bill.created,"short")," "),t.xp6(4),t.hij("",t.lcZ(29,24,"BRANCH"),":"),t.xp6(2),t.hij(" ",r.bill.branch," "),t.xp6(1),t.Q6J("ngIf",r.bill.is_active)}}function co(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const r=a.$implicit;t.xp6(1),t.AsE(" ",r.phone_number," (",r.relationship,") ")}}function po(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,co,2,2,"div",15),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Q6J("ngForOf",r.phone_numbers)}}function go(i,a){if(1&i&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,po,5,2,"tr",15),t.qZA()()),2&i){const r=t.oxw(3);t.xp6(4),t.Oqu(t.lcZ(5,3,"CHILD_NAME")),t.xp6(3),t.Oqu(t.lcZ(8,5,"PHONE_NUMBER")),t.xp6(3),t.Q6J("ngForOf",r.bill.children)}}function uo(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.unit_price),t.xp6(2),t.Oqu(r.total_price)}}function ho(i,a){if(1&i&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,uo,9,4,"tr",15),t.qZA()()),2&i){const r=t.oxw(3);t.xp6(4),t.Oqu(t.lcZ(5,5,"PRODUCTS")),t.xp6(3),t.Oqu(t.lcZ(8,7,"QTY")),t.xp6(3),t.Oqu(t.lcZ(11,9,"PRICE")),t.xp6(3),t.Oqu(t.lcZ(14,11,"TOTAL")),t.xp6(3),t.Q6J("ngForOf",r.bill.product_bills_set)}}function _o(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&i){const r=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,2,"PRODUCTS_PRICE"),":"),t.xp6(2),t.hij(" ",r.bill.products_price," EGP ")}}function fo(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Cash:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(3);t.xp6(3),t.hij(" ",r.bill.cash," EGP ")}}function mo(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Visa:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(3);t.xp6(3),t.hij(" ",r.bill.visa," EGP ")}}function bo(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2,"Instapay:"),t.qZA(),t._uU(3),t.qZA()),2&i){const r=t.oxw(3);t.xp6(3),t.hij(" ",r.bill.instapay," EGP ")}}function Co(i,a){if(1&i&&(t.TgZ(0,"div",11)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()),2&i){const r=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,2,"EXIT_AT"),":"),t.xp6(2),t.hij(" ",t.xi3(5,4,r.bill.finished,"short")," ")}}function xo(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("\u{1f7e2} ",t.lcZ(2,1,"Active"),""))}function Oo(i,a){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij("\u{1f534} ",t.lcZ(1,1,"Inactive"),"")}function Ao(i,a){1&i&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"RETURNED_PRODUCTS_BILLS_SET")," :"))}function Zo(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.created_by),t.xp6(2),t.Oqu(r.total_price)}}function Po(i,a){if(1&i&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Zo,9,4,"tr",15),t.qZA()()),2&i){const r=t.oxw(4);t.xp6(4),t.Oqu(t.lcZ(5,5,"PRODUCTS")),t.xp6(3),t.Oqu(t.lcZ(8,7,"QTY")),t.xp6(3),t.Oqu(t.lcZ(11,9,"CREATED_BY")),t.xp6(3),t.Oqu(t.lcZ(14,11,"TOTAL")),t.xp6(3),t.Q6J("ngForOf",r.bill.returned_product_bills_set)}}function vo(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",11)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"div",11)(7,"span"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10),t.qZA(),t.TgZ(11,"div",11)(12,"span"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"div",11)(17,"span"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,xo,3,3,"span",20),t.YNc(21,Oo,2,3,"ng-template",null,21,t.W1O),t.qZA(),t.TgZ(23,"div",11)(24,"span"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"div",11)(29,"span"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"div",22),t.YNc(34,Ao,3,3,"span",23),t.YNc(35,Po,17,13,"table",10),t.qZA()()),2&i){const r=t.MAs(22),e=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,15,"DISCOUNT_NAME"),":"),t.xp6(2),t.hij(" ",e.bill.discount_name," "),t.xp6(3),t.hij("",t.lcZ(9,17,"DISCOUNT_TYPE"),":"),t.xp6(2),t.hij(" ",e.bill.discount_type," "),t.xp6(3),t.hij("",t.lcZ(14,19,"DISCOUNT_VALUE"),":"),t.xp6(2),t.hij(" ",e.bill.discount_value," "),t.xp6(3),t.hij("",t.lcZ(19,21,"IS_ACTIVE"),":"),t.xp6(2),t.Q6J("ngIf",e.bill.is_active)("ngIfElse",r),t.xp6(5),t.hij("",t.lcZ(26,23,"SPENT_TIME"),":"),t.xp6(2),t.hij(" ",e.getSpentTimeFormatted(e.bill.spent_time)," "),t.xp6(3),t.hij("",t.lcZ(31,25,"MONEY_UNBALANCE"),":"),t.xp6(2),t.hij(" ",e.bill.money_unbalance," EGP "),t.xp6(2),t.Q6J("ngIf",null==e.bill.returned_product_bills_set?null:e.bill.returned_product_bills_set.length),t.xp6(1),t.Q6J("ngIf",null==e.bill.returned_product_bills_set?null:e.bill.returned_product_bills_set.length)}}function Mo(i,a){if(1&i&&(t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.qZA(),t.TgZ(3,"h2",13),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.YNc(6,go,11,7,"table",10),t.TgZ(7,"div",11)(8,"span"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._uU(11),t.qZA(),t.YNc(12,ho,17,13,"table",10),t.YNc(13,_o,5,4,"div",9),t.YNc(14,fo,4,1,"div",9),t.YNc(15,mo,4,1,"div",9),t.YNc(16,bo,4,1,"div",9),t.TgZ(17,"div",11)(18,"span"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._uU(21),t.ALo(22,"date"),t.qZA(),t.YNc(23,Co,6,7,"div",9),t.TgZ(24,"div",11)(25,"span"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._uU(28),t.qZA(),t.YNc(29,vo,36,27,"div",19),t.qZA()),2&i){const r=t.oxw(2);t.xp6(4),t.AsE(" ",t.lcZ(5,16,"TOTAL_PRICE"),": ",r.bill.total_price," EGP "),t.xp6(2),t.Q6J("ngIf",null==r.bill.children?null:r.bill.children.length),t.xp6(3),t.hij("",t.lcZ(10,18,"TIME_PRICE"),":"),t.xp6(2),t.hij(" ",r.bill.time_price," EGP "),t.xp6(1),t.Q6J("ngIf",null==r.bill.product_bills_set?null:r.bill.product_bills_set.length),t.xp6(1),t.Q6J("ngIf",r.bill.products_price>0),t.xp6(1),t.Q6J("ngIf",r.bill.cash>0),t.xp6(1),t.Q6J("ngIf",r.bill.visa>0),t.xp6(1),t.Q6J("ngIf",r.bill.instapay>0),t.xp6(3),t.hij("",t.lcZ(20,20,"ENTER_AT"),":"),t.xp6(2),t.hij(" ",t.xi3(22,22,r.bill.created,"short")," "),t.xp6(2),t.Q6J("ngIf",r.bill.finished),t.xp6(3),t.hij("",t.lcZ(27,25,"BRANCH"),":"),t.xp6(2),t.hij(" ",r.bill.branch," "),t.xp6(1),t.Q6J("ngIf","manger"==r.userInfo.role||"admin"==r.userInfo.role||"owner"==r.userInfo.role)}}function yo(i,a){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"br"),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA()()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"THANKS")),t.xp6(3),t.Oqu(t.lcZ(7,4,"VISIT")))}function To(i,a){if(1&i&&(t.YNc(0,Mo,30,27,"div",17),t.YNc(1,yo,8,6,"div",18)),2&i){const r=t.oxw();t.Q6J("ngIf",r.bill),t.xp6(1),t.Q6J("ngIf",!r.bill.is_active)}}function Do(i,a){1&i&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"LOADING")))}let wo=(()=>{const a=class{constructor(e,o){this.dashboardService=e,this.route=o,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}")}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.getBillById(e)}getBillById(e){this.dashboardService.getChildBillById(e).subscribe(o=>{this.bill=o})}getSpentTimeFormatted(e){const o=Math.floor(e/60),n=e%60,l=o>0?`${o} \u0633\u0627\u0639\u0629`:"",s=n>0?`${n} \u062f\u0642\u064a\u0642\u0629`:"";return l&&s?`${l} \u0648${s}`:l||s||"0 \u062f\u0642\u064a\u0642\u0629"}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(m.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-child-bill"]],decls:7,vars:2,consts:[[1,"d-flex","justify-content-center","my-4","no-print"],["class","bill-container",4,"ngIf","ngIfElse"],["closedBill",""],["loading",""],[1,"bill-container"],[1,"text-center"],["src","../../../../assets/png/logo-01.png","alt","logo",2,"width","200px"],["class","bill-title",4,"ngIf"],[1,"bill-card"],["class","bill-row",4,"ngIf"],["class","children-table",4,"ngIf"],[1,"bill-row"],["class","bill-footer mt-4 bill-row","style","color: #1f2937",4,"ngIf"],[1,"bill-title"],[1,"children-table"],[4,"ngFor","ngForOf"],[1,"bill-footer","mt-4","bill-row",2,"color","#1f2937"],["class","bill-container",4,"ngIf"],["class","bill-footer mt-4 bill-row",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notActive",""],[1,"mt-4"],["class","mt-4","style","margin-top: 10px !important",4,"ngIf"],[1,"mt-4",2,"margin-top","10px !important"],[1,"bill-footer","mt-4","bill-row"],[1,"loading"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-print-btn"),t.qZA(),t.YNc(2,so,32,26,"div",1),t.YNc(3,To,2,2,"ng-template",null,2,t.W1O),t.YNc(5,Do,3,3,"ng-template",null,3,t.W1O)),2&o){const l=t.MAs(4);t.xp6(2),t.Q6J("ngIf",n.bill&&n.bill.is_active)("ngIfElse",l)}},dependencies:[d.sg,d.O5,R,d.uU,p.X$],styles:['@charset "UTF-8";body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.bill-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;background-color:#1f2937;border-radius:10px;color:#f3f4f6}.bill-footer[_ngcontent-%COMP%]{display:none;color:#111827}.bill-title[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin-bottom:15px;color:#f3f4f6}.bill-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.bill-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 12px;border-radius:6px;font-size:14px}.bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f3f4f6}.children-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:10px 0}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .children-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:6px;text-align:right;font-size:14px}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1f2937;font-weight:700}@media print{.bill-title[_ngcontent-%COMP%]:after, .bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, th[_ngcontent-%COMP%]:before{content:none!important}@page{margin:-50px -30px!important}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:60mm;height:auto;margin:0!important;padding:0!important;background:none}.bill-container[_ngcontent-%COMP%]{width:60mm!important;max-width:80mm;margin:-25px;padding:0;font-family:monospace;font-size:10px!important;color:#000!important;background:white;box-shadow:none!important}.bill-title[_ngcontent-%COMP%]{text-align:center;color:#000;font-weight:bolder;font-size:12px!important;margin:10px 0}.bill-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px 0;font-size:10px!important;font-weight:700;width:100%}.bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.children-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:8px!important}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .children-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000;padding:2px;font-size:10px!important;text-align:right;font-weight:700}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;background:none}.no-print[_ngcontent-%COMP%]{display:none!important}.bill-footer[_ngcontent-%COMP%]{display:flex;margin-top:10px;flex-direction:column;justify-content:center;align-items:center;padding:5px 0}.bill-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px!important;color:#000!important}}@media print and (pointer: coarse) and (hover: none) and (min-width: 768px) and (max-width: 1024px){@page{margin:0!important;size:auto}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%!important;margin:0!important;padding:0!important}.bill-container[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:0!important;padding:10px!important;box-sizing:border-box}}@media print and (orientation: portrait) and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 1){.bill-container[_ngcontent-%COMP%]{margin-right:0!important;padding-right:5px!important}}']}),i})();var nt=g(7579),Io=g(8372),ko=g(1884),w=g(2722),Q=g(8505),Y=g(262),j=g(9646);let Eo=(()=>{const a=class{constructor(){this.caches=new Map,this.configs=new Map,this.loadPersistedCaches()}getCache(e,o){return this.caches.has(e)||(this.caches.set(e,new Map),this.configs.set(e,{ttl:864e5,maxSize:100,persistToLocalStorage:!1,...o})),new qo(e,this)}_set(e,o,n,l){const s=this.caches.get(e),h=this.configs.get(e);if(!s||!h)return;const A=l||h.ttl||864e5,Z={data:n,timestamp:Date.now(),expiryTime:Date.now()+A};if(h.maxSize&&s.size>=h.maxSize&&!s.has(o)){const M=this._getOldestKey(e);M&&s.delete(M)}s.set(o,Z),h.persistToLocalStorage&&this._persistCache(e)}_get(e,o){const n=this.caches.get(e);if(!n)return null;const l=n.get(o);return l?Date.now()>l.expiryTime?(n.delete(o),null):l.data:null}_has(e,o){return null!==this._get(e,o)}_clear(e){const o=this.caches.get(e);o&&(o.clear(),this.configs.get(e)?.persistToLocalStorage&&localStorage.removeItem(`cache_${e}`))}_clearPattern(e,o){const n=this.caches.get(e);if(!n)return;const l=[];n.forEach((h,A)=>{A.includes(o)&&l.push(A)}),l.forEach(h=>n.delete(h)),this.configs.get(e)?.persistToLocalStorage&&this._persistCache(e)}_getStats(e){const o=this.caches.get(e);return o?{size:o.size,keys:Array.from(o.keys())}:{size:0,keys:[]}}_getOldestKey(e){const o=this.caches.get(e);if(!o)return;let n,l=Date.now();return o.forEach((s,h)=>{s.timestamp<l&&(l=s.timestamp,n=h)}),n}_persistCache(e){try{const o=this.caches.get(e);if(!o)return;const n=JSON.stringify(Array.from(o.entries()));localStorage.setItem(`cache_${e}`,n)}catch(o){console.error(`Failed to persist cache ${e}:`,o)}}loadPersistedCaches(){try{Object.keys(localStorage).filter(o=>o.startsWith("cache_")).forEach(o=>{const n=o.replace("cache_",""),l=localStorage.getItem(o);if(l){const s=JSON.parse(l),h=new Map(s),A=Date.now(),Z=new Map;h.forEach((M,q)=>{A<=M.expiryTime&&Z.set(q,M)}),Z.size>0?(this.caches.set(n,Z),this.configs.set(n,{ttl:864e5,maxSize:100,persistToLocalStorage:!0})):localStorage.removeItem(o)}})}catch(e){console.error("Failed to load persisted caches:",e)}}clearAllCaches(){this.caches.forEach((e,o)=>{this._clear(o)}),this.caches.clear(),this.configs.clear()}getAllCacheStats(){const e={};return this.caches.forEach((o,n)=>{e[n]=this._getStats(n)}),e}};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),i})();class qo{constructor(a,r){this.cacheName=a,this.cacheService=r}set(a,r,e){this.cacheService._set(this.cacheName,a,r,e)}get(a){return this.cacheService._get(this.cacheName,a)}has(a){return this.cacheService._has(this.cacheName,a)}clear(){this.cacheService._clear(this.cacheName)}clearPattern(a){this.cacheService._clearPattern(this.cacheName,a)}getStats(){return this.cacheService._getStats(this.cacheName)}}function Uo(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function Lo(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,Uo,2,0,"span",27),t.qZA()),2&i){const r=a.$implicit,e=a.last;t.xp6(1),t.hij(" \u{1f476} ",r.name,""),t.xp6(1),t.Q6J("ngIf",!e)}}function No(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){const n=t.CHM(r).$implicit,l=t.oxw(2);return t.KtG(l.selectBill(n))}),t.TgZ(1,"div",24)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",25),t.YNc(6,Lo,3,2,"span",26),t.qZA()()()}if(2&i){const r=a.$implicit;t.xp6(3),t.AsE("\u{1f4cb} ",t.lcZ(4,3,"BILL_DETAILS")," #",r.id,""),t.xp6(3),t.Q6J("ngForOf",r.children)}}function So(i,a){if(1&i&&(t.TgZ(0,"div",21),t.YNc(1,No,7,5,"div",22),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.searchResults)}}function Bo(i,a){if(1&i&&(t.TgZ(0,"div",28)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"span",29),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA()()),2&i){const r=t.oxw();t.xp6(2),t.AsE("\u{1f4cb} ",t.lcZ(3,7,"BILL_DETAILS")," #",r.selectedBill.id,""),t.xp6(2),t.AsE(" - ",r.selectedBill.children_count," \u{1f476} ",t.lcZ(5,9,"CHILDREN")," "),t.xp6(3),t.lnq("\u{1f4b0} ",t.lcZ(8,11,"TOTAL"),": ",r.selectedBill.total_price," ",t.lcZ(9,13,"EGP"),"")}}function Ro(i,a){1&i&&(t.TgZ(0,"div",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" \u274c ",t.lcZ(2,1,"NO_BILL_SELECTED")," "))}function Fo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){const n=t.CHM(r).$implicit,l=t.oxw(3);return t.KtG(l.selectLayer1(n))}),t._UZ(1,"img",38),t.TgZ(2,"div",39),t._uU(3),t.ALo(4,"titlecase"),t.qZA()()}if(2&i){const r=a.$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("src",e.getFoodImage(r),t.LSH)("alt",r),t.xp6(2),t.Oqu(t.lcZ(4,3,r))}}function Jo(i,a){if(1&i&&(t.TgZ(0,"div",34)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",35),t.YNc(5,Fo,5,5,"div",36),t.qZA()()),2&i){const r=t.oxw(2);t.xp6(2),t.hij("\u{1f4d6} ",t.lcZ(3,2,"MENU"),""),t.xp6(3),t.Q6J("ngForOf",r.layer1Options)}}function Qo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){const n=t.CHM(r).$implicit,l=t.oxw(3);return t.KtG(l.selectLayer2(n))}),t._UZ(1,"img",38),t.TgZ(2,"div",39),t._uU(3),t.ALo(4,"titlecase"),t.qZA()()}if(2&i){const r=a.$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("src",e.getFoodImage(r),t.LSH)("alt",r),t.xp6(2),t.Oqu(t.lcZ(4,3,r))}}function Yo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",34)(1,"h3"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div",35),t.YNc(5,Qo,5,5,"div",36),t.qZA(),t.TgZ(6,"button",40),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.goBack())}),t.TgZ(7,"i",41),t._uU(8,"\u2b05\ufe0f"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.ALo(11,"translate"),t.qZA()()}if(2&i){const r=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,r.selectedLayer1)),t.xp6(3),t.Q6J("ngForOf",r.layer2Options),t.xp6(4),t.AsE(" ",t.lcZ(10,6,"BACK_TO")," ",t.lcZ(11,8,"MENU")," ")}}function jo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){const n=t.CHM(r).$implicit,l=t.oxw(3);return t.KtG(l.selectProduct(n))}),t._UZ(1,"img",38),t.TgZ(2,"div",45)(3,"div",46),t._uU(4),t.qZA(),t.TgZ(5,"div",47),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",48)(9,"span",49),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA()()(),t.TgZ(13,"div",50)(14,"span",51),t._uU(15,"\u2795"),t.qZA()()()}if(2&i){const r=a.$implicit,e=t.oxw(3);t.xp6(1),t.Q6J("src",e.getFoodImage(r.layer3),t.LSH)("alt",r.name),t.xp6(3),t.Oqu(r.name),t.xp6(2),t.AsE(" \u{1f4b0} ",r.price," ",t.lcZ(7,10,"EGP")," "),t.xp6(3),t.ekj("low-stock",r.available_units<=r.warning_units),t.xp6(1),t.lnq(" \u2705 ",t.lcZ(11,12,"AVAILABLE"),": ",r.available_units," ",t.lcZ(12,14,"UNITS")," ")}}function $o(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",34)(1,"h3"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div",42),t.YNc(5,jo,16,16,"div",43),t.qZA(),t.TgZ(6,"button",40),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.goBack())}),t.TgZ(7,"i",41),t._uU(8,"\u2b05\ufe0f"),t.qZA(),t._uU(9),t.ALo(10,"translate"),t.ALo(11,"titlecase"),t.qZA()()}if(2&i){const r=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,r.selectedLayer2)),t.xp6(3),t.Q6J("ngForOf",r.finalProducts),t.xp6(4),t.AsE(" ",t.lcZ(10,6,"BACK_TO")," ",t.lcZ(11,8,r.selectedLayer1)," ")}}function zo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.closeProductModal())}),t.TgZ(1,"div",53),t.NdJ("click",function(o){return o.stopPropagation()}),t.TgZ(2,"div",54)(3,"h3"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",55),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.closeProductModal())}),t._uU(7,"\u274c"),t.qZA()(),t.TgZ(8,"div",56),t._UZ(9,"img",57),t.TgZ(10,"div",58)(11,"p",59)(12,"strong"),t._uU(13),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"p",60),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",61)(20,"label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"div",62)(24,"button",63),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.decreaseQuantity())}),t._uU(25," \u2796 "),t.qZA(),t.TgZ(26,"input",64),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw(2);return t.KtG(n.currentQuantity=o)}),t.qZA(),t.TgZ(27,"button",63),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.increaseQuantity())}),t._uU(28," \u2795 "),t.qZA()()(),t.TgZ(29,"div",65)(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"textarea",66),t.NdJ("ngModelChange",function(o){t.CHM(r);const n=t.oxw(2);return t.KtG(n.currentNotes=o)}),t.ALo(34,"translate"),t._uU(35,"              "),t.qZA()()()(),t.TgZ(36,"div",67)(37,"button",68),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.closeProductModal())}),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"button",69),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.addToOrder())}),t._uU(41),t.ALo(42,"translate"),t.ALo(43,"translate"),t.qZA()()()()}if(2&i){const r=t.oxw(2);t.xp6(4),t.AsE(" \u{1f6d2} ",t.lcZ(5,21,"ADD_TO_ORDER")," ",null==r.selectedProduct?null:r.selectedProduct.name," "),t.xp6(5),t.Q6J("src",r.getFoodImage((null==r.selectedProduct?null:r.selectedProduct.layer3)||""),t.LSH)("alt",null==r.selectedProduct?null:r.selectedProduct.name),t.xp6(4),t.AsE("\u{1f4b0} ",null==r.selectedProduct?null:r.selectedProduct.price," ",t.lcZ(14,23,"EGP"),""),t.xp6(3),t.lnq(" \u2705 ",t.lcZ(17,25,"AVAILABLE"),": ",null==r.selectedProduct?null:r.selectedProduct.available_units," ",t.lcZ(18,27,"UNITS")," "),t.xp6(5),t.hij("\u{1f522} ",t.lcZ(22,29,"QUANTITY"),":"),t.xp6(3),t.Q6J("disabled",r.currentQuantity<=1),t.xp6(2),t.Q6J("ngModel",r.currentQuantity)("max",(null==r.selectedProduct?null:r.selectedProduct.available_units)||""),t.xp6(1),t.Q6J("disabled",r.currentQuantity>=((null==r.selectedProduct?null:r.selectedProduct.available_units)||0)),t.xp6(4),t.hij("\u{1f4dd} ",t.lcZ(32,31,"SPECIAL_NOTES"),":"),t.xp6(2),t.Q6J("ngModel",r.currentNotes)("placeholder",t.lcZ(34,33,"EXTRA_SAUCE_NO_ONIONS")),t.xp6(5),t.hij(" \u274c ",t.lcZ(39,35,"CANCEL")," "),t.xp6(3),t.lnq(" \u2795 ",t.lcZ(42,37,"ADD_TO_ORDER")," - ",(+((null==r.selectedProduct?null:r.selectedProduct.price)||0)*r.currentQuantity).toFixed(2)," ",t.lcZ(43,39,"EGP")," ")}}function Ho(i,a){if(1&i&&(t.TgZ(0,"div",31),t.YNc(1,Jo,6,4,"div",32),t.YNc(2,Yo,12,10,"div",32),t.YNc(3,$o,12,10,"div",32),t.YNc(4,zo,44,41,"div",33),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",1===r.currentStep),t.xp6(1),t.Q6J("ngIf",2===r.currentStep),t.xp6(1),t.Q6J("ngIf",3===r.currentStep),t.xp6(1),t.Q6J("ngIf",r.showProductModal)}}function Go(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"\u{1f5d1}\ufe0f"),t.qZA())}function Ko(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"\u2796"),t.qZA())}function Xo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"div",74),t._UZ(1,"img",75),t.TgZ(2,"div",76)(3,"div",77),t._uU(4),t.qZA(),t.TgZ(5,"div",78)(6,"div",79)(7,"div",80)(8,"button",81),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.decreaseOrderItemQuantity(n))}),t.ALo(9,"translate"),t.ALo(10,"translate"),t.YNc(11,Go,2,0,"span",27),t.YNc(12,Ko,2,0,"span",27),t.qZA(),t.TgZ(13,"span",82),t._uU(14),t.qZA(),t.TgZ(15,"button",83),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.increaseOrderItemQuantity(n))}),t.ALo(16,"translate"),t._uU(17," \u2795 "),t.qZA()()(),t.TgZ(18,"span",84),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"div",85),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"button",86),t.NdJ("click",function(){const n=t.CHM(r).index,l=t.oxw(2);return t.KtG(l.removeFromOrder(n))}),t.ALo(26,"translate"),t._uU(27," \u274c "),t.qZA()()}if(2&i){const r=a.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("src",e.getFoodImage((null==r.product?null:r.product.layer3)||""),t.LSH)("alt",null==r.product?null:r.product.name),t.xp6(3),t.Oqu(null==r.product?null:r.product.name),t.xp6(4),t.Q6J("title",1===r.quantity?t.lcZ(9,14,"REMOVE_ITEM"):t.lcZ(10,16,"DECREASE_QUANTITY")),t.xp6(3),t.Q6J("ngIf",1===r.quantity),t.xp6(1),t.Q6J("ngIf",r.quantity>1),t.xp6(2),t.Oqu(r.quantity),t.xp6(1),t.Q6J("disabled",r.quantity>=((null==r.product?null:r.product.available_units)||0))("title",t.lcZ(16,18,"INCREASE_QUANTITY")),t.xp6(4),t.AsE(" \u{1f4b0} ",(+((null==r.product?null:r.product.price)||0)*r.quantity).toFixed(2)," ",t.lcZ(20,20,"EGP")," "),t.xp6(3),t.AsE(" \u{1f4dd} ",t.lcZ(23,22,"NOTES"),": ",r.notes||t.lcZ(24,24,"NO_NOTES")," "),t.xp6(3),t.s9C("title",t.lcZ(26,26,"REMOVE_ALL"))}}function Vo(i,a){if(1&i&&(t.TgZ(0,"div",70)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",71),t.YNc(5,Xo,28,28,"div",72),t.qZA(),t.TgZ(6,"div",73)(7,"strong"),t._uU(8),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA()()()),2&i){const r=t.oxw();t.xp6(2),t.hij("\u{1f6d2} ",t.lcZ(3,5,"CURRENT_ORDER"),""),t.xp6(3),t.Q6J("ngForOf",r.orderItems),t.xp6(3),t.lnq(" \u{1f4b0} ",t.lcZ(9,7,"TOTAL"),": ",r.getOrderTotal().toFixed(2)," ",t.lcZ(10,9,"EGP")," ")}}function Wo(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",87),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.continueOrdering())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" \u2795 ",t.lcZ(2,1,"ADD_MORE_ITEMS")," "))}function ti(i,a){if(1&i){const r=t.EpF();t.TgZ(0,"button",88),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.submitOrder())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" \u2705 ",t.lcZ(2,1,"SUBMIT_ORDER")," "))}function ei(i,a){1&i&&(t.TgZ(0,"div",89)(1,"div",90),t._UZ(2,"div",91),t.TgZ(3,"p"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()),2&i&&(t.xp6(4),t.hij("\u23f3 ",t.lcZ(5,1,"PROCESSING_ORDER"),""))}function oi(i,a){1&i&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij("\u23f3 ",t.lcZ(3,1,"LOADING"),""))}function ii(i,a){1&i&&(t.TgZ(0,"div",13)(1,"span"),t._uU(2,"TAKE AWAY:"),t.qZA(),t._uU(3," YES "),t.qZA())}function ai(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.notes||"--"),t.xp6(2),t.Oqu(r.total_price)}}function ri(i,a){if(1&i&&(t.TgZ(0,"div",17)(1,"h3",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"table",19)(5,"thead")(6,"tr")(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,ai,9,4,"tr",20),t.qZA()()()),2&i){const r=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,6,"PRODUCTS")),t.xp6(6),t.Oqu(t.lcZ(9,8,"PRODUCTS")),t.xp6(3),t.Oqu(t.lcZ(12,10,"QUANTITY")),t.xp6(3),t.Oqu(t.lcZ(15,12,"NOTES")),t.xp6(3),t.Oqu(t.lcZ(18,14,"PRICE")),t.xp6(3),t.Q6J("ngForOf",r.productBillData.products)}}function li(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&i){const r=a.$implicit;t.xp6(2),t.Oqu(r.name),t.xp6(2),t.Oqu(r.quantity),t.xp6(2),t.Oqu(r.created_by)}}function si(i,a){if(1&i&&(t.TgZ(0,"div",17)(1,"h3",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"table",19)(5,"thead")(6,"tr")(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,li,7,3,"tr",20),t.qZA()()()),2&i){const r=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"RETURNED_PRODUCTS")),t.xp6(6),t.Oqu(t.lcZ(9,7,"PRODUCTS")),t.xp6(3),t.Oqu(t.lcZ(12,9,"QUANTITY")),t.xp6(3),t.Oqu(t.lcZ(15,11,"CREATED_BY")),t.xp6(3),t.Q6J("ngForOf",r.productBillData.returned_products)}}function ci(i,a){1&i&&(t.TgZ(0,"div",21)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij("\u274c ",t.lcZ(3,1,"ERROR_LOADING_BILL"),""))}function di(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"img",9),t.qZA(),t.TgZ(3,"h2",10)(4,"div",11)(5,"span"),t._uU(6),t.ALo(7,"translate"),t.qZA()()(),t.TgZ(8,"div",12)(9,"div",13)(10,"span"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",13)(15,"span"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._uU(18),t.qZA(),t.YNc(19,ii,4,0,"div",14),t.TgZ(20,"div",13)(21,"span"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"div",13)(26,"span"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._uU(29),t.qZA(),t.TgZ(30,"div",13)(31,"span"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34),t.ALo(35,"date"),t.qZA()(),t._UZ(36,"br"),t.YNc(37,ri,21,16,"div",15),t.YNc(38,si,18,13,"div",15),t.YNc(39,ci,4,3,"div",16),t.qZA()),2&i){const r=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,16,"BILL")," #",r.productBillData.bill_number," "),t.xp6(5),t.hij("",t.lcZ(12,18,"TABLE_NUMBER")," :"),t.xp6(2),t.hij(" ",r.productBillData.table_number," "),t.xp6(3),t.hij("",t.lcZ(17,20,"TOTAL")," :"),t.xp6(2),t.hij(" ",r.productBillData.total_price," EGP "),t.xp6(1),t.Q6J("ngIf",r.productBillData.take_away),t.xp6(3),t.hij("",t.lcZ(23,22,"BRANCH")," :"),t.xp6(2),t.hij(" ",r.billData.branch," "),t.xp6(3),t.hij("",t.lcZ(28,24,"CHILD_NAME")," :"),t.xp6(2),t.hij(" ",r.billData.first_child," "),t.xp6(3),t.hij("",t.lcZ(33,26,"CREATED"),":"),t.xp6(2),t.hij(" ",t.xi3(35,28,r.productBillData.created,"short")," "),t.xp6(3),t.Q6J("ngIf",null==r.productBillData.products?null:r.productBillData.products.length),t.xp6(1),t.Q6J("ngIf",(null==r.productBillData.returned_products?null:r.productBillData.returned_products.length)&&("manger"==r.userInfo.role||"owner"==r.userInfo.role||"admin"==r.userInfo.role)),t.xp6(1),t.Q6J("ngIf",!(r.loading||r.productBillData&&r.billData))}}const pi=[{path:"",component:Ft,children:[{path:"",redirectTo:"main",pathMatch:"full"},{path:"main",component:le},{path:"school",component:ie},{path:"staff",component:se},{path:"general/expense",component:$e},{path:"material/expense",component:Ge},{path:"user",component:ue},{path:"sales",component:he},{path:"child",component:Ze},{path:"order",component:(()=>{const a=class{constructor(e,o,n,l,s,h){this.dashboardService=e,this.toaster=o,this.cacheService=n,this.translate=l,this.dialog=s,this.router=h,this.destroy$=new nt.x,this.searchTerm="",this.searchResults=[],this.allActiveBills=[],this.selectedBill=null,this.showDropdown=!1,this.tableNumber=null,this.takeAway=!1,this.currentStep=1,this.layer1Options=[],this.layer2Options=[],this.finalProducts=[],this.selectedLayer1="",this.selectedLayer2="",this.selectedProduct=null,this.showProductModal=!1,this.currentQuantity=1,this.currentNotes="",this.orderItems=[],this.loading=!1,this.loadingLayer=!1,this.branchId=(()=>{const A=JSON.parse(localStorage.getItem("branch")||"{}"),Z=JSON.parse(localStorage.getItem("user")||"{}");return A?.id||Z?.branch||0})(),this.searchSubject=new nt.x,this.layer1Cache=this.cacheService.getCache("cafe_layer1",{persistToLocalStorage:!0}),this.layer2Cache=this.cacheService.getCache("cafe_layer2",{maxSize:50,persistToLocalStorage:!0}),this.productsCache=this.cacheService.getCache("cafe_products",{maxSize:50,persistToLocalStorage:!1})}ngOnInit(){this.loadActiveBills(),this.loadLayer1(),this.setupSearch(),console.log("Cache loaded from previous session:",this.cacheService.getAllCacheStats())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupSearch(){this.searchSubject.pipe((0,Io.b)(300),(0,ko.x)(),(0,w.R)(this.destroy$)).subscribe(e=>{this.performSearch(e)})}loadActiveBills(){this.dashboardService.getActiveBills(this.branchId).pipe((0,w.R)(this.destroy$)).subscribe({next:e=>{this.allActiveBills=e},error:e=>{console.error("Error loading active bills:",e),this.toaster.error("Failed to load active bills")}})}loadLayer1(){const e=`layer1_${this.branchId}`,o=this.layer1Cache.get(e);if(o)return console.log("Layer1: Using cached data (persisted across sessions)"),void(this.layer1Options=o);console.log("Layer1: Fetching from server"),this.loadingLayer=!0,this.dashboardService.getLayer1Products(this.branchId).pipe((0,Q.b)(n=>{this.layer1Cache.set(e,n)}),(0,Y.K)(n=>(console.error("Error loading layer1:",n),this.toaster.error("Failed to load categories"),(0,j.of)([]))),(0,w.R)(this.destroy$)).subscribe({next:n=>{this.layer1Options=n,this.loadingLayer=!1}})}loadLayer2(e){const o=`layer2_${this.branchId}_${e}`,n=this.layer2Cache.get(o);if(n)return console.log(`Layer2 (${e}): Using cached data (persisted)`),void(this.layer2Options=n);console.log(`Layer2 (${e}): Fetching from server`),this.loadingLayer=!0,this.dashboardService.getLayer2Products(this.branchId,e).pipe((0,Q.b)(l=>{this.layer2Cache.set(o,l)}),(0,Y.K)(l=>(console.error("Error loading layer2:",l),this.toaster.error("Failed to load subcategories"),(0,j.of)([]))),(0,w.R)(this.destroy$)).subscribe({next:l=>{this.layer2Options=l,this.loadingLayer=!1}})}loadFinalProducts(e,o){const n=`products_${this.branchId}_${e}_${o}`,l=this.productsCache.get(n);if(l)return console.log(`Products (${e}/${o}): Using cached data`),void(this.finalProducts=l);console.log(`Products (${e}/${o}): Fetching from server`),this.loadingLayer=!0,this.dashboardService.getFinalProducts(this.branchId,e,o).pipe((0,Q.b)(s=>{this.productsCache.set(n,s)}),(0,Y.K)(s=>(console.error("Error loading products:",s),this.toaster.error("Failed to load products"),(0,j.of)([]))),(0,w.R)(this.destroy$)).subscribe({next:s=>{this.finalProducts=s,this.loadingLayer=!1}})}onSearchInput(e){const o=e.target.value;this.searchTerm=o,this.searchSubject.next(o),this.showDropdown=o.length>0}performSearch(e){this.searchResults=e.trim()?this.allActiveBills.filter(o=>o.children.some(n=>n.name.toLowerCase().includes(e.toLowerCase()))):[]}selectBill(e){this.selectedBill=e,this.searchTerm=`Bill #${e.id} - ${e.children.map(o=>o.name).join(", ")}`,this.showDropdown=!1}selectLayer1(e){this.layer2Options=[],this.finalProducts=[],this.selectedLayer2="",this.selectedLayer1=e,this.currentStep=2,this.loadLayer2(e)}selectLayer2(e){this.finalProducts=[],this.selectedLayer2=e,this.currentStep=3,this.loadFinalProducts(this.selectedLayer1,e)}selectProduct(e){this.selectedProduct=e,this.currentQuantity=1,this.currentNotes="",this.showProductModal=!0}closeProductModal(){this.showProductModal=!1,this.selectedProduct=null}increaseQuantity(){this.selectedProduct&&this.currentQuantity<this.selectedProduct.available_units&&this.currentQuantity++}decreaseQuantity(){this.currentQuantity>1&&this.currentQuantity--}addToOrder(){this.selectedProduct&&(this.orderItems.push({product_type:"product",product_id:this.selectedProduct.product_id,id:this.selectedProduct.id,quantity:this.currentQuantity,notes:this.currentNotes?this.currentNotes:"--",product:this.selectedProduct}),this.closeProductModal(),this.toaster.success(`Added ${this.currentQuantity}x ${this.selectedProduct.name} to order`))}removeFromOrder(e){const o=this.orderItems.splice(e,1)[0];o&&o.product&&this.toaster.info(`Removed ${o.product.name} from order completely`)}continueOrdering(){this.currentStep=1,this.selectedLayer1="",this.selectedLayer2="",this.layer2Options=[],this.finalProducts=[]}goBack(){3===this.currentStep?(this.currentStep=2,this.selectedLayer2="",this.finalProducts=[]):2===this.currentStep&&(this.currentStep=1,this.selectedLayer1="",this.selectedLayer2="",this.layer2Options=[],this.finalProducts=[])}getOrderTotal(){return this.orderItems.reduce((e,o)=>e+parseFloat(o.product?.price||"0")*o.quantity,0)}submitOrder(){if(!this.selectedBill||!this.tableNumber||0===this.orderItems.length)return void this.toaster.warning(this.translate.instant("PLEASE_SELECT_BILL"));this.loading=!0;const e={products:this.orderItems.map(o=>({product_type:o.product_type,product_id:o.id,quantity:o.quantity,notes:o.notes})),bill:this.selectedBill.id,table_number:this.tableNumber,take_away:this.takeAway};this.dashboardService.createProductBill(e).pipe((0,w.R)(this.destroy$)).subscribe({next:o=>{console.log("Order submitted successfully:",o),this.toaster.success(o.message||"Order submitted successfully"),this.productsCache.clear(),this.openBillDialog(o.id),this.resetForm(),this.loading=!1},error:o=>{console.error("Error submitting order:",o),this.toaster.error("Error submitting order. Please try again."),this.loading=!1}})}openBillDialog(e){this.router.navigate(["/dashboard/cofe-bill",e])}resetForm(){this.selectedBill=null,this.searchTerm="",this.tableNumber=null,this.takeAway=!1,this.orderItems=[],this.currentStep=1,this.selectedLayer1="",this.selectedLayer2="",this.layer2Options=[],this.finalProducts=[],this.loadActiveBills()}forceRefreshLayer1(){this.layer1Cache.clear(),this.loadLayer1()}forceRefreshLayer2(){this.selectedLayer1&&(this.layer2Cache.clearPattern(`layer2_${this.branchId}_${this.selectedLayer1}`),this.loadLayer2(this.selectedLayer1))}forceRefreshProducts(){this.selectedLayer1&&this.selectedLayer2&&(this.productsCache.clearPattern(`products_${this.branchId}_${this.selectedLayer1}_${this.selectedLayer2}`),this.loadFinalProducts(this.selectedLayer1,this.selectedLayer2))}getFoodImage(e){const o={\u0627\u062e\u0631\u064a:"https://tse2.mm.bing.net/th/id/OIP.pDBNDkwfB67QnmasFRfC9wHaFj?rs=1&pid=ImgDetMain&o=7&rm=3",\u062f\u064a\u0632\u064a\u0631\u062a:"https://images.unsplash.com/photo-1551024506-0bccd828d307?w=300&h=200&fit=crop","\u0645\u0639\u062c\u0646\u0627\u062a \u062d\u0644\u0648\u0629":"https://tse1.mm.bing.net/th/id/OIP.oRZelOfrswAzBbOCcetRFwHaFF?rs=1&pid=ImgDetMain&o=7&rm=3",\u0633\u0646\u0627\u0643\u0633:"https://bing.com/th?id=OSK.f2b015ee0a7fd3f507118faf168de27f","\u0645\u0634\u0631\u0648\u0628\u0627\u062a \u0628\u0627\u0631\u062f\u0629":"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=300&h=200&fit=crop",\u0642\u0647\u0648\u0629:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=300&h=200&fit=crop","\u0645\u0634\u0631\u0648\u0628\u0627\u062a \u0633\u0627\u062e\u0646\u0629":"https://bing.com/th?id=OSK.5fd94c4692c9435341ad828764185d04",other:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=300&h=200&fit=crop",dessert:"https://images.unsplash.com/photo-1551024506-0bccd828d307?w=300&h=200&fit=crop",pastries:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=300&h=200&fit=crop",snacks:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop","cold drinks":"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=300&h=200&fit=crop",beverages:"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=300&h=200&fit=crop",coffee:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=300&h=200&fit=crop","hot drinks":"https://images.unsplash.com/photo-1556881286-04ba2dd9399d?w=300&h=200&fit=crop",tea:"https://images.unsplash.com/photo-1556881286-04ba2dd9399d?w=300&h=200&fit=crop",burger:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=300&h=200&fit=crop",pizza:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=300&h=200&fit=crop",sides:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop",salads:"https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=300&h=200&fit=crop",wraps:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=300&h=200&fit=crop",fries:"https://images.unsplash.com/photo-1576107232684-1279f390859f?w=300&h=200&fit=crop",fadge:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=300&h=200&fit=crop",nutella:"https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=300&h=200&fit=crop",chocolate:"https://images.unsplash.com/photo-1549924231-f129b911e442?w=300&h=200&fit=crop"},n=e?.trim()||"";if(o[n])return o[n];for(const[l,s]of Object.entries(o))if(n.includes(l)||l.includes(n))return s;return n.includes("\u0645\u0634\u0631\u0648\u0628\u0627\u062a")&&n.includes("\u0633\u0627\u062e\u0646\u0629")?o["\u0645\u0634\u0631\u0648\u0628\u0627\u062a \u0633\u0627\u062e\u0646\u0629"]:n.includes("\u0645\u0634\u0631\u0648\u0628\u0627\u062a")&&n.includes("\u0628\u0627\u0631\u062f\u0629")?o["\u0645\u0634\u0631\u0648\u0628\u0627\u062a \u0628\u0627\u0631\u062f\u0629"]:n.includes("\u0642\u0647\u0648\u0629")?o.\u0642\u0647\u0648\u0629:n.includes("\u062f\u064a\u0632\u064a\u0631\u062a")?o.\u062f\u064a\u0632\u064a\u0631\u062a:n.includes("\u0645\u0639\u062c\u0646\u0627\u062a")?o["\u0645\u0639\u062c\u0646\u0627\u062a \u062d\u0644\u0648\u0629"]:n.includes("\u0633\u0646\u0627\u0643\u0633")?o.\u0633\u0646\u0627\u0643\u0633:n.includes("\u0627\u062e\u0631\u064a")?o.\u0627\u062e\u0631\u064a:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=300&h=200&fit=crop"}getCacheDebugInfo(){console.log("All Cache Statistics:",this.cacheService.getAllCacheStats()),console.log("Layer1 Cache:",this.layer1Cache.getStats()),console.log("Layer2 Cache:",this.layer2Cache.getStats()),console.log("Products Cache:",this.productsCache.getStats())}clearAllCaches(){this.cacheService.clearAllCaches(),console.log("All caches cleared (including localStorage)")}increaseOrderItemQuantity(e){const o=this.orderItems[e];o&&o.product&&o.quantity<o.product.available_units?(o.quantity++,this.toaster.success(`${o.product.name} quantity increased to ${o.quantity}`)):o&&o.product&&this.toaster.warning(`Maximum available quantity reached for ${o.product.name}`)}decreaseOrderItemQuantity(e){const o=this.orderItems[e];!o||!o.product||(1===o.quantity?this.removeFromOrder(e):(o.quantity--,this.toaster.info(`${o.product.name} quantity decreased to ${o.quantity}`)))}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(x),t.Y36(P._W),t.Y36(Eo),t.Y36(p.sK),t.Y36(u.uw),t.Y36(m.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cofe-order"]],decls:38,vars:32,consts:[[1,"order-container"],[1,"header"],[1,"fixed-fields"],[1,"field-group"],[1,"search-container"],["type","text",1,"search-input",3,"placeholder","ngModel","ngModelChange","input"],["class","dropdown",4,"ngIf"],["class","selected-bill",4,"ngIf"],["class","no-selection",4,"ngIf"],["for","tableNumber"],["type","number","id","tableNumber",1,"table-input",3,"ngModel","placeholder","ngModelChange"],[1,"field-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmark"],["class","product-selection",4,"ngIf"],["class","order-summary",4,"ngIf"],[1,"action-buttons"],["class","continue-btn",3,"click",4,"ngIf"],["class","submit-btn",3,"disabled","click",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"dropdown"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"bill-info"],[1,"children-names"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"selected-bill"],[1,"total"],[1,"no-selection"],[1,"product-selection"],["class","layer-selection",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"layer-selection"],[1,"menu-grid"],["class","menu-item",3,"click",4,"ngFor","ngForOf"],[1,"menu-item",3,"click"],[1,"food-image",3,"src","alt"],[1,"item-label"],[1,"back-btn",3,"click"],[1,"back-icon"],[1,"products-grid"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-info"],[1,"product-name"],[1,"product-price"],[1,"product-availability"],[1,"availability-badge"],[1,"add-overlay"],[1,"plus-icon"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-food-image",3,"src","alt"],[1,"product-details"],[1,"price"],[1,"availability"],[1,"quantity-selector"],[1,"quantity-controlss"],[1,"qty-btn",3,"disabled","click"],["type","number","min","1",1,"qty-input",3,"ngModel","max","ngModelChange"],[1,"notes-section"],["rows","3",1,"notes-textarea",3,"ngModel","placeholder","ngModelChange"],[1,"modal-actions"],[1,"cancel-btn",3,"click"],[1,"add-btn",3,"click"],[1,"order-summary"],[1,"order-items"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-total"],[1,"order-item"],[1,"item-image",3,"src","alt"],[1,"item-details"],[1,"item-name"],[1,"item-meta"],[1,"quantity-control-section"],[1,"quantity-controls"],[1,"qty-control-btn","decrease-btn",3,"title","click"],[1,"quantity-display"],[1,"qty-control-btn","increase-btn",3,"disabled","title","click"],[1,"item-price"],[1,"item-notes"],[1,"remove-btn",3,"title","click"],[1,"continue-btn",3,"click"],[1,"submit-btn",3,"disabled","click"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"spinner"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",2)(6,"div",3)(7,"label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",4)(11,"input",5),t.NdJ("ngModelChange",function(s){return n.searchTerm=s})("input",function(s){return n.onSearchInput(s)}),t.ALo(12,"translate"),t.qZA(),t.YNc(13,So,2,1,"div",6),t.qZA()(),t.TgZ(14,"div",3)(15,"label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,Bo,10,15,"div",7),t.YNc(19,Ro,3,3,"div",8),t.qZA(),t.TgZ(20,"div",3)(21,"label",9),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"input",10),t.NdJ("ngModelChange",function(s){return n.tableNumber=s}),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",11)(27,"label",12)(28,"input",13),t.NdJ("ngModelChange",function(s){return n.takeAway=s}),t.qZA(),t._UZ(29,"span",14),t._uU(30),t.ALo(31,"translate"),t.qZA()()(),t.YNc(32,Ho,5,4,"div",15),t.YNc(33,Vo,11,11,"div",16),t.TgZ(34,"div",17),t.YNc(35,Wo,3,3,"button",18),t.YNc(36,ti,3,3,"button",19),t.qZA(),t.YNc(37,ei,6,3,"div",20),t.qZA()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,18,"CREATE_NEW_ORDER")," ... \u{1f195}"),t.xp6(5),t.hij("\u{1f50d} ",t.lcZ(9,20,"SEARCH_CHILD_BILL"),""),t.xp6(3),t.Q6J("placeholder",t.lcZ(12,22,"SEARCH_BY_CHILD_NAME"))("ngModel",n.searchTerm),t.xp6(2),t.Q6J("ngIf",n.searchResults.length>0&&n.showDropdown),t.xp6(3),t.hij("\u2705 ",t.lcZ(17,24,"SELECTED_BILL"),""),t.xp6(2),t.Q6J("ngIf",n.selectedBill),t.xp6(1),t.Q6J("ngIf",!n.selectedBill),t.xp6(3),t.hij("\u{1fa91} ",t.lcZ(23,26,"TABLE_NUMBER"),""),t.xp6(2),t.Q6J("ngModel",n.tableNumber)("placeholder",t.lcZ(25,28,"ENTER_TABLE_NUMBER")),t.xp6(4),t.Q6J("ngModel",n.takeAway),t.xp6(2),t.hij(" \u{1f4e6} ",t.lcZ(31,30,"TAKE_AWAY")," "),t.xp6(2),t.Q6J("ngIf",n.selectedBill),t.xp6(1),t.Q6J("ngIf",n.orderItems.length>0),t.xp6(2),t.Q6J("ngIf",n.orderItems.length>0&&3===n.currentStep),t.xp6(1),t.Q6J("ngIf",n.orderItems.length>0),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[d.sg,d.O5,c.Fj,c.wV,c.Wl,c.JJ,c.qQ,c.Fd,c.On,d.rS,p.X$],styles:['body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.order-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;min-height:100vh;color:#fff}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.fixed-fields[_ngcontent-%COMP%]{background:#1f2937;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:30px;border:1px solid rgba(255,255,255,.2)}.field-group[_ngcontent-%COMP%]{margin-bottom:20px}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#e8f5e8;font-size:1rem}.search-container[_ngcontent-%COMP%]{position:relative}.search-input[_ngcontent-%COMP%], .table-input[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:2px solid rgba(255,255,255,.3);border-radius:10px;background:rgba(255,255,255,.1);color:#fff;font-size:1rem;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:all .3s ease}.search-input[_ngcontent-%COMP%]:focus, .table-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 10px #4caf504d}.search-input[_ngcontent-%COMP%]::placeholder, .table-input[_ngcontent-%COMP%]::placeholder{color:#fff9}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:10px;box-shadow:0 8px 32px #0000004d;z-index:1000;max-height:350px;overflow-y:auto;margin-top:5px}.dropdown-item[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid rgba(0,0,0,.1);cursor:pointer;transition:background-color .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background:rgba(65,114,221,.1)}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.bill-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c5530;font-size:1.1rem}.children-names[_ngcontent-%COMP%]{color:#666;margin-top:5px;font-size:.9rem}.selected-bill[_ngcontent-%COMP%]{background:rgba(76,175,80,.2);padding:15px;border-radius:10px;border:1px solid rgba(76,175,80,.4)}.selected-bill[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{float:right;font-weight:600;color:#4caf50}.no-selection[_ngcontent-%COMP%]{padding:15px;background:rgba(255,255,255,.05);border-radius:10px;color:#ffffffb3;font-style:italic}.checkbox-group[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:1rem;-webkit-user-select:none;user-select:none}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}.checkmark[_ngcontent-%COMP%]{height:20px;width:20px;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.3);border-radius:4px;margin-right:10px;position:relative;transition:all .3s ease}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background:#4caf50;border-color:#4caf50}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;left:6px;top:2px;width:6px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.product-selection[_ngcontent-%COMP%]{margin-bottom:30px}.layer-selection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;margin-bottom:30px;color:#fff;text-shadow:2px 2px 4px rgba(0,0,0,.3);letter-spacing:3px}.menu-grid[_ngcontent-%COMP%], .products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;margin-bottom:20px}.menu-item[_ngcontent-%COMP%], .product-item[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:20px;text-align:center;cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,255,255,.2);position:relative;overflow:hidden}.menu-item[_ngcontent-%COMP%]:hover, .product-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0000004d;border-color:#4caf50}.product-item[_ngcontent-%COMP%]{position:relative}.product-item[_ngcontent-%COMP%]:hover   .add-overlay[_ngcontent-%COMP%]{opacity:1}.add-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#1f2937;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.plus-icon[_ngcontent-%COMP%]{font-size:3rem;color:#fff;font-weight:700}.food-image[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:10px;margin-bottom:15px}.item-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#fff;text-transform:uppercase;letter-spacing:1px}.product-info[_ngcontent-%COMP%]{text-align:left}.product-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#fff;margin-bottom:8px}.product-price[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#4caf50;margin-bottom:5px}.product-availability[_ngcontent-%COMP%]{margin-top:8px}.availability-badge[_ngcontent-%COMP%]{background:rgba(76,175,80,.2);color:#4caf50;padding:4px 8px;border-radius:15px;font-size:.8rem;font-weight:500}.availability-badge.low-stock[_ngcontent-%COMP%]{background:rgba(255,152,0,.2);color:#ff9800}.back-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);color:#fff;border:2px solid rgba(255,255,255,.3);padding:12px 24px;border-radius:25px;cursor:pointer;font-size:1rem;font-weight:600;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;gap:8px}.back-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);border-color:#4caf50;transform:translate(-5px)}.back-icon[_ngcontent-%COMP%]{font-size:1.2rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{background:#1f2937;border-radius:10px;max-width:500px;width:90%;max-height:80vh;box-shadow:0 20px 60px #00000080;border:1px solid rgba(255,255,255,.2);overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:600;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:2rem;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1)}.modal-body[_ngcontent-%COMP%]{padding:25px}.modal-food-image[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:15px;margin-bottom:20px}.product-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.6rem;color:#4caf50;margin:0 0 10px}.product-details[_ngcontent-%COMP%]   .availability[_ngcontent-%COMP%]{color:#fffc;margin:0 0 20px}.quantity-selector[_ngcontent-%COMP%]{margin-bottom:20px}.quantity-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:#e8f5e8}.quantity-controlss[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.qty-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid #4caf50;background:rgba(76,175,80,.2);color:#4caf50;font-size:1.2rem;font-weight:700;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#4caf50;color:#fff}.qty-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.qty-input[_ngcontent-%COMP%]{width:80px;padding:10px;border:2px solid rgba(255,255,255,.3);border-radius:10px;background:rgba(255,255,255,.1);color:#fff;text-align:center;font-size:1.1rem;font-weight:600}.qty-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50}.notes-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:600;color:#e8f5e8}.notes-textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid rgba(255,255,255,.3);border-radius:10px;background:rgba(255,255,255,.1);color:#fff;font-size:1rem;resize:vertical;min-height:80px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.notes-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50}.notes-textarea[_ngcontent-%COMP%]::placeholder{color:#fff9}.modal-actions[_ngcontent-%COMP%]{padding:20px 25px;border-top:1px solid rgba(255,255,255,.1);display:flex;gap:15px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%], .add-btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:25px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;border:2px solid}.cancel-btn[_ngcontent-%COMP%]{background:transparent;color:#fffc;border-color:#ffffff4d}.cancel-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.1);color:#fff;border-color:#ffffff80}.add-btn[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border-color:#4caf50}.add-btn[_ngcontent-%COMP%]:hover{background:#45a049;transform:translateY(-2px);box-shadow:0 5px 15px #4caf5066}.order-summary[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:30px;border:1px solid rgba(255,255,255,.2)}.order-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;font-weight:600;margin:0 0 20px;text-align:center}.order-items[_ngcontent-%COMP%]{margin-bottom:20px}.order-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background:rgba(255,255,255,.05);padding:15px;border-radius:10px;margin-bottom:10px;position:relative}.item-image[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;border-radius:8px;flex-shrink:0}.item-details[_ngcontent-%COMP%]{flex:1}.item-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#fff;margin-bottom:5px}.item-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.item-quantity[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem}.item-price[_ngcontent-%COMP%]{color:#4caf50;font-weight:600;font-size:1rem}.item-notes[_ngcontent-%COMP%]{font-size:.8rem;color:#fff9;font-style:italic}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent!important;color:#fff;border:none;width:40px;height:40px;border-radius:50%;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease}.order-total[_ngcontent-%COMP%]{text-align:center;padding:15px;background:rgba(76,175,80,.2);border-radius:10px;border:1px solid rgba(76,175,80,.4)}.order-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.4rem;color:#4caf50}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;margin-bottom:20px}.continue-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{padding:15px 30px;border-radius:25px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;border:2px solid}.continue-btn[_ngcontent-%COMP%]{background:transparent;color:#4caf50;border-color:#4caf50}.continue-btn[_ngcontent-%COMP%]:hover{background:#4caf50;color:#fff}.submit-btn[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border-color:#4caf50;min-width:200px}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#45a049;transform:translateY(-2px);box-shadow:0 8px 25px #4caf5066}.submit-btn[_ngcontent-%COMP%]:disabled{background:rgba(255,255,255,.2);color:#ffffff80;border-color:#ffffff4d;cursor:not-allowed;transform:none;box-shadow:none}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:3000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.loading-spinner[_ngcontent-%COMP%]{text-align:center;color:#fff}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(255,255,255,.3);border-top:5px solid #4caf50;border-radius:50%;margin:0 auto 20px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}@media (max-width: 768px){.order-container[_ngcontent-%COMP%]{padding:15px}.menu-grid[_ngcontent-%COMP%], .products-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.layer-selection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:2px}.modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.continue-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{width:100%;max-width:300px}}.item-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:8px 0}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:linear-gradient(145deg,#f8f9fa,#e9ecef);border-radius:25px;padding:8px 16px;border:1px solid #dee2e6;box-shadow:0 2px 8px #00000014;min-width:140px}.qty-control-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;border-radius:50%;cursor:pointer;font-size:14px;transition:all .3s cubic-bezier(.4,0,.2,1);background:linear-gradient(145deg,#ffffff,#f1f3f4);box-shadow:0 2px 4px #0000001a}.qty-control-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px) scale(1.05);box-shadow:0 4px 12px #00000026}.qty-control-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0) scale(.98)}.qty-control-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.decrease-btn[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff8e1,#ffecb3);border:1px solid #ffcc80}.decrease-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(145deg,#fff3c4,#ffe082);box-shadow:0 4px 12px #ffc1074d}.increase-btn[_ngcontent-%COMP%]{background:linear-gradient(145deg,#e8f5e8,#c8e6c9);border:1px solid #81c784}.increase-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(145deg,#c8e6c9,#a5d6a7);box-shadow:0 4px 12px #4caf504d}.quantity-display[_ngcontent-%COMP%]{min-width:24px;text-align:center;font-weight:600;font-size:15px;color:#495057;margin:0 4px}@media (max-width: 768px){.quantity-controls[_ngcontent-%COMP%]{gap:8px;padding:6px 12px;min-width:120px}.qty-control-btn[_ngcontent-%COMP%]{width:26px;height:26px;font-size:12px}.quantity-display[_ngcontent-%COMP%]{font-size:14px;min-width:20px}}.item-price[_ngcontent-%COMP%]{font-weight:700;color:#28a745;font-size:14px;margin-right:8px}.remove-btn[_ngcontent-%COMP%]{background:transparent;color:#fff;border:none;border-radius:50%;width:35px;height:35px;cursor:pointer;transition:background-color .2s;font-size:12px}.remove-btn[_ngcontent-%COMP%]:hover{background:#c82333}.item-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;object-fit:cover}@media (max-width: 768px){.quantity-controls[_ngcontent-%COMP%]{gap:6px;padding:2px 6px}.qty-control-btn[_ngcontent-%COMP%]{width:28px;height:28px;font-size:12px}.quantity-display[_ngcontent-%COMP%]{font-size:14px}}.checkbox-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px 0;padding:15px}.checkbox-label[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#6c757d 0%,#495057 100%);color:#fff;padding:12px 24px;border-radius:25px;cursor:pointer;font-weight:600;font-size:16px;transition:all .3s ease;box-shadow:0 4px 15px #6c757d4d;border:2px solid transparent;min-width:200px;-webkit-user-select:none;user-select:none}.checkbox-label[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #6c757d66}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;width:0;height:0}.checkmark[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;background-color:transparent;border:2px solid rgba(255,255,255,.7);border-radius:4px;margin-right:10px;transition:all .2s ease}.checkmark[_ngcontent-%COMP%]:after{content:"";width:6px;height:10px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg) scale(0);transition:transform .2s ease}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#fff;border-color:#fff}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{transform:rotate(45deg) scale(1);border-color:#28a745}.checkbox-label[_ngcontent-%COMP%]:has(input[type=checkbox]:checked){background:linear-gradient(135deg,#28a745 0%,#20c997 100%);box-shadow:0 4px 15px #28a7454d}.checkbox-label[_ngcontent-%COMP%]:has(input[type=checkbox]:checked):hover{box-shadow:0 6px 20px #28a74566}.checkbox-label.checked[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745 0%,#20c997 100%);box-shadow:0 4px 15px #28a7454d}.checkbox-label.checked[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #28a74566}.checkbox-label[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 2px 10px #6c757d33}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus{outline:none}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus-visible + .checkmark[_ngcontent-%COMP%]{outline:2px solid rgba(255,255,255,.8);outline-offset:2px}@media (max-width: 768px){.checkbox-label[_ngcontent-%COMP%]{min-width:180px;padding:10px 20px;font-size:14px}.checkmark[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:8px}.checkmark[_ngcontent-%COMP%]:after{width:5px;height:8px}}']}),i})()},{path:"bills",children:[{path:"children/active",component:Bn},{path:"children/all",component:Ln},{path:"cafe/active",component:Hn},{path:"cafe/all",component:Vn},{path:"child/:id",component:wo}]},{path:"school/:id",component:Me},{path:"child/:id",component:we},{path:"user/:id",component:Ee},{path:"expense/:id",component:en},{path:"cofe-bill/:id",component:(()=>{const a=class{constructor(e,o,n,l,s){this.route=e,this.router=o,this.dashboardService=n,this.toaster=l,this.location=s,this.productBillData=null,this.billData=null,this.loading=!0,this.productBillId=0,this.userInfo=JSON.parse(localStorage.getItem("user")||"{}")}ngOnInit(){this.route.params.subscribe(e=>{this.productBillId=+e.id,this.productBillId&&this.loadProductBillData()})}loadProductBillData(){this.loading=!0,this.dashboardService.getBillDetails(this.productBillId).subscribe(e=>{this.productBillData=e,this.billData=e,this.loading=!1},e=>{console.error("Error loading product bill:",e),this.toaster.error("Failed to load bill details"),this.loading=!1})}printBill(){window.print()}goBack(){this.location.back()}getChildrenNames(){return this.billData?.first_child?.length?this.billData.first_child.map(e=>e.name).join(", "):"N/A"}};let i=a;return a.\u0275fac=function(o){return new(o||a)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(x),t.Y36(P._W),t.Y36(d.Ye))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cofe-bill"]],decls:9,vars:10,consts:[[1,"bill-actions","no-print"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],["class","loading-container",4,"ngIf"],["class","bill-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"bill-container"],[1,"text-center"],["src","../../../../assets/png/logo-01.png","alt","logo",1,"logo",2,"width","200px"],[1,"bill-title"],[1,""],[1,"bill-card"],[1,"bill-row"],["class","bill-row",4,"ngIf"],["class","products-section",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"products-section"],[1,"section-title"],[1,"children-table"],[4,"ngFor","ngForOf"],[1,"error-container"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.printBill()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.goBack()}),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.YNc(7,oi,4,3,"div",3),t.YNc(8,di,40,31,"div",4)),2&o&&(t.xp6(1),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" \u{1f5a8}\ufe0f ",t.lcZ(3,6,"PRINT")," "),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" \u2190 ",t.lcZ(6,8,"BACK")," "),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading&&n.productBillData&&n.billData))},dependencies:[d.sg,d.O5,C.lW,d.uU,p.X$],styles:["body.dark-theme[_ngcontent-%COMP%]{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}body.light-theme[_ngcontent-%COMP%]{--primary-color: #fafbfc;--secondary-color: #f1f3f4;--button-color: #667eea;--font-color: #2d3748;--button-hover-color: #764ba2}[_ngcontent-%COMP%]:root{--primary-color: #111827;--secondary-color: #1f2937;--button-color: #004953;--font-color: #f3f4f6;--button-hover-color: rgb(13, 102, 95)}.bill-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:10px;margin:20px auto;max-width:500px;padding:0 20px}.bill-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;display:flex;align-items:center;gap:6px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px;font-size:16px;font-weight:700}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{color:#f3f4f6}.error-container[_ngcontent-%COMP%]{color:#f44336}.bill-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;background-color:#1f2937;border-radius:10px;color:#f3f4f6}.bill-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:200px;margin:0 auto 20px;display:block}.bill-title[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin-bottom:15px;color:#f3f4f6;font-weight:700}.section-title[_ngcontent-%COMP%]{font-size:16px;margin:20px 0 10px;font-weight:700;color:#f3f4f6}.bill-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.bill-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 12px;background:transparent;border-radius:6px;font-size:14px}.bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#f3f4f6}.total-section[_ngcontent-%COMP%]{border:2px solid #111827;background-color:#1118270d;padding:10px;border-radius:8px;margin-top:15px}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:18px;font-weight:700}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.children-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:10px 0}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .children-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:6px;text-align:right;font-size:14px}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1f2937;font-weight:700}.bill-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:15px;border-top:2px solid #111827}.bill-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-weight:700;font-size:14px}@media print{.no-print[_ngcontent-%COMP%], .bill-actions[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:none!important}.bill-title[_ngcontent-%COMP%]:after, .bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after, th[_ngcontent-%COMP%]:before{content:none!important}@page{margin:-50px -30px!important}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:60mm;height:auto;margin:0!important;padding:0!important;background:none;color:#000!important}.bill-container[_ngcontent-%COMP%]{width:60mm!important;max-width:80mm;margin:-25px;padding:0;font-family:monospace;font-size:10px!important;color:#000!important;background:white;box-shadow:none!important;border-radius:0!important}.logo[_ngcontent-%COMP%]{width:50mm!important;margin:0 auto 3mm!important}.bill-title[_ngcontent-%COMP%]{text-align:center;color:#000;font-weight:bolder;font-size:12px!important;margin:10px 0}.section-title[_ngcontent-%COMP%]{font-size:10px!important;margin:5px 0;text-align:center;color:#000}.bill-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px 0;font-size:10px!important;font-weight:700;width:100%;background:none!important}.bill-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000!important}.total-section[_ngcontent-%COMP%]{border:1px solid #000!important;background:none!important;padding:5px;margin:5px 0}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{font-size:12px!important}.total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .total-section[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000!important}.children-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:8px!important;margin:5px 0}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .children-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000;padding:2px;font-size:10px!important;text-align:right;font-weight:700;color:#000!important}.children-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;font-size:8px!important;background:none!important}.bill-footer[_ngcontent-%COMP%]{border-top:1px solid #000;margin-top:10px;padding:5px 0}.bill-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px!important;color:#000!important}}@media print and (pointer: coarse) and (hover: none) and (min-width: 768px) and (max-width: 1024px){@page{margin:0!important;size:auto}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{width:100%!important;margin:0!important;padding:0!important}.bill-container[_ngcontent-%COMP%]{width:100%!important;max-width:100%!important;margin:0!important;padding:10px!important;box-sizing:border-box}}@media print and (orientation: portrait) and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 1){.bill-container[_ngcontent-%COMP%]{margin-right:0!important;padding-right:5px!important}}"]}),i})()}]}];let gi=(()=>{const a=class{};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[m.Bz.forChild(pi),m.Bz]}),i})();var ui=g(5551);function ot(i){return new lt.w(i,"./assets/i18n/",".json")}(0,d.qS)(at);let hi=(()=>{const a=class{};let i=a;return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:t.soG,useValue:"ar-EG"}],imports:[d.ez,m.Bz,O.JF,gi,st.m,c.u5,ui.bB,c.UX,U.SJ,z.g0,L.ie,E.Cq,v.Ps,C.ot,rt.t,b.FA,f.lN,I.XK,D.c,p.aw.forChild({loader:{provide:p.Zw,useFactory:ot,deps:[O.eN]}})]}),i})()}}]);